<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>mysql基础 | 鸢尾の博客</title><meta name="author" content="阮·伟"><meta name="copyright" content="阮·伟"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="MySQL学习笔记【基础篇】 从前曾经学过一下mysql的基础内容，不过由于当时没有认真学导致会的东西太少，现根据一个教程视频的学习【此内容对应基础篇的P1-P178】，完成了这个笔记，主要涉及mysql的基础知识。  一、数据库相关概念1、DB：数据库，保存一组有组织的数据的容器        2、DBMS：数据库管理系统，又称为数据库软件（产品），用于管理DB中的数据        3、SQL">
<meta property="og:type" content="article">
<meta property="og:title" content="mysql基础">
<meta property="og:url" content="https://bileis.github.io/2024/03/05/mysql%E5%9F%BA%E7%A1%80/index.html">
<meta property="og:site_name" content="鸢尾の博客">
<meta property="og:description" content="MySQL学习笔记【基础篇】 从前曾经学过一下mysql的基础内容，不过由于当时没有认真学导致会的东西太少，现根据一个教程视频的学习【此内容对应基础篇的P1-P178】，完成了这个笔记，主要涉及mysql的基础知识。  一、数据库相关概念1、DB：数据库，保存一组有组织的数据的容器        2、DBMS：数据库管理系统，又称为数据库软件（产品），用于管理DB中的数据        3、SQL">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg">
<meta property="article:published_time" content="2024-03-05T01:00:29.000Z">
<meta property="article:modified_time" content="2024-03-05T01:05:20.140Z">
<meta property="article:author" content="阮·伟">
<meta property="article:tag" content="MySql基础入门">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://bileis.github.io/2024/03/05/mysql%E5%9F%BA%E7%A1%80/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin=""/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css?v=4.13.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"找不到您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":300},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.11.1/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'mysql基础',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-03-05 09:05:20'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><link rel="stylesheet" href="."><link rel="stylesheet" href="/css/mycss.css"><link rel="stylesheet" href="/css/mouse.css"><meta name="generator" content="Hexo 7.1.1">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
<link rel="alternate" href="/atom.xml" title="鸢尾の博客" type="application/atom+xml">
</head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/favicon.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">4</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">2</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw fa fa-paper-plane"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/timeline/"><i class="fa-fw fa fa-bell"></i><span> 日志</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-list"></i><span> 菜单</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/%E5%85%B3%E4%BA%8E"><i class="fa-fw /about/"></i><span> 0</span></a></li><li><a class="site-page child" href="/myself"><i class="fa-fw /myself/"></i><span> 1</span></a></li><li><a class="site-page child" href="/butterfly%E4%B8%BB%E9%A2%98"><i class="fa-fw https://github.com/jerryc127/hexo-theme-butterfly/"></i><span> 2</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg')"><nav id="nav"><span id="blog-info"><a href="/" title="鸢尾の博客"><span class="site-name">鸢尾の博客</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw fa fa-paper-plane"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/timeline/"><i class="fa-fw fa fa-bell"></i><span> 日志</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-list"></i><span> 菜单</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/%E5%85%B3%E4%BA%8E"><i class="fa-fw /about/"></i><span> 0</span></a></li><li><a class="site-page child" href="/myself"><i class="fa-fw /myself/"></i><span> 1</span></a></li><li><a class="site-page child" href="/butterfly%E4%B8%BB%E9%A2%98"><i class="fa-fw https://github.com/jerryc127/hexo-theme-butterfly/"></i><span> 2</span></a></li></ul></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">mysql基础</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-03-05T01:00:29.000Z" title="发表于 2024-03-05 09:00:29">2024-03-05</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-03-05T01:05:20.140Z" title="更新于 2024-03-05 09:05:20">2024-03-05</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="mysql基础"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="MySQL学习笔记【基础篇】"><a href="#MySQL学习笔记【基础篇】" class="headerlink" title="MySQL学习笔记【基础篇】"></a>MySQL学习笔记【基础篇】</h1><blockquote>
<p>从前曾经学过一下<code>mysql</code>的基础内容，不过由于当时没有认真学导致会的东西太少，现根据一个<a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV12b411K7Zu">教程视频</a>的学习【此内容对应基础篇的<code>P1-P178</code>】，完成了这个笔记，主要涉及<code>mysql</code>的基础知识。</p>
</blockquote>
<h2 id="一、数据库相关概念"><a href="#一、数据库相关概念" class="headerlink" title="一、数据库相关概念"></a><strong>一、数据库相关概念</strong></h2><p>1、<code>DB</code>：数据库，保存一组有组织的数据的容器<br>        2、<code>DBMS</code>：数据库管理系统，又称为数据库软件（产品），用于管理DB中的数据<br>        3、<code>SQL</code>:结构化查询语言，用于和DBMS通信的语言</p>
<h2 id="二、数据库的好处"><a href="#二、数据库的好处" class="headerlink" title="二、数据库的好处"></a><strong>二、数据库的好处</strong></h2><p>1.持久化数据到本地</p>
<p>2.可以实现结构化查询，方便管理</p>
<h2 id="三、数据库存储数据的特点"><a href="#三、数据库存储数据的特点" class="headerlink" title="三、数据库存储数据的特点"></a><strong>三、数据库存储数据的特点</strong></h2><p>1、将数据放到表中，表再放到库中<br>        2、一个数据库中可以有多个表，每个表都有一个的名字，用来标识自己。表名具有唯一性。<br>        3、表具有一些特性，这些特性定义了数据在表中如何存储，类似java中 “类”的设计。<br>        4、表由列组成，我们也称为字段。所有表都是由一个或多个列组成的，每一列类似java 中的”属性”<br>        5、表中的数据是按行存储的，每一行类似于java中的“对象”。</p>
<h2 id="四、MySQL服务的启动和停止"><a href="#四、MySQL服务的启动和停止" class="headerlink" title="四、MySQL服务的启动和停止"></a><strong>四、MySQL服务的启动和停止</strong></h2><p>方式一：计算机——右击管理——服务<br>        方式二：通过管理员身份运行，输入</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">net <span class="keyword">start</span> 服务名（启动服务）</span><br><span class="line">net stop 服务名（停止服务）</span><br></pre></td></tr></tbody></table></figure>

<p>服务名是根据你当初的设定决定的，如果你忘了，可以参考这个<a target="_blank" rel="noopener" href="https://jingyan.baidu.com/article/17bd8e52f2b7d8c4aa2bb87e.html">链接</a>。</p>
<p>你的服务名是<code>MySQL57</code></p>
<h2 id="五、mysql服务的登录和退出"><a href="#五、mysql服务的登录和退出" class="headerlink" title="五、mysql服务的登录和退出"></a><strong>五、mysql服务的登录和退出</strong></h2><p>方式一：通过mysql自带的客户端<br>        只限于root用户</p>
<p>方式二：通过windows自带的客户端<br>        登录：<br>        <code>mysql 【-h主机名 -P端口号 】-u用户名 -p密码</code></p>
<p>退出：<br>        <code>exit或ctrl+C</code></p>
<h2 id="六、MySQL的常用命令"><a href="#六、MySQL的常用命令" class="headerlink" title="六、MySQL的常用命令"></a><strong>六、MySQL的常用命令</strong></h2><p>1.查看当前所有的数据库<br>        <code>show databases;</code><br>        2.打开指定的库<br>        <code>use 库名</code><br>        3.查看当前库的所有表<br>        <code>show tables;</code><br>        4.查看其它库的所有表<br>        <code>show tables from 库名;</code><br>        5.创建表</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">create table 表名(</span><br><span class="line"></span><br><span class="line">	列名 列类型,</span><br><span class="line">	列名 列类型，</span><br><span class="line">	。。。</span><br><span class="line">);</span><br></pre></td></tr></tbody></table></figure>

<p>6.查看表结构<br>        <code>desc 表名;</code></p>
<p>7.查看服务器的版本<br>        方式一：登录到mysql服务端<br>        <code>select version();</code><br>        方式二：没有登录到mysql服务端（在cmd控制台上输入）<br>        <code>mysql --version</code><br>        或<br>        <code>mysql --V</code></p>
<h2 id="七、MySQL的语法规范"><a href="#七、MySQL的语法规范" class="headerlink" title="七、MySQL的语法规范"></a><strong>七、MySQL的语法规范</strong></h2><p>1.不区分大小写,但建议关键字大写，表名、列名小写<br>        2.每条命令最好用分号结尾<br>        3.每条命令根据需要，可以进行缩进或换行<br>        4.注释</p>
<pre><code>单行注释：`#注释文字`

单行注释：`-- 注释文字`

多行注释：`/* 注释文字  */`
</code></pre>
<h2 id="八、SQL的语言分类"><a href="#八、SQL的语言分类" class="headerlink" title="八、SQL的语言分类"></a><strong>八、SQL的语言分类</strong></h2><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">DQL（Data Query Language）：数据查询语言</span><br><span class="line">	select </span><br><span class="line">DML(Data Manipulate Language):数据操作语言</span><br><span class="line">	insert 、update、delete</span><br><span class="line">DDL（Data Define Languge）：数据定义语言</span><br><span class="line">	create、drop、alter</span><br><span class="line">TCL（Transaction Control Language）：事务控制语言</span><br><span class="line">	commit、rollback</span><br></pre></td></tr></tbody></table></figure>

<h2 id="九、DQL语言的学习"><a href="#九、DQL语言的学习" class="headerlink" title="九、DQL语言的学习"></a><strong>九、DQL语言的学习</strong></h2><h3 id="基础查询"><a href="#基础查询" class="headerlink" title="基础查询"></a><strong>基础查询</strong></h3><p><strong>语法：</strong></p>
<p><code>SELECT 查询列表 FROM 表名;</code></p>
<p><strong>注意：</strong></p>
<ul>
<li>查询列表可以是：表中的字段、常量值、表达式、函数。</li>
<li>查询的结果是一个虚拟的表格。</li>
<li>常量值可以用<strong>单引号双引号</strong>引上，<strong>字段值</strong>可以用(键盘上数字1左边那个键的符号引上)，注意二者区别。一般情况下可以不用引，当字段与关键字重名或者是特殊符号时引上比较好。</li>
</ul>
<p><strong>举例：</strong></p>
<p><strong>1.查询表中的单个字段</strong></p>
<p><code>SELECT last_name FROM employees;</code></p>
<p><strong>2.查询表中的多个字段</strong></p>
<p><code>SELECT last_name, salary, email FROM employees;</code></p>
<p><strong>3.查询表中的所有字段</strong></p>
<p><code>SELECT * FROM employees;</code></p>
<p><strong>4.查询常量值</strong></p>
<p><code>SELECT 100;</code></p>
<p><code>SELECT 'john';</code></p>
<p><strong>5.查询表达式</strong></p>
<p><code>SELECT 100%98;</code></p>
<p><strong>6.查询函数</strong></p>
<p><code>SELECT VERSION();</code></p>
<p><strong>7.起别名</strong></p>
<p><strong>方式一：</strong></p>
<p><code>SELECT 100%98 as 结果;</code></p>
<p><code>SELECT last_name AS 姓,first_name AS 名 FROM employees;</code></p>
<p><strong>起别名好处：</strong></p>
<ul>
<li>便于理解。</li>
<li>如果要查询的字段有重名的情况，可以使用别名区别开来。</li>
</ul>
<p><strong>方式二：</strong></p>
<p><code>SELECT last_name 姓,first_name 名 FROM employees;</code></p>
<p><strong>8.去重</strong></p>
<p>案例：查询员工表中涉及到的所有部门编号。</p>
<p><code>SELECT DISTINCT department_id FROM employees;</code></p>
<p><strong>9.+号的作用</strong></p>
<p>注意mysql中+号只有一个功能，充当运算符，不能连接字符串。</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">select 100+90;如果两个操作数均为数值型，则做加法运算。</span><br><span class="line">select '123' + 90;	若其中一方为字符型，则试图将字符型数值转化成数值型</span><br><span class="line">						如果转换成功，则继续做加法运算；</span><br><span class="line">						否则，则将字符型转换成0</span><br><span class="line">//select '123'+90的结果为213</span><br><span class="line">select 'john'+90;		//结果为90</span><br><span class="line"></span><br><span class="line">select null+10;			只要其中一方为null，则结果肯定为null</span><br></pre></td></tr></tbody></table></figure>

<p><strong>案例：查询员工<code>名</code>和<code>姓</code>连接成一个字段，并显示为 <code>姓名</code>。</strong></p>
<p>既然+号不能起到连接字段的作用，我们可以利用<code>concat</code>函数：</p>
<p><code>SELECT CONCAT(last_name,first_name) AS 姓名 FROM employees;</code></p>
<p>括号内的参数可以为多个。</p>
<p><strong>10.concat函数</strong></p>
<p>功能：拼接字符</p>
<p><code>select concat(字符1，字符2，字符3，...);</code></p>
<p><strong>11.ifnull函数</strong></p>
<p>功能：判断某字段是否为null，如果为null返回指定的值，否则返回原来的值。</p>
<p><code>select ifnull(commission_pct,0) from employees;</code></p>
<p><strong>12.isnull函数</strong></p>
<p>功能：判断该字段或表达式的值是否为null，是返回1，否则返回0</p>
<h3 id="条件查询"><a href="#条件查询" class="headerlink" title="条件查询"></a>条件查询</h3><p><strong>语法：</strong></p>
<p><code>select 查询列表 from 表名 where 条件;</code></p>
<p><strong>条件的分类：</strong></p>
<ul>
<li>条件表达式<ul>
<li>示例：<code>salary&gt;10000</code></li>
<li>条件运算符：<code>&gt; &lt;  &gt;=  &lt;=  =  !=</code></li>
</ul>
</li>
<li>逻辑表达式<ul>
<li>示例：salary&gt;10000 &amp;&amp; salary&lt;20000</li>
<li>逻辑运算符：<ul>
<li>and（&amp;&amp;）:两个条件如果同时成立，结果为true，否则为false；</li>
<li>or(||)：两个条件只要有一个成立，结果为true，否则为false；</li>
<li>not(!)：如果条件成立，则not后为false，否则为true；</li>
</ul>
</li>
</ul>
</li>
<li>模糊查询<ul>
<li>运算符<ul>
<li>like<ul>
<li>一般和通配符搭配使用。</li>
<li>通配符有：<ul>
<li><code>%</code>	  表示任意多个字符，包含0个字符</li>
<li><code>_</code>      表示任意单个字符</li>
</ul>
</li>
</ul>
</li>
<li>between and <ul>
<li>注意它包含临界值</li>
<li>两个临界值不要随意调换顺序</li>
</ul>
</li>
<li>in<ul>
<li>用于判断某字段的值是否属于in列表中的某一项</li>
<li>in列表的值类型必须统一或兼容,比如’123’可以转换成123</li>
<li>不支持通配符</li>
</ul>
</li>
<li>is null<ul>
<li><code>=</code>或者<code>&lt;&gt;</code>不能用于判断null值</li>
<li>is null或is not null可以判断null值</li>
</ul>
</li>
</ul>
</li>
<li><strong>实例：</strong><ul>
<li>查询员工名中包含字符a的员工信息<ul>
<li><code>SELECT * FROM employees WHERE last_name LIKE '%a%';</code></li>
</ul>
</li>
<li>查询员工名中第三个字符为e,第五个字符为a的员工名和工资(第几个就在前面画几个下划线，注意不要忘记末尾要加个百分号，表示后面还有0个或多个字符)<ul>
<li><code>SELECT last_name, salary FROM employees WHERE last_name LIKE '__n_l%';</code></li>
</ul>
</li>
<li>查询员工名中第二个字符为<code>_</code>的员工名(由于通配符中有下划线，这就需要用到转义字符或者用escape说明，比如下面那个说明<code>$</code>符后面的下划线不作为通配符)<ul>
<li><code>SELECT * FROM employees WHERE last_name LIKE '_\_%';</code></li>
<li><code>SELECT * FROM employees WHERE last_name LIKE '_$_%' ESCAPE '$';</code>   <strong>（推荐使用第二种方法）</strong></li>
</ul>
</li>
<li>查询员工编号在100到120之间的员工信息<ul>
<li><code>SELECT * FROM employees WHERE employee_id BETWEEN 100 AND 120</code></li>
</ul>
</li>
<li>查询员工的工种编号是<code>IT_PROG、AD_VP、AD_PRES</code>中的员工名和工种编号<ul>
<li><code>SELECT last_name, job_id FROM employees WHERE job_id IN ('IT_PROG','AD_VP','AD_PRES');</code></li>
</ul>
</li>
<li>查询没有奖金的员工名和奖金率<ul>
<li><code>SELECT last_name, commission_pct FROM employees WHERE commission_pct IS NULL;</code></li>
</ul>
</li>
<li>查询有奖金的员工名和奖金率<ul>
<li><code>SELECT last_name, commission_pct FROM employees WHERE commission_pct IS NOT NULL;</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><strong>安全等于</strong>  <code>&lt;=&gt;</code></p>
<ul>
<li>比如<ul>
<li><code>SELECT last_name, commission_pct FROM employees WHERE commission_pct &lt;=&gt; NULL;</code></li>
<li><code>SELECT last_name, commission_pct FROM employees WHERE salary &lt;=&gt; 12000;</code></li>
</ul>
</li>
<li>不过它用的较少，可读性差</li>
</ul>
<p><code>is null</code> <strong>与</strong> <code>&lt;=&gt;</code><strong>的比较：</strong></p>
<ul>
<li><code>is null</code>:仅仅可以判断NULL值。可读性较高。</li>
<li><code>&lt;=&gt;</code>    :该可以判断NULL值，又可以判断普通的数值。可读性较低</li>
</ul>
<p><strong>阶段测试：</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">查询员工号为176的员工的姓名和部门号和年薪：</span><br><span class="line">SELECT last_name,department_id,salary*12*(1+IFNULL(commission_pct, 0)) AS 年薪 FROM employees;</span><br></pre></td></tr></tbody></table></figure>

<h3 id="排序查询"><a href="#排序查询" class="headerlink" title="排序查询"></a>排序查询</h3><p><strong>语法：</strong></p>
<ul>
<li><code>select 查询列表 from 表名 【where 筛选条件】 order by 排序列表 【asc | desc】;</code></li>
<li>注意上面的asc表示升序，desc表示降序。如果不写，默认是升序，不过前提是你写了 <code>order by</code>。</li>
<li>order by子句中可以支持单个字段、多个字段、表达式、函数、别名。</li>
<li>order by子句一般放在查询语句的最后面，不过limit子句除外。</li>
</ul>
<p><strong>案例：</strong></p>
<p><strong>1.查询员工信息，要求工资从高到低排序。</strong></p>
<p><code>SELECT * FROM employees ORDER BY salary DESC;</code></p>
<p><strong>2.查询部门编号&gt;=90的员工信息，要求按入职时间的先后进行排序。</strong></p>
<p><code>SELECT * FROM employees WHERE department_id &gt;= 90 ORDER BY hiredate ASC;</code></p>
<p><strong>3.【按表达式排序】按年薪的高低显示员工的信息和年薪。</strong></p>
<p><code>SELECT *,salary*12*(1+IFNULL(commission_pct,0)) 年薪 FROM employees ORDER BY salary*12*(1+IFNULL(commission_pct,0)) DESC;</code></p>
<p><strong>4.【按别名排序】按年薪的高低显示员工的信息和年薪。</strong></p>
<p><code>SELECT *,salary*12*(1+IFNULL(commission_pct,0)) 年薪 FROM employees ORDER BY 年薪 DESC;</code></p>
<p><strong>5.按姓名的长度显示员工的员工和工资【按函数排序】</strong></p>
<p><code>SELECT LENGTH(last_name)字节长度,last_name,salary FROM employees ORDER BY 字节长度 DESC;</code></p>
<p><strong>6.查询员工信息，要求先按工资升序排序，如果一样的话再按员工编号降序排序【按多个字段排序】</strong></p>
<p><code>SELECT * FROM employees ORDER BY salary ASC,employee_id DESC;</code></p>
<h3 id="常见函数"><a href="#常见函数" class="headerlink" title="常见函数"></a>常见函数</h3><h4 id="单行函数"><a href="#单行函数" class="headerlink" title="单行函数"></a>单行函数</h4><h5 id="1-字符函数"><a href="#1-字符函数" class="headerlink" title="1.字符函数"></a>1.字符函数</h5><p><strong>(1)length</strong>：获取参数值的字节个数</p>
<p><code>SELECT LENGTH('john');</code></p>
<p><strong>(2)concat</strong>：拼接字符串</p>
<p><code>SELECT CONCAT(last_name,'_',first_name) FROM employees;</code></p>
<p><strong>(3)upper、lower</strong></p>
<p>小案例：将表中姓大写，名小写，然后拼接。</p>
<p><code>SELECT CONCAT(UPPER(last_name),LOWER(first_name)) 姓名 FROM employees;</code></p>
<p><strong>(4)substr、substring</strong></p>
<p><strong>注意：索引从1开始。</strong></p>
<p><strong>截取从指定索引处后面的所有字符：</strong></p>
<p><code>SELECT SUBSTR('李莫愁爱上了陆展元',7) out_put;</code></p>
<p><strong>截取从指定索引处指定字符长度的字符：</strong></p>
<p><code>SELECT SUBSTR('李莫愁爱上了陆展元',1,3) out_put;</code></p>
<p>小案例：</p>
<p>将姓名中首字符大写，其他字符小写然后用_拼接，显示出来。</p>
<p><code>SELECT CONCAT(UPPER(SUBSTR(last_name,1,1)),'_',LOWER(SUBSTR(last_name,2))) out_put FROM employees;</code></p>
<p><strong>(5)instr：返回子串第一次出现的索引，如果找不到则返回0</strong></p>
<p><code>SELECT INSTR('杨不悔爱上了殷六侠','殷八侠') AS out_put ;</code></p>
<p><strong>(6)trim</strong></p>
<p><code>SELECT LENGTH(TRIM('      张存山         ')) AS out_put;</code></p>
<p><code>SELECT TRIM('a' FROM 'aaa张aaaaaa翠aaaaaaaa山') out_put;</code></p>
<p><strong>(7)lpad</strong> ：用指定的字符实现左填充指定长度</p>
<p><code>SELECT LPAD('因素是',10,'*') AS out_put;</code></p>
<p><strong>(8)rpad</strong>：用指定的字符实现右填充指定长度</p>
<p><code>SELECT RPAD('订单',12,'abb') AS out_put;</code></p>
<p><strong>(9)replace</strong></p>
<p><code>SELECT REPLACE('张无忌爱上了周芷若周芷若周芷若周芷若','周芷若','赵敏')AS out_put;</code></p>
<h5 id="2-数学函数"><a href="#2-数学函数" class="headerlink" title="2.数学函数"></a>2.数学函数</h5><p><strong>(1)round</strong>：	四舍五入</p>
<p><code>SELECT ROUND(1.65);</code></p>
<p><code>SELECT ROUND(1.567,2);</code></p>
<p><strong>(2)ceil</strong>：	向上取整</p>
<p><code>SELECT CEIL(1.52);</code></p>
<p><strong>(3)floor</strong>：向下取整</p>
<p><code>SELECT FLOOR(9.99);</code></p>
<p><strong>(4)truncate</strong>：截断</p>
<p><code>SELECT TRUNCATE(1.69,1);</code></p>
<p><strong>(5)mod</strong>：取余</p>
<p><code>SELECT MOD(-10,-3);</code></p>
<h5 id="3-日期函数"><a href="#3-日期函数" class="headerlink" title="3.日期函数"></a>3.日期函数</h5><p><strong>(1)now</strong>：返回当前系统日期</p>
<p><code>SELECT NOW();</code></p>
<p><strong>(2)curdate</strong>：返回当前系统日期，不包含时间</p>
<p><code>SELECT CURDATE();</code></p>
<p><strong>(3)curtime</strong>：返回当前时间，不包含日期</p>
<p><code>SELECT CURTIME();</code></p>
<p>(4)获取指定的部分，年、月、日、小时、分钟、秒。</p>
<p><code>SELECT YEAR(NOW()) 年;</code></p>
<p><code>SELECT MONTH(NOW()) 月;</code></p>
<p><code>SELECT MONTHNAME(NOW()) 月;</code></p>
<p>举个例子：获取employees表中的时间中的年。</p>
<p><code>SELECT YEAR(hiredate) 年 FROM employees;</code></p>
<p><strong>(5)str_to_date</strong>：将字符通过指定的格式转换成日期。</p>
<p><strong>语法：</strong></p>
<p>前一个为日期字符串，后一个为日期格式，日期格式可以从下列表中挑选。</p>
<p>举个例子：</p>
<p><code>SELECT STR_TO_DATE('1998-3-2','%Y-%c-%d') AS out_put;</code></p>
<p>小案例:查询入职日期为<code>4-3 1992</code>的员工信息</p>
<p><code>SELECT * FROM employees WHERE hiredate = STR_TO_DATE('4-3 1992', '%c-%d %Y');</code></p>
<p><strong>(6)date_format</strong>：将日期转换成字符</p>
<p><code>SELECT DATE_FORMAT(NOW(),'%y年%m月%d日') AS out_put;</code></p>
<p>小案例：查询有奖金的员工名和入职日期(xx月/xx日   xx年)</p>
<p><code>SELECT last_name,DATE_FORMAT(hiredate,'%m月/%d日 %y年') FROM employees WHERE commission_pct IS NOT NULL;</code> </p>
<h5 id="4-流程控制函数"><a href="#4-流程控制函数" class="headerlink" title="4.流程控制函数"></a>4.流程控制函数</h5><p><strong>(1)if函数</strong>：if else的效果</p>
<p><code>SELECT IF(10&gt;5, '大', '小');</code></p>
<p><code>SELECT last_name, commission_pct,IF(commission_pct IS NULL, '没奖金','有奖金') 备注 FROM employees;</code></p>
<p><strong>(2)case函数的使用一</strong>：switch case的效果</p>
<p><strong>语法：</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">case 要判断的字段或表达式</span><br><span class="line">when 常量1 then 要显示的值1或语句1			//注意：如果要显示语句，则需要在语句后面加分号</span><br><span class="line">when 常量2 then 要显示的值2或语句2</span><br><span class="line">...</span><br><span class="line">else 要显示的值n或语句n</span><br><span class="line">end</span><br></pre></td></tr></tbody></table></figure>

<p><strong>案例:</strong></p>
<p>查询员工的工资，要求</p>
<p>部门号=30，显示的工资为1.1倍；</p>
<p>部门号=40，显示的工资为1.2倍；</p>
<p>部门号=50，显示的工资为1.3倍；</p>
<p>其他部门，显示的工资为原工资。</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">SELECT salary 原始工资,department_id, </span><br><span class="line">CASE department_id</span><br><span class="line">WHEN 30 THEN salary*1.1</span><br><span class="line">WHEN 40 THEN salary*1.2</span><br><span class="line">WHEN 50 THEN salary*1.3</span><br><span class="line">ELSE salary</span><br><span class="line">END AS 新工资</span><br><span class="line">FROM employees;</span><br></pre></td></tr></tbody></table></figure>

<p><strong>(3)case函数的使用二</strong>：类似 多重if</p>
<p><strong>语法：</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">case</span><br><span class="line">when 条件1 then 显示的值1或语句1					//注意：如果要显示语句，则需要在语句后面加分号</span><br><span class="line">when 条件2 then 要显示的值2或语句2</span><br><span class="line">...</span><br><span class="line">else 要显示的值n或语句n</span><br><span class="line">end</span><br></pre></td></tr></tbody></table></figure>

<p><strong>案例：</strong></p>
<p>查询员工的工资的情况，</p>
<p>如果工资&gt;20000，显示A级别；</p>
<p>如果工资&gt;15000，显示B级别;</p>
<p>如果工资&gt;10000，显示C级别;</p>
<p>否则，显示D级别;</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">SELECT salary,</span><br><span class="line">CASE</span><br><span class="line">WHEN salary &gt; 20000 THEN 'A'</span><br><span class="line">WHEN salary &gt; 15000 THEN 'B'</span><br><span class="line">WHEN salary &gt; 10000 THEN 'C'</span><br><span class="line">ELSE 'D'</span><br><span class="line">END AS 工资级别</span><br><span class="line">FROM employees;</span><br></pre></td></tr></tbody></table></figure>

<h4 id="分组函数"><a href="#分组函数" class="headerlink" title="分组函数"></a>分组函数</h4><p><strong>功能</strong>：用作统计使用，又称为聚合函数或统计函数或组函数。</p>
<p><strong>分类</strong>：</p>
<ul>
<li>sum	求和</li>
<li>avg	平均值</li>
<li>max	最大值</li>
<li>min	最小值</li>
<li>count	计算个数。</li>
</ul>
<p><strong>简单使用：</strong></p>
<p><code>SELECT SUM(salary) FROM employees;</code></p>
<p><code>SELECT AVG(salary) FROM employees;</code></p>
<p><code>SELECT COUNT(salary) FROM employees;</code></p>
<p><code>SELECT SUM(salary)和,AVG(salary)平均,MAX(salary)最高,MIN(salary)最低,COUNT(salary)个数 FROM employees;</code></p>
<p><strong>特点：</strong></p>
<ul>
<li>sum和avg一般用于处理数值型</li>
<li>max、min、count可以处理任何数据类型</li>
<li>count的参数可以支持：字段、<code>*</code>、【常量值，一般放1】，不过建议使用<code>count(*)</code><ul>
<li><code>SELECT COUNT(*) FROM employees;</code></li>
<li>查询部门编号为90的员工个数<ul>
<li><code>SELECT COUNT(*) FROM employees WHERE department_id = 90;</code></li>
</ul>
</li>
</ul>
</li>
<li>它们都忽略null值</li>
<li>可以和distinct搭配实现去重的运算<ul>
<li><code>SELECT SUM(DISTINCT salary),SUM(salary) FROM employees;</code></li>
<li><code>SELECT COUNT(DISTINCT salary), COUNT(salary) FROM employees;</code></li>
</ul>
</li>
<li>和分组函数一同查询的字段要求是group by后的字段。</li>
</ul>
<h3 id="分组查询"><a href="#分组查询" class="headerlink" title="分组查询"></a>分组查询</h3><p><strong>语法：</strong></p>
<p><code>select 分组函数,列(要求出现在group by的后面) from 表 【where 筛选条件】group by 分组的列表 【order by子句】</code></p>
<p><strong>注意：</strong></p>
<p>查询列表必须特殊，要求是分组函数和group by后出现的字段</p>
<p><strong>简单的分组查询：</strong></p>
<ul>
<li>案例1：查询每个工种的最高工资。<ul>
<li><code>SELECT MAX(salary),job_id FROM employees GROUP BY job_id;</code></li>
</ul>
</li>
<li>案例2：查询每个位置上的部门个数。<ul>
<li><code>SELECT COUNT(*),location_id FROM departments GROUP BY location_id;</code></li>
</ul>
</li>
</ul>
<p><strong>【进阶】添加分组前的筛选条件：</strong></p>
<ul>
<li>案例1：查询邮箱中包含a字符的，每个部门的平均工资。<ul>
<li><code>SELECT AVG(salary),department_id FROM employees WHERE email LIKE '%a%' GROUP BY department_id;</code></li>
</ul>
</li>
<li>案例2：查询有奖金的每个领导手下员工的最高工资。<ul>
<li><code>SELECT MAX(salary),manager_id FROM employees WHERE commission_pct IS NOT NULL GROUP BY manager_id;</code></li>
</ul>
</li>
</ul>
<p><strong>【再进阶】添加分组后的筛选条件(用到了HAVING)</strong></p>
<ul>
<li><p>案例1：查询哪个部门的员工个数<code>&gt;2</code>。</p>
<ul>
<li><code>SELECT COUNT(*),department_id FROM employees GROUP BY department_id HAVING COUNT(*)&gt;2;</code></li>
</ul>
</li>
<li><p>案例2：查询每个工种有奖金的员工的最高工资&gt;12000的工种编号和最高工资。</p>
<ul>
<li>思路<ul>
<li>①查询每个工种有奖金的的员工的最高工资；</li>
<li>②根据①的结果继续筛选，最高工资&gt;12000</li>
</ul>
</li>
<li><code>SELECT MAX(salary),job_id FROM employees WHERE commission_pct IS NOT NULL GROUP BY job_id HAVING MAX(salary)&gt;12000;</code></li>
</ul>
</li>
<li><p>案例3：查询领导编号&gt;102的每个领导手下的最低工资&gt;5000的领导编号是哪个，以及其最低工资。</p>
<ul>
<li><pre><code class="mysql">SELECT MIN(salary),manager_id
FROM employees 
WHERE manager_id &gt; 102
GROUP BY manager_id
HAVING MIN(salary)&gt;5000;
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">**按表达式或函数分组**</span><br><span class="line"></span><br><span class="line">- 案例：按员工姓名的长度分组，查询每一组的员工个数，筛选员工个数&gt;5的有哪些。</span><br><span class="line"></span><br><span class="line">  - ①查询每个长度的员工个数</span><br><span class="line"></span><br><span class="line">    - ```mysql</span><br><span class="line">      SELECT COUNT(*),LENGTH(last_name) len_name</span><br><span class="line">      FROM employees</span><br><span class="line">      GROUP BY LENGTH(last_name);</span><br></pre></td></tr></tbody></table></figure>
</code></pre>
</li>
<li><p>②添加筛选条件</p>
<ul>
<li><pre><code class="mysql">SELECT COUNT(*),LENGTH(last_name) len_name
FROM employees
GROUP BY LENGTH(last_name)
HAVING COUNT(*)&gt;5;

-- 或者这样写：

SELECT COUNT(*) cnt,LENGTH(last_name) len_name
FROM employees
GROUP BY len_name
HAVING cnt&gt;5;

-- 发现group by支持别名,按where不支持
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">**按多个字段进行分组**</span><br><span class="line"></span><br><span class="line">- 案例：查询每个部门每个工种的员工的平均工资。</span><br><span class="line"></span><br><span class="line">  - ```mysql</span><br><span class="line">    SELECT AVG(salary),department_id,job_id</span><br><span class="line">    FROM employees</span><br><span class="line">    GROUP BY department_id, job_id;</span><br></pre></td></tr></tbody></table></figure>
</code></pre>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><strong>添加排序</strong></p>
<ul>
<li><p>案例：查询每个部门每个工种的员工的平均工资，并且按平均工资的高低显示。</p>
<ul>
<li><pre><code class="mysql">SELECT AVG(salary),department_id,job_id
FROM employees
GROUP BY department_id, job_id
ORDER BY AVG(salary) DESC;
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">**特点：**</span><br><span class="line"></span><br><span class="line">- 分组查询中的筛选条件分为两类</span><br><span class="line">  - 分组前筛选：其筛选源是原始表，放在group  by子句的前面，用到了where关键字。</span><br><span class="line">  - 分组后筛选：其筛选表是分组后的结果集合，放在group by子句的后面，用到了having关键字。</span><br><span class="line">- 分组函数做条件时肯定是放在having子句后面</span><br><span class="line">- 能用分组前筛选的，就优先考虑分组前筛选</span><br><span class="line">- group by子句支持单个字段分组，多个字段分组（多个字段之间用逗号隔开，没有顺序要求)</span><br><span class="line">- 也可以添加排序(排序放在整个分组查询的最后)</span><br><span class="line"></span><br><span class="line">### 连接查询</span><br><span class="line"></span><br><span class="line">**含义：**</span><br><span class="line"></span><br><span class="line">又成为多表查询，当查询的字段来自多个表时，就会用到连接查询。</span><br><span class="line"></span><br><span class="line">**分类【按年代分类】：**</span><br><span class="line"></span><br><span class="line">- sql92标准：仅仅支持内连接</span><br><span class="line">- sql99标准：支持内连接+外连接(左外和右外)+交叉连接</span><br><span class="line"></span><br><span class="line">**分类【按功能分类】：**</span><br><span class="line"></span><br><span class="line">- 内连接</span><br><span class="line">  - 等值连接</span><br><span class="line">  - 非等值连接</span><br><span class="line">  - 自连接</span><br><span class="line">- 外连接</span><br><span class="line">  - 左外连接</span><br><span class="line">  - 右外连接</span><br><span class="line">  - 全外连接</span><br><span class="line">- 交叉连接</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#### sql92标准</span><br><span class="line"></span><br><span class="line">##### 1.等值连接</span><br><span class="line"></span><br><span class="line">**案例1**：查询女神名和对应的男神名。</span><br><span class="line"></span><br><span class="line">```sql</span><br><span class="line">SELECT NAME,boyName </span><br><span class="line">FROM boys, beauty</span><br><span class="line">WHERE beauty.`boyfriend_id`=boys.id;</span><br></pre></td></tr></tbody></table></figure>
</code></pre>
</li>
</ul>
</li>
</ul>
<p><strong>案例2</strong>：查询员工名和对应的部门名。</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> last_name, department_name</span><br><span class="line"><span class="keyword">FROM</span> employees, departments</span><br><span class="line"><span class="keyword">WHERE</span> employees.`department_id`<span class="operator">=</span>departments.`department_id`;</span><br></pre></td></tr></tbody></table></figure>

<p><strong>案例3：</strong>查询员工名、工种号、工种名。</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 当emplyees,jobs表中都有job_id字段时，需要指明它来自哪个表，否则会执行错误。</span></span><br><span class="line"><span class="keyword">SELECT</span> last_name, employees.job_id, job_title</span><br><span class="line"><span class="keyword">FROM</span> employees,jobs</span><br><span class="line"><span class="keyword">WHERE</span> employees.`job_id`<span class="operator">=</span>jobs.`job_id`;</span><br></pre></td></tr></tbody></table></figure>

<p>我们也可以给表起别名，用不用as都可以，如下：</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- as可省略</span></span><br><span class="line"><span class="keyword">SELECT</span> last_name, e.job_id, job_title</span><br><span class="line"><span class="keyword">FROM</span> employees <span class="keyword">AS</span> e,jobs <span class="keyword">AS</span> j</span><br><span class="line"><span class="keyword">WHERE</span> e.`job_id`<span class="operator">=</span>j.`job_id`;</span><br></pre></td></tr></tbody></table></figure>

<p><strong>注意</strong>：==如果为表起了别名，则查询的字段不能使用原来的表名去限定。==</p>
<p><strong>案例4</strong>：查询有奖金的员工名、部门名。</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> last_name,department_name,commission_pct</span><br><span class="line"><span class="keyword">FROM</span> employees e,departments d</span><br><span class="line"><span class="keyword">WHERE</span> e.`department_id`<span class="operator">=</span>d.`department_id`</span><br><span class="line"><span class="keyword">AND</span> e.`commission_pct` <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>;</span><br></pre></td></tr></tbody></table></figure>

<p><strong>案例5</strong>：查询城市中第二个字符为o的部门名和城市名。</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> department_name,city</span><br><span class="line"><span class="keyword">FROM</span> departments d,locations l</span><br><span class="line"><span class="keyword">WHERE</span> d.`location_id`<span class="operator">=</span>l.`location_id`</span><br><span class="line"><span class="keyword">AND</span> l.`city` <span class="keyword">LIKE</span> <span class="string">'_o%'</span>;</span><br></pre></td></tr></tbody></table></figure>

<p><strong>案例6</strong>：查询每个城市的部门个数。</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> city,<span class="built_in">COUNT</span>(<span class="operator">*</span>) 个数</span><br><span class="line"><span class="keyword">FROM</span> locations l, departments d</span><br><span class="line"><span class="keyword">WHERE</span> l.`location_id`<span class="operator">=</span>d.`location_id`</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> city;</span><br></pre></td></tr></tbody></table></figure>

<p>**==案例7==**：查询有奖金的每个部门的部门名和部门的领导编号和该部门的最低工资。</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> department_name,e.manager_id,<span class="built_in">MIN</span>(salary)</span><br><span class="line"><span class="keyword">FROM</span> employees e, departments d</span><br><span class="line"><span class="keyword">WHERE</span> e.`department_id`<span class="operator">=</span>d.`department_id`</span><br><span class="line"><span class="keyword">AND</span> e.`commission_pct` <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span></span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> d.`department_name`, d.`manager_id`;</span><br></pre></td></tr></tbody></table></figure>

<p>**==案例8==**：查询每个工种的工种名和员工的个数，并且按员工个数降序。</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> job_title,<span class="built_in">COUNT</span>(<span class="operator">*</span>)</span><br><span class="line"><span class="keyword">FROM</span> employees e, jobs j</span><br><span class="line"><span class="keyword">WHERE</span> e.`job_id`<span class="operator">=</span>j.`job_id`</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> j.`job_title`</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">DESC</span>;</span><br></pre></td></tr></tbody></table></figure>

<p><strong>案例9</strong>：查询员工名、部门名和所在的城市。</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> last_name,department_name,city</span><br><span class="line"><span class="keyword">FROM</span> employees e, departments d, locations l</span><br><span class="line"><span class="keyword">WHERE</span> e.`department_id`<span class="operator">=</span>d.`department_id`</span><br><span class="line"><span class="keyword">AND</span> d.`location_id`<span class="operator">=</span>l.`location_id`;</span><br></pre></td></tr></tbody></table></figure>

<p><strong>==总结一下等值连接的特点：==</strong></p>
<ul>
<li>多表等值连接的结果为多表的交集部分；</li>
<li>n表连接，至少需要n-1个连接条件；</li>
<li>多表的顺序没有要求；</li>
<li>一般需要为表起别名；</li>
<li>可以搭配前面介绍的所有子句，比如排序、分组、筛选。</li>
</ul>
<h5 id="2-非等值连接"><a href="#2-非等值连接" class="headerlink" title="2.非等值连接"></a>2.非等值连接</h5><p><strong>案例</strong>：查询员工的工资和工资级别。</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> salary,grade_level</span><br><span class="line"><span class="keyword">FROM</span> employees e, job_grades g</span><br><span class="line"><span class="keyword">WHERE</span> salary <span class="keyword">BETWEEN</span> g.`lowest_sal` <span class="keyword">AND</span> g.`highest_sal`;</span><br></pre></td></tr></tbody></table></figure>

<h5 id="3-自连接"><a href="#3-自连接" class="headerlink" title="3.自连接"></a>3.自连接</h5><p><strong>案例</strong>：查询员工名和上级的名字。</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 可以把employees看成两个表e, m，e是员工表，m是上级表。</span></span><br><span class="line"><span class="keyword">SELECT</span> e.employee_id ,e.last_name,m.employee_id,m.last_name</span><br><span class="line"><span class="keyword">FROM</span> employees e, employees m</span><br><span class="line"><span class="keyword">WHERE</span> e.manager_id <span class="operator">=</span> m.employee_id;</span><br></pre></td></tr></tbody></table></figure>



<h4 id="sql99标准"><a href="#sql99标准" class="headerlink" title="sql99标准"></a>sql99标准</h4><h5 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h5><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">select 字段，...</span><br><span class="line">from 表1 别名</span><br><span class="line">【inner|left outer|right outer|cross】join 表2 别名 on  连接条件</span><br><span class="line">【inner|left outer|right outer|cross】join 表3 on  连接条件</span><br><span class="line">【where 筛选条件】</span><br><span class="line">【group by 分组字段】</span><br><span class="line">【having 分组后的筛选条件】</span><br><span class="line">【order by 排序的字段或表达式】</span><br></pre></td></tr></tbody></table></figure>

<h5 id="分类"><a href="#分类" class="headerlink" title="分类"></a>分类</h5><ul>
<li>内连接：inner<ul>
<li>等值连接</li>
<li>非等值连接</li>
<li>自连接</li>
</ul>
</li>
<li>外连接<ul>
<li>左外：left 【outer】</li>
<li>右外：right【outer】</li>
<li>全外：full【outer】</li>
</ul>
</li>
<li>交叉连接：cross</li>
</ul>
<h5 id="内连接"><a href="#内连接" class="headerlink" title="内连接"></a>内连接</h5><h6 id="语法-1"><a href="#语法-1" class="headerlink" title="语法"></a>语法</h6><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">select 查询列表</span><br><span class="line">from 表1 别名</span><br><span class="line">inner join 表2 别名</span><br><span class="line">on 连接条件;</span><br></pre></td></tr></tbody></table></figure>

<h6 id="1-等值连接"><a href="#1-等值连接" class="headerlink" title="1.等值连接"></a>1.等值连接</h6><p><strong>特点</strong>：</p>
<ul>
<li>可以添加排序、分组、筛选；</li>
<li>inner可以省略；</li>
<li>筛选条件放在where后面，连接条件放在on后面，提高分离性，便于阅读；</li>
<li>inner join连接和sql92语法中的等值连接效果是一样的，都是查询多表的交集。</li>
</ul>
<p><strong>案例1</strong>：查询员工名、部门名</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> last_name,department_name</span><br><span class="line"><span class="keyword">FROM</span> employees e</span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> departments d</span><br><span class="line"><span class="keyword">ON</span> e.`department_id`<span class="operator">=</span>d.`department_id`;</span><br></pre></td></tr></tbody></table></figure>

<p><strong>案例2</strong>：查询员工名和对应的部门名。（筛选）</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> last_name,job_title</span><br><span class="line"><span class="keyword">FROM</span> employees e</span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> jobs j</span><br><span class="line"><span class="keyword">ON</span> e.`job_id`<span class="operator">=</span>j.`job_id`</span><br><span class="line"><span class="keyword">WHERE</span> e.`last_name` <span class="keyword">LIKE</span> <span class="string">'%e%'</span>;</span><br></pre></td></tr></tbody></table></figure>

<p><strong>案例3：</strong>查询部门个数&gt;3的城市名和部门个数。（添加分组+筛选）</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 根据要求，查询部门个数&gt;3的城市名和部门个数，也就是说先按照城市名进行分组，然后再用部门个数&gt;3这个条件进行筛选（这就用到了having）</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> city,<span class="built_in">COUNT</span>(<span class="operator">*</span>) 部门个数</span><br><span class="line"><span class="keyword">FROM</span> departments d</span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> locations l</span><br><span class="line"><span class="keyword">ON</span> d.`location_id`<span class="operator">=</span>l.`location_id`</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> city</span><br><span class="line"><span class="keyword">HAVING</span> <span class="built_in">COUNT</span>(<span class="operator">*</span>)<span class="operator">&gt;</span><span class="number">3</span>;</span><br></pre></td></tr></tbody></table></figure>

<p><strong>案例4</strong>：查询部门的员工个数&gt;3的部门名和员工个数，并按个数降序。（添加排序）</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- ①查询每个部门的员工个数</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(<span class="operator">*</span>),department_name</span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> departments d</span><br><span class="line"><span class="keyword">ON</span> e.`department_id`<span class="operator">=</span>d.`department_id`</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> department_name</span><br><span class="line"><span class="comment">-- ②在①的结果上选员工数&gt;3的记录，并排序</span></span><br><span class="line"><span class="keyword">SELECT</span> department_name 部门名,<span class="built_in">COUNT</span>(<span class="operator">*</span>)</span><br><span class="line"><span class="keyword">FROM</span> employees e</span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> departments d</span><br><span class="line"><span class="keyword">ON</span> e.`department_id`<span class="operator">=</span>d.`department_id`</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> d.`department_id`</span><br><span class="line"><span class="keyword">HAVING</span> <span class="built_in">COUNT</span>(<span class="operator">*</span>)<span class="operator">&gt;</span><span class="number">3</span></span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">DESC</span>;</span><br></pre></td></tr></tbody></table></figure>

<p><strong>案例5</strong>：查询员工名、部门名、工种名，并按部门名降序。（三表连接）</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> last_name,department_name,job_title</span><br><span class="line"><span class="keyword">FROM</span> employees e</span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> departments d <span class="keyword">ON</span> e.`department_id`<span class="operator">=</span>d.`department_id`</span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> jobs j <span class="keyword">ON</span> e.`job_id`<span class="operator">=</span>j.`job_id`</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> department_name <span class="keyword">DESC</span>;</span><br></pre></td></tr></tbody></table></figure>

<h6 id="2-非等值连接-1"><a href="#2-非等值连接-1" class="headerlink" title="2.非等值连接"></a>2.非等值连接</h6><p><strong>案例1</strong>：查询员工的工资级别。</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> salary,grade_level</span><br><span class="line"><span class="keyword">FROM</span> employees e</span><br><span class="line"><span class="keyword">JOIN</span> job_grades g</span><br><span class="line"><span class="keyword">ON</span> e.`salary` <span class="keyword">BETWEEN</span> g.`lowest_sal` <span class="keyword">AND</span> g.`highest_sal`;</span><br></pre></td></tr></tbody></table></figure>

<p><strong>案例2</strong>：查询每个工资级别的个数&gt;20的，并且按工资级别降序排序。</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(<span class="operator">*</span>) 个数,grade_level</span><br><span class="line"><span class="keyword">FROM</span> employees e</span><br><span class="line"><span class="keyword">JOIN</span> job_grades g</span><br><span class="line"><span class="keyword">ON</span> e.`salary` <span class="keyword">BETWEEN</span> g.`lowest_sal` <span class="keyword">AND</span> g.`highest_sal`</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> grade_level</span><br><span class="line"><span class="keyword">HAVING</span> <span class="built_in">COUNT</span>(<span class="operator">*</span>)<span class="operator">&gt;</span><span class="number">20</span></span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> grade_level <span class="keyword">DESC</span>;</span><br></pre></td></tr></tbody></table></figure>

<h6 id="3-自连接-1"><a href="#3-自连接-1" class="headerlink" title="3.自连接"></a>3.自连接</h6><p><strong>案例1</strong>：查询员工的名字、上级的名字。</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> e.last_name 员工名,m.last_name 上级名</span><br><span class="line"><span class="keyword">FROM</span> employees e</span><br><span class="line"><span class="keyword">JOIN</span> employees m</span><br><span class="line"><span class="keyword">ON</span> e.`manager_id`<span class="operator">=</span>m.`employee_id`;</span><br></pre></td></tr></tbody></table></figure>

<p><strong>案例2</strong>：查询姓名中包含字符k的员工的名字，以及对应的上级的名字。</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> e.last_name 员工名,m.last_name 上级名</span><br><span class="line"><span class="keyword">FROM</span> employees e</span><br><span class="line"><span class="keyword">JOIN</span> employees m</span><br><span class="line"><span class="keyword">ON</span> e.`manager_id`<span class="operator">=</span>m.`employee_id`</span><br><span class="line"><span class="keyword">WHERE</span> e.`last_name` <span class="keyword">LIKE</span> <span class="string">'%k%'</span>;</span><br></pre></td></tr></tbody></table></figure>

<h5 id="外连接-这里没有介绍全外连接"><a href="#外连接-这里没有介绍全外连接" class="headerlink" title="外连接(这里没有介绍全外连接)"></a>外连接(这里没有介绍全外连接)</h5><p><strong>应用场景</strong>：用于查询一个表中有，另一个表中没有的记录。</p>
<p><strong>特点</strong>：</p>
<ul>
<li>外连接的查询结果为<code>主表</code>中的所有记录，如果<code>从表</code>中有和它匹配的，则显示匹配的值；若没有，则显示null。即：外连接查询结果=内连接结果+<code>主表</code>中有而<code>从表</code>中没有的记录。</li>
<li>左外连接中，left join左边的是主表；右外连接中，right join 右边的是主表。</li>
</ul>
<p><strong>引入</strong>：查询男朋友不在男神表的女神名。</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> b.name 女神名</span><br><span class="line"><span class="keyword">FROM</span> beauty b</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> boys bo</span><br><span class="line"><span class="keyword">ON</span> b.`boyfriend_id`<span class="operator">=</span>bo.`id`</span><br><span class="line"><span class="keyword">WHERE</span> bo.`id` <span class="keyword">IS</span> <span class="keyword">NULL</span>;		</span><br></pre></td></tr></tbody></table></figure>

<p>或者</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> b.name 女神名</span><br><span class="line"><span class="keyword">FROM</span> boys bo</span><br><span class="line"><span class="keyword">RIGHT</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> beauty b</span><br><span class="line"><span class="keyword">ON</span> b.`boyfriend_id`<span class="operator">=</span>bo.`id`</span><br><span class="line"><span class="keyword">WHERE</span> bo.`id` <span class="keyword">IS</span> <span class="keyword">NULL</span>;</span><br></pre></td></tr></tbody></table></figure>



<p><strong>案例</strong>：查询哪个部门没有员工。</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> d.<span class="operator">*</span>,e.employee_id</span><br><span class="line"><span class="keyword">FROM</span> departments d</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> employees e</span><br><span class="line"><span class="keyword">ON</span> d.`department_id`<span class="operator">=</span>e.`department_id`</span><br><span class="line"><span class="keyword">WHERE</span> e.`employee_id` <span class="keyword">IS</span> <span class="keyword">NULL</span>;</span><br></pre></td></tr></tbody></table></figure>



<h5 id="交叉连接"><a href="#交叉连接" class="headerlink" title="交叉连接"></a>交叉连接</h5><p>就是使用sql99标准实现两个表的笛卡尔乘积。如：</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> b.<span class="operator">*</span>,bo.<span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> beauty b</span><br><span class="line"><span class="keyword">CROSS</span> <span class="keyword">JOIN</span> boys bo;</span><br></pre></td></tr></tbody></table></figure>



<h4 id="join连接总结"><a href="#join连接总结" class="headerlink" title="join连接总结"></a>join连接总结</h4><h4 id="综合案例"><a href="#综合案例" class="headerlink" title="综合案例"></a>综合案例</h4><p><strong>1.查询编号&gt;3的女神的男朋友信息，如果有则列出详细，如果没有，用NULL填充。</strong></p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 根据要求，查询女神的男朋友信息，如果没有则用NULL填充，从这里可以看出女神表beauty为主表，男神表boys为从表。</span></span><br><span class="line"><span class="comment">--下面使用左外连接 left左面的为主表</span></span><br><span class="line"><span class="keyword">SELECT</span> b.id,b.`name`,bo.<span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> beauty b</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> boys bo</span><br><span class="line"><span class="keyword">ON</span> b.`boyfriend_id`<span class="operator">=</span>bo.`id`</span><br><span class="line"><span class="keyword">WHERE</span> b.`id`<span class="operator">&gt;</span><span class="number">3</span>;</span><br></pre></td></tr></tbody></table></figure>

<p><strong>2.查询哪个城市没有部门。</strong></p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 从要求中可以推断出locations表为主表，departments表为从表，因为有些部门没有和城市匹配。</span></span><br><span class="line"><span class="comment">-- 下面使用右外连接 right右面的为主表</span></span><br><span class="line"><span class="keyword">SELECT</span> city</span><br><span class="line"><span class="keyword">FROM</span> departments d</span><br><span class="line"><span class="keyword">RIGHT</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> locations l</span><br><span class="line"><span class="keyword">ON</span> d.`location_id`<span class="operator">=</span>l.`location_id`</span><br><span class="line"><span class="keyword">WHERE</span> d.`department_id` <span class="keyword">IS</span> <span class="keyword">NULL</span>;</span><br></pre></td></tr></tbody></table></figure>

<p><strong>3.查询部门名为SAL或IT的员工信息。</strong></p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 题目要求查询部门名为指定内容的员工信息，考虑到可能会出现有些部门没有员工，为了查到全，所以这里采用外连接，不采用内连接。部门表departments为主表，员工表employees为从表</span></span><br><span class="line"><span class="comment">-- 下面使用左外连接</span></span><br><span class="line"><span class="keyword">SELECT</span> e.<span class="operator">*</span>,d.department_name</span><br><span class="line"><span class="keyword">FROM</span> departments d</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> employees e</span><br><span class="line"><span class="keyword">ON</span> d.`department_id`<span class="operator">=</span>e.`department_id`</span><br><span class="line"><span class="keyword">WHERE</span> d.`department_name` <span class="keyword">IN</span>(<span class="string">'SAL'</span>,<span class="string">'IT'</span>);</span><br></pre></td></tr></tbody></table></figure>



<h3 id="子查询"><a href="#子查询" class="headerlink" title="子查询"></a>子查询</h3><p><strong>含义</strong>：</p>
<p>出现在其他语句中的select语句，称为子查询或内查询。</p>
<p>外部的查询语句，成为主查询或外查询。</p>
<p><strong>分类</strong>：</p>
<ul>
<li>按子查询出现的位置分类：<ul>
<li>select后面<ul>
<li>仅仅支持标量子查询</li>
</ul>
</li>
<li>from后面<ul>
<li>支持表子查询</li>
</ul>
</li>
<li><strong>where或having后面</strong><ul>
<li>支持<strong>标量子查询、列子查询</strong></li>
<li>也支持行子查询(不过用的较少)</li>
</ul>
</li>
<li>exists后面（相关子查询）<ul>
<li>支持表子查询</li>
</ul>
</li>
</ul>
</li>
<li>按结果集的行列数不同分类：<ul>
<li>标量子查询（结果集只有一行一列）</li>
<li>列子查询（结果集只有一列多行）</li>
<li>行子查询（结果集有一行多列，也支持多列多行）</li>
<li>表子查询（结果集一般为多行多列，也就是说具有上面三个子查询的特性）</li>
</ul>
</li>
</ul>
<h4 id="where或having后面"><a href="#where或having后面" class="headerlink" title="where或having后面"></a>where或having后面</h4><h5 id="特点："><a href="#特点：" class="headerlink" title="特点："></a>特点：</h5><ul>
<li>子查询放在小括号内</li>
<li>子查询一般放在条件的右侧</li>
<li>标量子查询，一般搭配着单行操作符使用。<ul>
<li>单行操作符比如：<code>&gt; &lt; &gt;= &lt;= = &lt;&gt;</code></li>
</ul>
</li>
<li>列子查询，一般搭配着多行操作符使用<ul>
<li>多行操作符比如：<code>IN、ANY/SOME、ALL</code></li>
</ul>
</li>
<li>子查询的执行优先于主查询的执行，也就是说主查询的条件用到了子查询的结果。</li>
</ul>
<h5 id="where或having后面的标量子查询（也称为单行子查询）使用"><a href="#where或having后面的标量子查询（也称为单行子查询）使用" class="headerlink" title="where或having后面的标量子查询（也称为单行子查询）使用"></a>where或having后面的标量子查询（也称为单行子查询）使用</h5><p><strong>案例1</strong>：谁的工资比Abel高？</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- ①：查询Abel的工资</span></span><br><span class="line"><span class="keyword">SELECT</span> salary</span><br><span class="line"><span class="keyword">FROM</span> employees </span><br><span class="line"><span class="keyword">WHERE</span> last_name<span class="operator">=</span><span class="string">'Abel'</span>;</span><br><span class="line"><span class="comment">-- ②：查询员工的信息，满足salary&gt;①的结果</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> salary <span class="operator">&gt;</span> (</span><br><span class="line">	<span class="keyword">SELECT</span> salary</span><br><span class="line">	<span class="keyword">FROM</span> employees </span><br><span class="line">	<span class="keyword">WHERE</span> last_name<span class="operator">=</span><span class="string">'Abel'</span></span><br><span class="line">);</span><br></pre></td></tr></tbody></table></figure>

<p><strong>案例2</strong>：返回job_id与141号员工相同，salary比143号员工多的员工的姓名、job_id和工资。</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- ①查询141号员工的job_id</span></span><br><span class="line"><span class="keyword">SELECT</span> job_id</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> employee_id <span class="operator">=</span> <span class="number">141</span>;</span><br><span class="line"><span class="comment">-- ②查询143号员工的salary</span></span><br><span class="line"><span class="keyword">SELECT</span> salary</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> employee_id <span class="operator">=</span> <span class="number">143</span>;</span><br><span class="line"><span class="comment">-- ③查询员工的信息，要求job_id=①并且salary&gt;②</span></span><br><span class="line"><span class="keyword">SELECT</span> last_name,job_id,salary</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> job_id<span class="operator">=</span>(</span><br><span class="line">	<span class="keyword">SELECT</span> job_id</span><br><span class="line">	<span class="keyword">FROM</span> employees</span><br><span class="line">	<span class="keyword">WHERE</span> employee_id <span class="operator">=</span> <span class="number">141</span></span><br><span class="line">) <span class="keyword">AND</span> salary<span class="operator">&gt;</span>(</span><br><span class="line">	<span class="keyword">SELECT</span> salary</span><br><span class="line">	<span class="keyword">FROM</span> employees</span><br><span class="line">	<span class="keyword">WHERE</span> employee_id <span class="operator">=</span> <span class="number">143</span></span><br><span class="line">);</span><br></pre></td></tr></tbody></table></figure>

<p><strong>案例3</strong>：返回公司工资最少的员工的last_name、job_id和salary</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- ①查询公司的最低工资</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">MIN</span>(salary)</span><br><span class="line"><span class="keyword">FROM</span> employees;</span><br><span class="line"><span class="comment">-- ②查询员工的last_name、job_id和salary,要求salary=①</span></span><br><span class="line"><span class="keyword">SELECT</span> last_name,job_id,salary</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> salary<span class="operator">=</span>(</span><br><span class="line">	<span class="keyword">SELECT</span> <span class="built_in">MIN</span>(salary)</span><br><span class="line">	<span class="keyword">FROM</span> employees</span><br><span class="line">);</span><br></pre></td></tr></tbody></table></figure>

<p><strong>案例4</strong>：查询最低工资大于50号部门最低工资的部门id和其最低工资。</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- ①:查询50号部门的最低工资</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">MIN</span>(salary)</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> department_id <span class="operator">=</span> <span class="number">50</span>;</span><br><span class="line"><span class="comment">-- ②:查询每个部门的最低工资</span></span><br><span class="line"><span class="keyword">SELECT</span> department_id, <span class="built_in">MIN</span>(salary)</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id;</span><br><span class="line"><span class="comment">-- ③:在②的基础上筛选，满足min(salary)&gt;①</span></span><br><span class="line"><span class="keyword">SELECT</span> department_id, <span class="built_in">MIN</span>(salary)</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id</span><br><span class="line"><span class="keyword">HAVING</span> <span class="built_in">MIN</span>(salary) <span class="operator">&gt;</span> (</span><br><span class="line">	<span class="keyword">SELECT</span> <span class="built_in">MIN</span>(salary)</span><br><span class="line">	<span class="keyword">FROM</span> employees</span><br><span class="line">	<span class="keyword">WHERE</span> department_id <span class="operator">=</span> <span class="number">50</span></span><br><span class="line">);</span><br></pre></td></tr></tbody></table></figure>

<p><strong>非法使用标量子查询情况，比如</strong></p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> department_id, <span class="built_in">MIN</span>(salary)</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id</span><br><span class="line"><span class="keyword">HAVING</span> <span class="built_in">MIN</span>(salary) <span class="operator">&gt;</span> (</span><br><span class="line">	<span class="keyword">SELECT</span> salary</span><br><span class="line">	<span class="keyword">FROM</span> employees</span><br><span class="line">	<span class="keyword">WHERE</span> department_id <span class="operator">=</span> <span class="number">50</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 上面这个是非法使用，原因是子查询的结果不是单行单列</span></span><br></pre></td></tr></tbody></table></figure>

<h5 id="where或having后面的列子查询（也称为多行子查询）使用"><a href="#where或having后面的列子查询（也称为多行子查询）使用" class="headerlink" title="where或having后面的列子查询（也称为多行子查询）使用"></a>where或having后面的列子查询（也称为多行子查询）使用</h5><p><strong>案例1</strong>：返回location_id是1400或1700的部门中的所有员工姓名。</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 1.先查询location_id是1400或1700的部门编号</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> department_id</span><br><span class="line"><span class="keyword">FROM</span> departments</span><br><span class="line"><span class="keyword">WHERE</span> location_id <span class="operator">=</span> <span class="number">1400</span> </span><br><span class="line"><span class="keyword">OR</span> location_id <span class="operator">=</span> <span class="number">1700</span>;</span><br><span class="line"><span class="comment">-- 2.查询员工姓名，要求部门号是1列表中的某一个</span></span><br><span class="line"><span class="keyword">SELECT</span> last_name</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> department_id <span class="keyword">IN</span>(</span><br><span class="line">	<span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> department_id</span><br><span class="line">	<span class="keyword">FROM</span> departments</span><br><span class="line">	<span class="keyword">WHERE</span> location_id <span class="operator">=</span> <span class="number">1400</span> </span><br><span class="line">	<span class="keyword">OR</span> location_id <span class="operator">=</span> <span class="number">1700</span></span><br><span class="line">);</span><br></pre></td></tr></tbody></table></figure>

<p><strong>案例2</strong>：返回其他工种中比<code>job_id</code>为<code>IT_PROG</code>工种任意一个工资低的员工的员工号、姓名、<code>job_id</code>以及salary。</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 1.查询job_id=IT_PROG部门的任一工资</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> salary</span><br><span class="line"><span class="keyword">FROM</span> employees </span><br><span class="line"><span class="keyword">WHERE</span> job_id <span class="operator">=</span> <span class="string">'IT_PROG'</span>;</span><br><span class="line"><span class="comment">-- 2.查询员工号、姓名、job_id以及salary，并且salary&lt;any(1中的任意一个)</span></span><br><span class="line"><span class="keyword">SELECT</span> last_name,employee_id,job_id,salary</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> salary <span class="operator">&lt;</span> <span class="keyword">ANY</span>(</span><br><span class="line">	<span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> salary</span><br><span class="line">	<span class="keyword">FROM</span> employees </span><br><span class="line">	<span class="keyword">WHERE</span> job_id <span class="operator">=</span> <span class="string">'IT_PROG'</span></span><br><span class="line">) <span class="keyword">AND</span> job_id<span class="operator">&lt;&gt;</span><span class="string">'IT_PROG'</span>;</span><br><span class="line"><span class="comment">-- 或者这么写</span></span><br><span class="line"><span class="keyword">SELECT</span> last_name,employee_id,job_id,salary</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> salary <span class="operator">&lt;</span> (</span><br><span class="line">	<span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> <span class="built_in">MAX</span>(salary)</span><br><span class="line">	<span class="keyword">FROM</span> employees </span><br><span class="line">	<span class="keyword">WHERE</span> job_id <span class="operator">=</span> <span class="string">'IT_PROG'</span></span><br><span class="line">) <span class="keyword">AND</span> job_id<span class="operator">&lt;&gt;</span><span class="string">'IT_PROG'</span>;</span><br></pre></td></tr></tbody></table></figure>

<p>案例3：返回其他工种中比<code>job_id</code>为<code>IT_PROG</code>工种所有工资都低的员工的员工号、姓名、<code>job_id</code>以及salary。</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> last_name,employee_id,job_id,salary</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> salary <span class="operator">&lt;</span> <span class="keyword">ALL</span>(</span><br><span class="line">	<span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> salary</span><br><span class="line">	<span class="keyword">FROM</span> employees </span><br><span class="line">	<span class="keyword">WHERE</span> job_id <span class="operator">=</span> <span class="string">'IT_PROG'</span></span><br><span class="line">) <span class="keyword">AND</span> job_id<span class="operator">&lt;&gt;</span><span class="string">'IT_PROG'</span>;</span><br><span class="line"><span class="comment">-- 或者这么写</span></span><br><span class="line"><span class="keyword">SELECT</span> last_name,employee_id,job_id,salary</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> salary <span class="operator">&lt;</span> (</span><br><span class="line">	<span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> <span class="built_in">MIN</span>(salary)</span><br><span class="line">	<span class="keyword">FROM</span> employees </span><br><span class="line">	<span class="keyword">WHERE</span> job_id <span class="operator">=</span> <span class="string">'IT_PROG'</span></span><br><span class="line">) <span class="keyword">AND</span> job_id<span class="operator">&lt;&gt;</span><span class="string">'IT_PROG'</span>;</span><br></pre></td></tr></tbody></table></figure>

<h5 id="where或having后面的行子查询（结果集为一行多列或多列多行-使用"><a href="#where或having后面的行子查询（结果集为一行多列或多列多行-使用" class="headerlink" title="where或having后面的行子查询（结果集为一行多列或多列多行)使用"></a>where或having后面的行子查询（结果集为一行多列或多列多行)使用</h5><p><strong>案例</strong>：查询员工编号最小并且工资最高的员工信息。</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 1.查询最小的员工编号</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">MIN</span>(employee_id)</span><br><span class="line"><span class="keyword">FROM</span> employees;</span><br><span class="line"><span class="comment">-- 2.查询最高工资</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">MAX</span>(salary)</span><br><span class="line"><span class="keyword">FROM</span> employees;</span><br><span class="line"><span class="comment">-- 3.查询员工信息</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> </span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> employee_id <span class="operator">=</span> (</span><br><span class="line">	<span class="keyword">SELECT</span> <span class="built_in">MIN</span>(employee_id)</span><br><span class="line">	<span class="keyword">FROM</span> employees</span><br><span class="line">)<span class="keyword">AND</span> salary<span class="operator">=</span>(</span><br><span class="line">	<span class="keyword">SELECT</span> <span class="built_in">MAX</span>(salary)</span><br><span class="line">	<span class="keyword">FROM</span> employees</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 用行子查询解决</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> (employee_id,salary)<span class="operator">=</span>(</span><br><span class="line">	<span class="keyword">SELECT</span> <span class="built_in">MIN</span>(employee_id),<span class="built_in">MAX</span>(salary)</span><br><span class="line">	<span class="keyword">FROM</span> employees</span><br><span class="line">);</span><br></pre></td></tr></tbody></table></figure>

<h4 id="select后面"><a href="#select后面" class="headerlink" title="select后面"></a>select后面</h4><p><strong>案例1</strong>：查询每个部门的员工个数。</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> d.<span class="operator">*</span>,(</span><br><span class="line">	<span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(<span class="operator">*</span>)</span><br><span class="line">	<span class="keyword">FROM</span> employees e</span><br><span class="line">	<span class="keyword">WHERE</span> e.department_id  <span class="operator">=</span> d.`department_id`</span><br><span class="line">) 个数</span><br><span class="line"><span class="keyword">FROM</span> departments d;</span><br></pre></td></tr></tbody></table></figure>

<p><strong>案例2</strong>：查询员工号=102的部门名。</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span>(</span><br><span class="line">	<span class="keyword">SELECT</span> department_name</span><br><span class="line">	<span class="keyword">FROM</span> departments d</span><br><span class="line">	<span class="keyword">INNER</span> <span class="keyword">JOIN</span> employees e</span><br><span class="line">	<span class="keyword">ON</span> d.department_id <span class="operator">=</span> e.department_id</span><br><span class="line">	<span class="keyword">WHERE</span> e.employee_id <span class="operator">=</span> <span class="number">102</span></span><br><span class="line">) 部门名;</span><br></pre></td></tr></tbody></table></figure>

<h4 id="from后面"><a href="#from后面" class="headerlink" title="from后面"></a>from后面</h4><p><strong>案例</strong>：查询每个部门的平均工资的工资等级。</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 1.先查询每个部门的平均工资</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">AVG</span>(salary),department_id</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id;</span><br><span class="line"><span class="comment">-- 2.连接1的结果集何job_grades表，筛选条件是平均工资在lowest_sal和highest_sal之间。</span></span><br><span class="line"><span class="keyword">SELECT</span> ag_dep.<span class="operator">*</span>,g.`grade_level`</span><br><span class="line"><span class="keyword">FROM</span> (</span><br><span class="line">	<span class="keyword">SELECT</span> <span class="built_in">AVG</span>(salary) ag,department_id</span><br><span class="line">	<span class="keyword">FROM</span> employees</span><br><span class="line">	<span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id</span><br><span class="line">)ag_dep</span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> job_grades g</span><br><span class="line"><span class="keyword">ON</span> ag_dep.ag <span class="keyword">BETWEEN</span> lowest_sal <span class="keyword">AND</span> highest_sal;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 发现from将子查询结果充当一张表，要求必须起别名</span></span><br></pre></td></tr></tbody></table></figure>

<h4 id="exists后面（相关子查询）"><a href="#exists后面（相关子查询）" class="headerlink" title="exists后面（相关子查询）"></a>exists后面（相关子查询）</h4><p><strong>语法</strong>：</p>
<p><code>exists(完整的查询语句);</code></p>
<p>最终结果只有两种情况，1或0。</p>
<p><strong>案例1</strong>：查询有员工的部门名。</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> department_name</span><br><span class="line"><span class="keyword">FROM</span> departments d</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">EXISTS</span>(</span><br><span class="line">	<span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line">	<span class="keyword">FROM</span> employees e</span><br><span class="line">	<span class="keyword">WHERE</span> d.department_id <span class="operator">=</span> e.`department_id`</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> <span class="comment">-- 或使用in解决</span></span><br><span class="line"><span class="keyword">SELECT</span> department_name</span><br><span class="line"><span class="keyword">FROM</span> departments d</span><br><span class="line"><span class="keyword">WHERE</span> d.`department_id` <span class="keyword">IN</span>(</span><br><span class="line">	<span class="keyword">SELECT</span> department_id</span><br><span class="line">	<span class="keyword">FROM</span> employees</span><br><span class="line">);</span><br></pre></td></tr></tbody></table></figure>

<p><strong>案例2</strong>：查询没有女朋友的男神信息。</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 使用in</span></span><br><span class="line"><span class="keyword">SELECT</span> bo.<span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> boys bo</span><br><span class="line"><span class="keyword">WHERE</span> bo.id <span class="keyword">NOT</span> <span class="keyword">IN</span>(</span><br><span class="line">	<span class="keyword">SELECT</span> boyfriend_id</span><br><span class="line">	<span class="keyword">FROM</span> beauty</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 使用exists</span></span><br><span class="line"><span class="keyword">SELECT</span> bo.<span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> boys bo</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span>(</span><br><span class="line">	<span class="keyword">SELECT</span> boyfriend_id</span><br><span class="line">	<span class="keyword">FROM</span> beauty b</span><br><span class="line">	<span class="keyword">WHERE</span> b.`boyfriend_id`<span class="operator">=</span>bo.`id`</span><br><span class="line">);</span><br></pre></td></tr></tbody></table></figure>

<h4 id="练习"><a href="#练习" class="headerlink" title="练习"></a>练习</h4><p><strong>案例1</strong>：查询和<code>Zlotkey</code>相同部门的员工姓名和工资。</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 1.查询Zlotkey的部门</span></span><br><span class="line"><span class="keyword">SELECT</span> department_id</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> last_name <span class="operator">=</span> <span class="string">'Zlotkey'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 2.查询部门号等于1.的结果的姓名和工资</span></span><br><span class="line"><span class="keyword">SELECT</span> last_name, salary</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> department_id <span class="operator">=</span> (</span><br><span class="line">	<span class="keyword">SELECT</span> department_id</span><br><span class="line">	<span class="keyword">FROM</span> employees</span><br><span class="line">	<span class="keyword">WHERE</span> last_name <span class="operator">=</span> <span class="string">'Zlotkey'</span></span><br><span class="line">);</span><br></pre></td></tr></tbody></table></figure>

<p><strong>案例2</strong>：查询工资比公司平均工资高的员工的员工号，姓名和工资。</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 1.查询公司的平均工资</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">AVG</span>(salary)</span><br><span class="line"><span class="keyword">FROM</span> employees;</span><br><span class="line"><span class="comment">-- 2.查询工资比1.的结果高的员工的员工号，姓名和工资</span></span><br><span class="line"><span class="keyword">SELECT</span> employee_id,last_name,salary</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> salary <span class="operator">&gt;</span> (</span><br><span class="line">	<span class="keyword">SELECT</span> <span class="built_in">AVG</span>(salary)</span><br><span class="line">	<span class="keyword">FROM</span> employees</span><br><span class="line">);</span><br></pre></td></tr></tbody></table></figure>

<p>==<strong>案例3</strong>：查询各部门中工资比本部门平均工资高的员工的员工号，姓名和工资。==</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 首先需要读懂题意，问的是各部门中工资大于本部门平均工资的员工的信息，意思就是筛选处每个部门大于自身部门的平均工资的员工</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 1.查询各部门的平均工资</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">AVG</span>(salary),department_id</span><br><span class="line"><span class="keyword">FROM</span> employees </span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id;</span><br><span class="line"><span class="comment">-- 2.连接1.的结果集和employees表，进行筛选</span></span><br><span class="line"><span class="keyword">SELECT</span> employee_id,last_name,salary, e.department_id</span><br><span class="line"><span class="keyword">FROM</span> employees e</span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span>(</span><br><span class="line">	<span class="keyword">SELECT</span> <span class="built_in">AVG</span>(salary) ag,department_id</span><br><span class="line">	<span class="keyword">FROM</span> employees </span><br><span class="line">	<span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id</span><br><span class="line">)ag_dep</span><br><span class="line"><span class="keyword">ON</span> e.`department_id`<span class="operator">=</span>ag_dep.department_id</span><br><span class="line"><span class="keyword">WHERE</span> salary <span class="operator">&gt;</span> ag_dep.ag;</span><br></pre></td></tr></tbody></table></figure>

<p><strong>案例4</strong>：查询和姓名中包含字母u的员工在相同部门的员工的员工号和姓名。</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 1.查询姓名中包含字母u的员工的部门号</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> department_id</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> last_name <span class="keyword">LIKE</span> <span class="string">'%u%'</span>;</span><br><span class="line"><span class="comment">-- 2.查询部门号=1.的结果集的任意一个员工的员工号和姓名</span></span><br><span class="line"><span class="keyword">SELECT</span> last_name,employee_id</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> department_id <span class="keyword">IN</span>(</span><br><span class="line">	<span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> department_id</span><br><span class="line">	<span class="keyword">FROM</span> employees</span><br><span class="line">	<span class="keyword">WHERE</span> last_name <span class="keyword">LIKE</span> <span class="string">'%u%'</span></span><br><span class="line">);</span><br></pre></td></tr></tbody></table></figure>

<p><strong>案例5</strong>：查询在部门的location_id为1700的部门工作的员工的员工号。</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 1.查询location_id为1700的部门</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> department_id</span><br><span class="line"><span class="keyword">FROM</span> departments</span><br><span class="line"><span class="keyword">WHERE</span> location_id <span class="operator">=</span> <span class="number">1700</span>;</span><br><span class="line"><span class="comment">-- 2.查询部门号=1.的结果集中的任意一个的员工号。</span></span><br><span class="line"><span class="keyword">SELECT</span> employee_id</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> department_id <span class="operator">=</span> <span class="keyword">ANY</span>(</span><br><span class="line">	<span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> department_id</span><br><span class="line">	<span class="keyword">FROM</span> departments</span><br><span class="line">	<span class="keyword">WHERE</span> location_id <span class="operator">=</span> <span class="number">1700</span></span><br><span class="line">);</span><br><span class="line"><span class="comment">-- 按照这里的题意，any换成in也行</span></span><br></pre></td></tr></tbody></table></figure>

<p><strong>案例6</strong>：查询管理者是K_ing的员工姓名和工资。</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 1.查询姓名为K_ing的员工编号</span></span><br><span class="line"><span class="keyword">SELECT</span> employee_id</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> last_name <span class="operator">=</span> <span class="string">'K_ing'</span>;</span><br><span class="line"><span class="comment">-- 2.查询哪个员工的manager_id = 1.的结果集的任意一个</span></span><br><span class="line"><span class="keyword">SELECT</span> last_name,salary</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> manager_id <span class="keyword">IN</span>(</span><br><span class="line">	<span class="keyword">SELECT</span> employee_id</span><br><span class="line">	<span class="keyword">FROM</span> employees</span><br><span class="line">	<span class="keyword">WHERE</span> last_name <span class="operator">=</span> <span class="string">'K_ing'</span></span><br><span class="line">);</span><br></pre></td></tr></tbody></table></figure>

<p><strong>案例7</strong>：查询工资最高的员工的姓名，要求first_name和last_name显示为一列，列名为姓，名。</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 1.查询最高工资</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">MAX</span>(salary)</span><br><span class="line"><span class="keyword">FROM</span> employees;</span><br><span class="line"><span class="comment">-- 2.查询工资=1的结果集的姓、名</span></span><br><span class="line"><span class="keyword">SELECT</span> CONCAT(first_name,last_name) "姓名"</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> salary<span class="operator">=</span>(</span><br><span class="line">	<span class="keyword">SELECT</span> <span class="built_in">MAX</span>(salary)</span><br><span class="line">	<span class="keyword">FROM</span> employees</span><br><span class="line">);</span><br></pre></td></tr></tbody></table></figure>

<h4 id="经典案例"><a href="#经典案例" class="headerlink" title="经典案例"></a>经典案例</h4><p><strong>案例1</strong>：查询工资最低的员工信息: last_name, salary  。</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 一、查询最低工资</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">MIN</span>(salary)</span><br><span class="line"><span class="keyword">FROM</span> employees;</span><br><span class="line"><span class="comment">-- 二、查询last_name,salary，要求salary=一、的结果</span></span><br><span class="line"><span class="keyword">SELECT</span> last_name,salary</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> salary<span class="operator">=</span>(</span><br><span class="line">	<span class="keyword">SELECT</span> <span class="built_in">MIN</span>(salary)</span><br><span class="line">	<span class="keyword">FROM</span> employees</span><br><span class="line">);</span><br></pre></td></tr></tbody></table></figure>

<p><strong>案例2</strong>：查询平均工资最低的部门信息  。</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 一、查询各部门的平均工资</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">AVG</span>(salary),department_id</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id;</span><br><span class="line"><span class="comment">-- 二、查询一、结果中的最低平均工资</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">MIN</span>(ag)</span><br><span class="line"><span class="keyword">FROM</span> (</span><br><span class="line">	<span class="keyword">SELECT</span> <span class="built_in">AVG</span>(salary) ag,department_id</span><br><span class="line">	<span class="keyword">FROM</span> employees</span><br><span class="line">	<span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id</span><br><span class="line">) ag_dep;</span><br><span class="line"><span class="comment">-- 三、查询哪个部门的平均工资=二、的结果</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">AVG</span>(salary),department_id</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id</span><br><span class="line"><span class="keyword">HAVING</span> <span class="built_in">AVG</span>(salary)<span class="operator">=</span>(</span><br><span class="line">	<span class="keyword">SELECT</span> <span class="built_in">MIN</span>(ag)</span><br><span class="line">	<span class="keyword">FROM</span> (</span><br><span class="line">		<span class="keyword">SELECT</span> <span class="built_in">AVG</span>(salary) ag,department_id</span><br><span class="line">		<span class="keyword">FROM</span> employees</span><br><span class="line">		<span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id</span><br><span class="line">	) ag_dep</span><br><span class="line">);</span><br><span class="line"><span class="comment">-- 四、查询部门信息</span></span><br><span class="line"><span class="keyword">SELECT</span> d.<span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> departments d</span><br><span class="line"><span class="keyword">WHERE</span> d.`department_id`<span class="operator">=</span>(</span><br><span class="line">	<span class="keyword">SELECT</span> department_id</span><br><span class="line">	<span class="keyword">FROM</span> employees</span><br><span class="line">	<span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id</span><br><span class="line">	<span class="keyword">HAVING</span> <span class="built_in">AVG</span>(salary)<span class="operator">=</span>(</span><br><span class="line">		<span class="keyword">SELECT</span> <span class="built_in">MIN</span>(ag)</span><br><span class="line">		<span class="keyword">FROM</span> (</span><br><span class="line">			<span class="keyword">SELECT</span> <span class="built_in">AVG</span>(salary) ag,department_id</span><br><span class="line">			<span class="keyword">FROM</span> employees</span><br><span class="line">			<span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id</span><br><span class="line">		) ag_dep</span><br><span class="line">	)</span><br><span class="line">);</span><br></pre></td></tr></tbody></table></figure>

<p><strong>或者</strong></p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 一、求出最低平均工资的部门编号</span></span><br><span class="line"><span class="keyword">SELECT</span> department_id</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> <span class="built_in">avg</span>(salary)</span><br><span class="line">limit <span class="number">1</span>;</span><br><span class="line"><span class="comment">-- 二、查询部门信息</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> departments</span><br><span class="line"><span class="keyword">WHERE</span> department_id<span class="operator">=</span>(</span><br><span class="line">	<span class="keyword">SELECT</span> department_id</span><br><span class="line">	<span class="keyword">FROM</span> employees</span><br><span class="line">	<span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id</span><br><span class="line">	<span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="built_in">AVG</span>(salary)</span><br><span class="line">	LIMIT <span class="number">1</span></span><br><span class="line">);</span><br></pre></td></tr></tbody></table></figure>

<p><strong>案例3</strong>：查询平均工资最低的部门信息和该部门的平均工资  。</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 一、查询各部门的平均工资</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">AVG</span>(salary),department_id</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id;</span><br><span class="line"><span class="comment">-- 二、求出最低平均工资的部门编号</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">AVG</span>(salary),department_id</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> <span class="built_in">avg</span>(salary)</span><br><span class="line">limit <span class="number">1</span>;</span><br><span class="line"><span class="comment">-- 三、查询部门信息(这里用到了表子查询)</span></span><br><span class="line"><span class="keyword">SELECT</span> d.<span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> departments d</span><br><span class="line"><span class="keyword">JOIN</span> (</span><br><span class="line">	<span class="keyword">SELECT</span> <span class="built_in">AVG</span>(salary),department_id</span><br><span class="line">	<span class="keyword">FROM</span> employees</span><br><span class="line">	<span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id</span><br><span class="line">	<span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="built_in">AVG</span>(salary)</span><br><span class="line">	LIMIT <span class="number">1</span></span><br><span class="line">)ag_dep</span><br><span class="line"><span class="keyword">ON</span> d.`department_id`<span class="operator">=</span>ag_dep.department_id;</span><br></pre></td></tr></tbody></table></figure>

<p><strong>案例4</strong>：查询平均工资最高的 job 信息  。</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 一、查询每个job的平均工资</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">AVG</span>(salary),job_id</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> job_id</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="built_in">AVG</span>(salary) <span class="keyword">DESC</span></span><br><span class="line">LIMIT <span class="number">1</span>;</span><br><span class="line"><span class="comment">-- 二、查询job信息</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> </span><br><span class="line"><span class="keyword">FROM</span> jobs</span><br><span class="line"><span class="keyword">WHERE</span> jobs.`job_id` <span class="operator">=</span> (</span><br><span class="line">	<span class="keyword">SELECT</span> job_id</span><br><span class="line">	<span class="keyword">FROM</span> employees</span><br><span class="line">	<span class="keyword">GROUP</span> <span class="keyword">BY</span> job_id</span><br><span class="line">	<span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="built_in">AVG</span>(salary) <span class="keyword">DESC</span></span><br><span class="line">	LIMIT <span class="number">1</span></span><br><span class="line">);</span><br></pre></td></tr></tbody></table></figure>

<p><strong>案例5</strong>：查询平均工资高于公司平均工资的部门有哪些?  </p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 一、查询公司的平均工资</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">AVG</span>(salary)</span><br><span class="line"><span class="keyword">FROM</span> employees;</span><br><span class="line"><span class="comment">-- 二、查询每个部门的平均工资</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">AVG</span>(salary)</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id;</span><br><span class="line"><span class="comment">-- 三、筛选二、的结果集，满足平均工资&gt;一的结果</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p><strong>案例6</strong>：查询出公司中所有 manager 的详细信息。</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 一、查询所有manager的员工编号</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> manager_id</span><br><span class="line"><span class="keyword">FROM</span> employees;</span><br><span class="line"><span class="comment">-- 二、查询详细信息，满足employee_id=1的结果</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> employee_id <span class="operator">=</span> <span class="keyword">ANY</span>(</span><br><span class="line">	<span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> manager_id</span><br><span class="line">	<span class="keyword">FROM</span> employees</span><br><span class="line">);</span><br></pre></td></tr></tbody></table></figure>

<p><strong>案例7</strong>：各个部门中 最高工资中最低的那个部门的 最低工资是多少  。</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 一、查询各部门的最高工资</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">MAX</span>(salary)</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id;</span><br><span class="line"><span class="comment">-- 二、找一、结果集中最低的那个</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">MAX</span>(salary)</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="built_in">MAX</span>(salary)</span><br><span class="line">LIMIT <span class="number">1</span>;</span><br><span class="line"><span class="comment">-- 三、查询哪个部门的最高工资等于二、结果，</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">MIN</span>(salary),department_id</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> department_id <span class="operator">=</span> (</span><br><span class="line">	<span class="keyword">SELECT</span> department_id</span><br><span class="line">	<span class="keyword">FROM</span> employees</span><br><span class="line">	<span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id</span><br><span class="line">	<span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="built_in">MAX</span>(salary)</span><br><span class="line">	LIMIT <span class="number">1</span></span><br><span class="line">);</span><br></pre></td></tr></tbody></table></figure>

<p><strong>案例8</strong>：查询平均工资最高的部门的 manager 的详细信息: last_name, department_id, email,<br>salary 。</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 一、找到平均工资最高的部门编号</span></span><br><span class="line"><span class="keyword">SELECT</span> department_id</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="built_in">AVG</span>(salary) <span class="keyword">DESC</span></span><br><span class="line">LIMIT <span class="number">1</span>;</span><br><span class="line"><span class="comment">-- 二、将employees和departments连接查询，筛选条件是一、的结果</span></span><br><span class="line"><span class="keyword">SELECT</span> last_name,d.department_id,email,salary</span><br><span class="line"><span class="keyword">FROM</span> employees e</span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> departments d </span><br><span class="line"><span class="keyword">ON</span> d.`manager_id` <span class="operator">=</span> e.`employee_id`</span><br><span class="line"><span class="keyword">WHERE</span> d.`department_id`<span class="operator">=</span>(</span><br><span class="line">	<span class="keyword">SELECT</span> department_id</span><br><span class="line">	<span class="keyword">FROM</span> employees</span><br><span class="line">	<span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id</span><br><span class="line">	<span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="built_in">AVG</span>(salary) <span class="keyword">DESC</span></span><br><span class="line">	LIMIT <span class="number">1</span></span><br><span class="line">);</span><br></pre></td></tr></tbody></table></figure>



<h3 id="分页查询"><a href="#分页查询" class="headerlink" title="分页查询"></a>分页查询</h3><p><strong>应用场景</strong>：当要显示的数据，一页显示不全时，需要分页提交sql请求。</p>
<p><strong>语法</strong>：</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> 查询列表</span><br><span class="line"><span class="keyword">from</span> 表</span><br><span class="line">【<span class="keyword">join</span> type <span class="keyword">join</span> 表<span class="number">2</span></span><br><span class="line"><span class="keyword">on</span> 连接条件</span><br><span class="line"><span class="keyword">where</span> 筛选条件</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> 分组字段</span><br><span class="line"><span class="keyword">having</span> 分组后的筛选</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> 排序的字段】</span><br><span class="line">limit <span class="keyword">offset</span>,size;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- offset表示要显示条目的起始索引（起始索引从0开始）</span></span><br><span class="line"><span class="comment">-- size表示要显示的条目个数</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--执行顺序：from表先走，再inner join on,再去筛选，再去group by，再去having，再走select，然后order by，最后执行limit</span></span><br></pre></td></tr></tbody></table></figure>

<p><strong>特点</strong>：</p>
<ul>
<li><p>limit语句放在查询语句的最后；</p>
</li>
<li><p>在web开发的分页显示中会用到下面的公式：</p>
<ul>
<li><p>要显示的页数page，每页的条目数size</p>
</li>
<li><pre><code>select 查询列表
from 表
limit (page-1)*size,size;
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">**案例1**：查询前5条员工信息。</span><br><span class="line"></span><br><span class="line">```sql</span><br><span class="line">SELECT * FROM employees LIMIT 0,5;</span><br></pre></td></tr></tbody></table></figure>
</code></pre>
</li>
</ul>
</li>
</ul>
<p><strong>案例2</strong>：查询第11条到第25条员工信息。</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> employees LIMIT <span class="number">10</span>,<span class="number">15</span>;</span><br></pre></td></tr></tbody></table></figure>

<p><strong>案例3</strong>：查询有奖金的员工信息，并且工资较高的前10名显示出来。</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> employees <span class="keyword">WHERE</span> commission_pct <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">ORDER</span> <span class="keyword">BY</span> salary <span class="keyword">DESC</span> LIMIT <span class="number">10</span>;</span><br></pre></td></tr></tbody></table></figure>

<h3 id="union联合查询"><a href="#union联合查询" class="headerlink" title="union联合查询"></a>union联合查询</h3><p><strong>union联合，合并</strong>：将多条查询语句的结果合成一个结果。</p>
<p><strong>语法</strong>：</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">查询语句<span class="number">1</span></span><br><span class="line"><span class="keyword">union</span></span><br><span class="line">查询语句<span class="number">2</span></span><br><span class="line"><span class="keyword">union</span></span><br><span class="line">...</span><br></pre></td></tr></tbody></table></figure>

<p><strong>引入的案例</strong>：查询部门编号&gt;90或邮箱中包含a的员工信息。</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> employees <span class="keyword">WHERE</span> email <span class="keyword">LIKE</span> <span class="string">'%a%'</span></span><br><span class="line"><span class="keyword">UNION</span> </span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> employees <span class="keyword">WHERE</span> department_id<span class="operator">&gt;</span><span class="number">90</span>;</span><br></pre></td></tr></tbody></table></figure>

<p><strong>应用场景</strong>：</p>
<p>要查询的结果来自于多个表，且多个表没有直接的连接关系，但查询的信息一致（表示列字段意义差不多）时。</p>
<p><strong>特点</strong>：</p>
<ul>
<li>要求多条查询语句的查询列数是一致的。</li>
<li>要求多条查询语句的查询的每一列的类型和顺序最好一致。</li>
<li>union关键字默认去重，如果使用union all，就可以包含重复项。</li>
</ul>
<h2 id="十、DML语言的学习"><a href="#十、DML语言的学习" class="headerlink" title="十、DML语言的学习"></a>十、DML语言的学习</h2><h3 id="插入语句"><a href="#插入语句" class="headerlink" title="插入语句"></a>插入语句</h3><p><strong>语法</strong>：</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 方式一、</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> 表名(字段名，...)</span><br><span class="line"><span class="keyword">values</span>(值<span class="number">1</span>，...);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 方式二、</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> 表名</span><br><span class="line"><span class="keyword">set</span> 列名<span class="operator">=</span>值,列名<span class="operator">=</span>值,...</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 方式一支持插入多行数据，方式二不支持</span></span><br><span class="line"><span class="comment">-- 方式一支持子查询，方式二不支持</span></span><br></pre></td></tr></tbody></table></figure>

<p>特点：</p>
<ul>
<li>字段类型和值类型一致或兼容，而且一一对应；</li>
<li>可以为空的字段，可以不用插入值，或用null填充；</li>
<li>不可以为空的字段，必须插入值；</li>
<li>字段个数和值的个数必须一致；</li>
<li>字段可以省略，但默认所有字段，并且顺序和表中的存储顺序一致；</li>
</ul>
<h3 id="修改语句"><a href="#修改语句" class="headerlink" title="修改语句"></a>修改语句</h3><p><strong>语法</strong>：</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 修改单表语法：</span></span><br><span class="line"><span class="keyword">update</span> 表名 <span class="keyword">set</span> 字段<span class="operator">=</span>新值,字段<span class="operator">=</span>新值</span><br><span class="line">【<span class="keyword">where</span> 条件】</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 修改多表语法【补充】：</span></span><br><span class="line"><span class="comment">-- sql92语法</span></span><br><span class="line"><span class="keyword">update</span> 表<span class="number">1</span> 别名<span class="number">1</span>,表<span class="number">2</span> 别名<span class="number">2</span></span><br><span class="line"><span class="keyword">set</span> 字段<span class="operator">=</span>新值，字段<span class="operator">=</span>新值</span><br><span class="line"><span class="keyword">where</span> 连接条件</span><br><span class="line"><span class="keyword">and</span> 筛选条件</span><br><span class="line"><span class="comment">--sql99语法</span></span><br><span class="line"><span class="keyword">update</span> 表<span class="number">1</span> 别名</span><br><span class="line"><span class="keyword">inner</span><span class="operator">|</span><span class="keyword">left</span><span class="operator">|</span><span class="keyword">right</span> <span class="keyword">join</span> 表<span class="number">2</span> 别名</span><br><span class="line"><span class="keyword">on</span> 连接条件</span><br><span class="line"><span class="keyword">set</span> 列<span class="operator">=</span>值,...</span><br><span class="line"><span class="keyword">where</span> 筛选条件</span><br></pre></td></tr></tbody></table></figure>

<p><strong>修改多表记录案例：</strong></p>
<p><strong>案例1</strong>：修改张无忌的女朋友的手机号为114。</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> boys bo</span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> beauty b</span><br><span class="line"><span class="keyword">ON</span> bo.`id`<span class="operator">=</span>b.`boyfriend_id`</span><br><span class="line"><span class="keyword">SET</span> b.`phone`<span class="operator">=</span><span class="string">'114'</span></span><br><span class="line"><span class="keyword">WHERE</span> bo.`boyName`<span class="operator">=</span><span class="string">'张无忌'</span>;</span><br></pre></td></tr></tbody></table></figure>

<p><strong>案例2</strong>：修改没有男朋友的女神的男朋友编号为2号。</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> boys bo</span><br><span class="line"><span class="keyword">RIGHT</span> <span class="keyword">JOIN</span> beauty b </span><br><span class="line"><span class="keyword">ON</span> bo.`id`<span class="operator">=</span>b.`boyfriend_id`</span><br><span class="line"><span class="keyword">SET</span> b.`boyfriend_id`<span class="operator">=</span><span class="number">2</span></span><br><span class="line"><span class="keyword">WHERE</span> bo.`id` <span class="keyword">IS</span> <span class="keyword">NULL</span>;</span><br></pre></td></tr></tbody></table></figure>

<h3 id="删除语句"><a href="#删除语句" class="headerlink" title="删除语句"></a>删除语句</h3><p><strong>语法</strong>：</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--方式一：delete语句</span></span><br><span class="line"><span class="comment">-- 单表删除</span></span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> 表名 【<span class="keyword">where</span> 筛选条件】</span><br><span class="line"><span class="comment">-- 不加where的时候会清空该表</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 多表删除【补充】</span></span><br><span class="line"><span class="comment">--sql92语法</span></span><br><span class="line"><span class="keyword">delete</span> 别名<span class="number">1</span>，别名<span class="number">2</span></span><br><span class="line"><span class="keyword">from</span> 表<span class="number">1</span> 别名<span class="number">1</span>，表<span class="number">2</span> 别名<span class="number">2</span></span><br><span class="line"><span class="keyword">where</span> 连接条件</span><br><span class="line"><span class="keyword">and</span> 筛选条件;</span><br><span class="line"><span class="comment">--sql99语法</span></span><br><span class="line"><span class="keyword">delete</span> 表<span class="number">1</span>的别名,表<span class="number">2</span>的别名</span><br><span class="line"><span class="keyword">from</span> 表<span class="number">1</span> 别名</span><br><span class="line"><span class="keyword">inner</span><span class="operator">|</span><span class="keyword">left</span><span class="operator">|</span><span class="keyword">right</span> <span class="keyword">join</span> 表<span class="number">2</span> 别名</span><br><span class="line"><span class="keyword">where</span> 筛选条件;</span><br><span class="line"></span><br><span class="line"><span class="comment">--方式二：truncate语句（不允许加where）</span></span><br><span class="line"><span class="keyword">truncate</span> <span class="keyword">table</span> 表名</span><br><span class="line"><span class="comment">--执行它后会清空该表</span></span><br></pre></td></tr></tbody></table></figure>

<p><strong>两种方式的区别</strong>：</p>
<ul>
<li>truncate不能加where条件，而delete可以加where条件</li>
<li>truncate的效率高一丢丢</li>
<li>truncate 删除带自增长的列的表后，如果再插入数据，数据从1开始；delete 删除带自增长列的表后，如果再插入数据，数据从上一次的断点处开始</li>
<li>truncate删除不能回滚，delete删除可以回滚</li>
</ul>
<p><strong>多表的删除案例</strong>：</p>
<ul>
<li><p>案例：删除张无忌的女朋友信息。</p>
<ul>
<li><pre><code class="sql">DELETE b
FROM beauty b
INNER JOIN boys bo ON b.`boyfriend_id`=bo.`id`
WHERE bo.`boyName`='张无忌';
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 案例：删除黄晓明的信息以及他女朋友的信息。</span><br><span class="line"></span><br><span class="line">  - ```sql</span><br><span class="line">    DELETE b,bo</span><br><span class="line">    FROM beauty b</span><br><span class="line">    INNER JOIN boys bo ON b.`boyfriend_id`=bo.`id`</span><br><span class="line">    WHERE bo.`boyName`='黄晓明';</span><br></pre></td></tr></tbody></table></figure>
</code></pre>
</li>
</ul>
</li>
</ul>
<h2 id="十一、DDL语言的学习"><a href="#十一、DDL语言的学习" class="headerlink" title="十一、DDL语言的学习"></a>十一、DDL语言的学习</h2><p>也称为数据定义语言，包括库和表的管理。</p>
<ul>
<li>库的管理<ul>
<li>创建</li>
<li>修改</li>
<li>删除</li>
</ul>
</li>
<li>表的管理<ul>
<li>创建</li>
<li>修改</li>
<li>删除</li>
</ul>
</li>
</ul>
<p>创建：create；</p>
<p>修改：alter；</p>
<p>删除：drop。</p>
<h3 id="库的管理"><a href="#库的管理" class="headerlink" title="库的管理"></a>库的管理</h3><h4 id="1-库的创建"><a href="#1-库的创建" class="headerlink" title="1.库的创建"></a>1.库的创建</h4><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> database [if <span class="keyword">not</span> <span class="keyword">exists</span>]库名;</span><br></pre></td></tr></tbody></table></figure>

<p>案例：创建库Books。</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 加IF NOT EXISTS是为了避免当存在那个库时再创建会报错</span></span><br><span class="line"><span class="keyword">CREATE</span> DATABASE IF <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> books;</span><br></pre></td></tr></tbody></table></figure>

<h4 id="2-库的修改"><a href="#2-库的修改" class="headerlink" title="2.库的修改"></a>2.库的修改</h4><p>更改库的字符集</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> DATABASE books <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8;</span><br></pre></td></tr></tbody></table></figure>

<h4 id="3-库的删除"><a href="#3-库的删除" class="headerlink" title="3.库的删除"></a>3.库的删除</h4><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 加if exists是为了避免删除不存在的库报错</span></span><br><span class="line"><span class="keyword">drop</span> database [if <span class="keyword">exists</span>] 库名</span><br></pre></td></tr></tbody></table></figure>

<p><strong>案例</strong>：删除库Books。</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> DATABASE IF <span class="keyword">EXISTS</span> books;</span><br></pre></td></tr></tbody></table></figure>

<h3 id="表的管理"><a href="#表的管理" class="headerlink" title="表的管理"></a>表的管理</h3><h4 id="1-表的创建"><a href="#1-表的创建" class="headerlink" title="1.表的创建"></a>1.表的创建</h4><p><strong>语法</strong>：</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> 表名(</span><br><span class="line">	列名 列的类型【(长度)约束】,</span><br><span class="line">    列名 列的类型【(长度)约束】,</span><br><span class="line">	列名 列的类型【(长度)约束】,</span><br><span class="line">    ...</span><br><span class="line">    列名 列的类型【(长度)约束】</span><br><span class="line">);</span><br></pre></td></tr></tbody></table></figure>

<p><strong>案例</strong>：创建表Book。</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 加IF NOT EXISTS是为了增强容错性</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> IF <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> book(</span><br><span class="line">	id <span class="type">INT</span>,#编号</span><br><span class="line">	bName <span class="type">VARCHAR</span>(<span class="number">20</span>),#图书名</span><br><span class="line">	price <span class="keyword">DOUBLE</span>,#价格</span><br><span class="line">	authorId <span class="type">INT</span>,#作者</span><br><span class="line">	publishDate DATETIME #出版日期</span><br><span class="line">);</span><br></pre></td></tr></tbody></table></figure>

<p><strong>案例</strong>：创建表author。</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> author(</span><br><span class="line">	id <span class="type">INT</span>,#编号</span><br><span class="line">	au_name <span class="type">VARCHAR</span>(<span class="number">20</span>),</span><br><span class="line">	nation <span class="type">VARCHAR</span>(<span class="number">10</span>) #国籍</span><br><span class="line">);</span><br></pre></td></tr></tbody></table></figure>

<h4 id="2-表的修改"><a href="#2-表的修改" class="headerlink" title="2.表的修改"></a>2.表的修改</h4><p>语法：</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> 表名 <span class="keyword">add</span><span class="operator">|</span><span class="keyword">drop</span><span class="operator">|</span>modify<span class="operator">|</span>change <span class="keyword">column</span> 字段名【字段类型 约束】;</span><br></pre></td></tr></tbody></table></figure>

<p><strong>作用范围</strong>：</p>
<ul>
<li><p>可以修改列名</p>
<ul>
<li><p>将表book的publishdate字段修改成pubDate，注意后面还要加上类型。</p>
</li>
<li><pre><code class="sql">ALTER TABLE book CHANGE COLUMN publishdate pubDate DATETIME;
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 修改列的类型或约束</span><br><span class="line"></span><br><span class="line">  - ```sql</span><br><span class="line">    -- 注意它不区分大小写</span><br><span class="line">    ALTER TABLE book MODIFY COLUMN pubdate TIMESTAMP;</span><br></pre></td></tr></tbody></table></figure>
</code></pre>
</li>
</ul>
</li>
<li><p>添加新列</p>
<ul>
<li><pre><code class="sql">-- 注意类型也要写上
ALTER TABLE author ADD COLUMN annual DOUBLE;
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 删除列</span><br><span class="line"></span><br><span class="line">  - ```sql</span><br><span class="line">    ALTER TABLE author DROP COLUMN annual;</span><br></pre></td></tr></tbody></table></figure>
</code></pre>
</li>
</ul>
</li>
<li><p>修改表名</p>
<ul>
<li><pre><code class="sql">ALTER TABLE author RENAME TO book_author;
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">#### 3.表的删除</span><br><span class="line"></span><br><span class="line">```sql</span><br><span class="line">-- 加IF EXISTS是为了容错性</span><br><span class="line">DROP TABLE IF EXISTS book_author;</span><br></pre></td></tr></tbody></table></figure>
</code></pre>
</li>
</ul>
</li>
</ul>
<h3 id="表的复制"><a href="#表的复制" class="headerlink" title="表的复制"></a>表的复制</h3><h4 id="1-仅仅复制表的结构"><a href="#1-仅仅复制表的结构" class="headerlink" title="1.仅仅复制表的结构"></a>1.仅仅复制表的结构</h4><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 创建一个copy表，复制author表的结构</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="keyword">copy</span> <span class="keyword">LIKE</span> author;</span><br></pre></td></tr></tbody></table></figure>

<h4 id="2-复制表的结构-数据"><a href="#2-复制表的结构-数据" class="headerlink" title="2.复制表的结构+数据"></a>2.复制表的结构+数据</h4><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> copy2</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> author;</span><br></pre></td></tr></tbody></table></figure>

<p>只复制部分数据:</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> copy3</span><br><span class="line"><span class="keyword">SELECT</span> id,au_name</span><br><span class="line"><span class="keyword">FROM</span> author</span><br><span class="line"><span class="keyword">WHERE</span> nation<span class="operator">=</span><span class="string">'中国'</span>;</span><br></pre></td></tr></tbody></table></figure>

<p>仅仅复制某些字段(不复制数据)：</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> copy4</span><br><span class="line"><span class="keyword">SELECT</span> id,au_name</span><br><span class="line"><span class="keyword">FROM</span> author</span><br><span class="line"><span class="keyword">WHERE</span> <span class="number">1</span><span class="operator">=</span><span class="number">2</span>;</span><br><span class="line"><span class="comment">-- 或</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> copy4</span><br><span class="line"><span class="keyword">SELECT</span> id,au_name</span><br><span class="line"><span class="keyword">FROM</span> author</span><br><span class="line"><span class="keyword">WHERE</span> <span class="number">0</span>;</span><br></pre></td></tr></tbody></table></figure>

<h3 id="常见的数据类型"><a href="#常见的数据类型" class="headerlink" title="常见的数据类型"></a>常见的数据类型</h3><ul>
<li>数值型<ul>
<li>整型</li>
<li>小数<ul>
<li>定点数</li>
<li>浮点数</li>
</ul>
</li>
</ul>
</li>
<li>字符型<ul>
<li>较短的文本：char、varchar</li>
<li>较长的文本：text、blob(较长的二进制数据)</li>
</ul>
</li>
<li>日期型</li>
</ul>
<h4 id="1-整型"><a href="#1-整型" class="headerlink" title="1.整型"></a>1.整型</h4><p><strong>特点</strong>：</p>
<ul>
<li><p>如果不设置无符号还是有符号，默认时有符号，如果想设置无符号，则需要添加unsigned 关键字。</p>
</li>
<li><p>如果插入的数值超出了整型的范围，会报out of range异常，并且插入临界值。</p>
</li>
<li><p>如果不设置长度，会有默认的长度。</p>
</li>
<li><p>长度代表了显示的最大宽度，如果不够会用0在左边填充，但在创建表时需要搭配zerofill使用。如：</p>
<ul>
<li><pre><code class="sql">CREATE TABLE tab_int(
    t1 INT(7) ZEROFILL,
    t2 INT(7) ZEROFILL 
);
-- 但这样就不能插入负数了
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">案例：如何设置无符号和有符号。</span><br><span class="line"></span><br><span class="line">```sql</span><br><span class="line">CREATE TABLE tab_int(</span><br><span class="line">	t1 INT,</span><br><span class="line">	t2 INT UNSIGNED</span><br><span class="line">);</span><br></pre></td></tr></tbody></table></figure>
</code></pre>
</li>
</ul>
</li>
</ul>
<h4 id="2-小数"><a href="#2-小数" class="headerlink" title="2.小数"></a>2.小数</h4><p><strong>浮点型</strong>：</p>
<p><code>float(M,D)</code></p>
<p><code>double(M,D)</code></p>
<p><strong>定点型</strong>：</p>
<p><code>dec(M,D)</code></p>
<p><code>decimal(M,D)</code></p>
<p><strong>特点</strong>：</p>
<ul>
<li>M代表整数部位+小数部位的长度</li>
<li>D代表小数部位的长度</li>
<li>如果超出范围，则插入临界值</li>
<li>如果没有特殊要求的话，M和D可以省略</li>
<li>如果是decimal，则M默认为0，D默认为0</li>
<li>如果是float和double，则会根据插入的数值的精度来决定精度.</li>
<li>定点型的精确度较高，如果要求插入数值的精度较高比如货币运算，则用定点型的。</li>
</ul>
<p><strong>原则</strong>：</p>
<p>所选择的类型越简单越好，能保存数值的类型越小越好。</p>
<h4 id="3-字符型"><a href="#3-字符型" class="headerlink" title="3.字符型"></a>3.字符型</h4><ul>
<li>较短的文本：char、varchar</li>
<li>较长的文本：text、blob(较长的二进制数据)</li>
<li>其他：<ul>
<li>binary和varbinary用于保存较短的二进制</li>
<li>enum用于保存枚举</li>
<li>set用于保存集合</li>
</ul>
</li>
</ul>
<p>char代表固定长度的字符，varchar代表可变长度的字符。可以和char、string类比。</p>
<h4 id="4-日期型"><a href="#4-日期型" class="headerlink" title="4.日期型"></a>4.日期型</h4><h3 id="常见约束"><a href="#常见约束" class="headerlink" title="常见约束"></a>常见约束</h3><h4 id="约束的含义："><a href="#约束的含义：" class="headerlink" title="约束的含义："></a><strong>约束的含义</strong>：</h4><p>一种限制，用于限制表中的数据，为了保证表中的数据的准确和可靠性。</p>
<h4 id="分类："><a href="#分类：" class="headerlink" title="分类："></a><strong>分类</strong>：</h4><ul>
<li>NOT NULL ：非空，用于保证该字段的值不能为空，比如姓名、学号等；</li>
<li>DEFAULT：默认，用于保证该字段有默认值，比如性别；</li>
<li>PRIMARY KEY：主键，用于保证该字段的值具有唯一性，并且非空，比如学号、员工编号等；</li>
<li>UNIQUE：唯一，用于保证该字段的值具有唯一性，可以为空，比如座位号；</li>
<li>CHECK：检查约束【mysql中不支持】</li>
<li>FOREIGN KEY：外键，用于限制两个表的关系，用于保证该字段的值必须来自于主表的关联列的值。<ul>
<li>注意是在从表中添加外键约束，用于引用主表中某列的值。比如学生表的专业编号，员工表的部门编号，员工表的工种编号。</li>
<li>从表的外键列的类型要求和主表中对应的列的类型一致。名称无要求。</li>
<li>主表的关联列必须是一个key(一般是主键、唯一键)</li>
<li>==插入数据时，先插入主表，再插入从表的数据。删除数据时先删除从表，再删除主表。==</li>
</ul>
</li>
</ul>
<h4 id="添加约束的时机："><a href="#添加约束的时机：" class="headerlink" title="添加约束的时机："></a><strong>添加约束的时机</strong>：</h4><ul>
<li>创建表时</li>
<li>修改表时</li>
</ul>
<h4 id="约束的添加分类："><a href="#约束的添加分类：" class="headerlink" title="约束的添加分类："></a><strong>约束的添加分类</strong>：</h4><ul>
<li>列级约束<ul>
<li>六大约束语法上都支持，但外键约束没有效果；</li>
</ul>
</li>
<li>表级约束<ul>
<li>除了非空(NOT NULL)、默认(DEFAULT)，其他的都支持；</li>
</ul>
</li>
</ul>
<h4 id="创建表时添加约束"><a href="#创建表时添加约束" class="headerlink" title="创建表时添加约束"></a>创建表时添加约束</h4><h5 id="1-添加列级约束"><a href="#1-添加列级约束" class="headerlink" title="1.添加列级约束"></a>1.添加列级约束</h5><p><strong>语法</strong>：</p>
<ul>
<li>直接在字段名和类型后面追加约束类型即可。</li>
<li>只支持默认、非空、主键、唯一。</li>
</ul>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> major(</span><br><span class="line">	id <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line">	majorName <span class="type">VARCHAR</span>(<span class="number">20</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">--尽管这里写了外键约束，但由于在列级约束中外键约束没有效果，故这里没有效果。</span></span><br><span class="line"><span class="comment">--这个check在mysql不支持</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> stuinfo(</span><br><span class="line">	id <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY,#主键</span><br><span class="line">	stuName <span class="type">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,#非空约束</span><br><span class="line">	gender <span class="type">CHAR</span>(<span class="number">1</span>) <span class="keyword">CHECK</span>(gender<span class="operator">=</span><span class="string">'男'</span> <span class="keyword">OR</span> gender<span class="operator">=</span><span class="string">'女'</span>),#检查约束</span><br><span class="line">	seat <span class="type">INT</span> <span class="keyword">UNIQUE</span>,#唯一约束</span><br><span class="line">	age <span class="type">INT</span> <span class="keyword">DEFAULT</span> <span class="number">18</span>,#默认约束</span><br><span class="line">	majorId <span class="type">INT</span> <span class="keyword">REFERENCES</span> major(id)#外键约束</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查看stuinfo表中所有的索引，包括主键、外键、唯一</span></span><br><span class="line"><span class="keyword">SHOW</span> INDEX <span class="keyword">FROM</span> stuinfo;</span><br></pre></td></tr></tbody></table></figure>

<h5 id="2-添加表级约束"><a href="#2-添加表级约束" class="headerlink" title="2.添加表级约束"></a>2.添加表级约束</h5><p>语法：</p>
<p>在各个字段的最下面</p>
<p><code>【constraint 约束名】 约束类型(字段名)</code> </p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> stuinfo;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> stuinfo(</span><br><span class="line">	id <span class="type">INT</span>,</span><br><span class="line">	stuname <span class="type">VARCHAR</span>(<span class="number">20</span>),</span><br><span class="line">	gender <span class="type">CHAR</span>(<span class="number">1</span>),</span><br><span class="line">	seat <span class="type">INT</span>,</span><br><span class="line">	age <span class="type">INT</span>,</span><br><span class="line">	majorid <span class="type">INT</span>,</span><br><span class="line">	<span class="keyword">CONSTRAINT</span> pk <span class="keyword">PRIMARY</span> KEY(id),#主键</span><br><span class="line">	<span class="keyword">CONSTRAINT</span> uq <span class="keyword">UNIQUE</span>(seat),#唯一键</span><br><span class="line">	<span class="keyword">CONSTRAINT</span> ck <span class="keyword">CHECK</span>(genger <span class="operator">=</span> <span class="string">'男'</span> <span class="keyword">OR</span> gender <span class="operator">=</span> <span class="string">'女'</span>),#检查约束</span><br><span class="line">	<span class="keyword">CONSTRAINT</span> fk_stuinfo_major <span class="keyword">FOREIGN</span> KEY(majorid) <span class="keyword">REFERENCES</span> major(id)#外键</span><br><span class="line"></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 或者这样写</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> stuinfo;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> stuinfo(</span><br><span class="line">	id <span class="type">INT</span>,</span><br><span class="line">	stuname <span class="type">VARCHAR</span>(<span class="number">20</span>),</span><br><span class="line">	gender <span class="type">CHAR</span>(<span class="number">1</span>),</span><br><span class="line">	seat <span class="type">INT</span>,</span><br><span class="line">	age <span class="type">INT</span>,</span><br><span class="line">	majorid <span class="type">INT</span>,</span><br><span class="line">	<span class="keyword">PRIMARY</span> KEY(id),#主键</span><br><span class="line">	<span class="keyword">UNIQUE</span>(seat),#唯一键</span><br><span class="line">	<span class="keyword">CHECK</span>(genger <span class="operator">=</span> <span class="string">'男'</span> <span class="keyword">OR</span> gender <span class="operator">=</span> <span class="string">'女'</span>),#检查约束</span><br><span class="line">	<span class="keyword">FOREIGN</span> KEY(majorid) <span class="keyword">REFERENCES</span> major(id)#外键</span><br><span class="line">);</span><br></pre></td></tr></tbody></table></figure>

<h5 id="3-通用的写法："><a href="#3-通用的写法：" class="headerlink" title="3.通用的写法："></a>3.通用的写法：</h5><p>也就是说可以用列级约束的那样子写的就用列级约束写，否则就用表级约束去写。</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> IF <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> stuinfo(</span><br><span class="line">	id <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line">	studname <span class="type">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">	sex <span class="type">CHAR</span>(<span class="number">1</span>),</span><br><span class="line">	age <span class="type">INT</span> <span class="keyword">DEFAULT</span> <span class="number">18</span>,</span><br><span class="line">	seat <span class="type">INT</span> <span class="keyword">UNIQUE</span>,</span><br><span class="line">	majorid <span class="type">INT</span>,</span><br><span class="line">	<span class="keyword">CONSTRAINT</span> fk_stuinfo_major <span class="keyword">FOREIGN</span> KEY(majorid) <span class="keyword">REFERENCES</span> major(id)</span><br><span class="line">);</span><br></pre></td></tr></tbody></table></figure>

<h4 id="修改表时添加约束"><a href="#修改表时添加约束" class="headerlink" title="修改表时添加约束"></a>修改表时添加约束</h4><h5 id="语法-2"><a href="#语法-2" class="headerlink" title="语法"></a>语法</h5><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 1. 添加列级约束</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> 表名 modify <span class="keyword">column</span> 字段名 字段类型 新约束</span><br><span class="line"><span class="comment">-- 2. 添加表级约束</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> 表名 <span class="keyword">add</span> 【<span class="keyword">constraint</span> 约束名】 约束类型(字段名) 【外键的引用】</span><br></pre></td></tr></tbody></table></figure>



<h5 id="1-添加非空约束"><a href="#1-添加非空约束" class="headerlink" title="1.添加非空约束"></a>1.添加非空约束</h5><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 这里为了举例，先重新创建一个表</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> stuinfo;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> stuinfo(</span><br><span class="line">	id <span class="type">INT</span>,</span><br><span class="line">	stuname <span class="type">VARCHAR</span>(<span class="number">20</span>),</span><br><span class="line">	gender <span class="type">CHAR</span>(<span class="number">1</span>),</span><br><span class="line">	seat <span class="type">INT</span>,</span><br><span class="line">	age <span class="type">INT</span>,</span><br><span class="line">	majorid <span class="type">INT</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 将stuname字段添加非空约束</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> stuinfo MODIFY <span class="keyword">COLUMN</span> stuname <span class="type">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>;</span><br></pre></td></tr></tbody></table></figure>

<h5 id="2-添加默认约束"><a href="#2-添加默认约束" class="headerlink" title="2.添加默认约束"></a>2.添加默认约束</h5><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 将age字段添加默认约束</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> stuinfo MODIFY <span class="keyword">COLUMN</span> age <span class="type">INT</span> <span class="keyword">DEFAULT</span> <span class="number">18</span>;</span><br></pre></td></tr></tbody></table></figure>

<h5 id="3-添加主键"><a href="#3-添加主键" class="headerlink" title="3.添加主键"></a>3.添加主键</h5><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 将id字段添加主键约束</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> stuinfo MODIFY <span class="keyword">COLUMN</span> id <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY;</span><br><span class="line"><span class="comment">--或者这么写</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> stuinfo <span class="keyword">ADD</span> <span class="keyword">PRIMARY</span> KEY(id);</span><br></pre></td></tr></tbody></table></figure>

<h5 id="4-添加唯一"><a href="#4-添加唯一" class="headerlink" title="4.添加唯一"></a>4.添加唯一</h5><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 将seat字段添加唯一</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> stuinfo MODIFY <span class="keyword">COLUMN</span> seat <span class="type">INT</span> <span class="keyword">UNIQUE</span>;</span><br><span class="line"><span class="comment">-- 或者这么写</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> stuinfo <span class="keyword">ADD</span> <span class="keyword">UNIQUE</span>(seat);</span><br></pre></td></tr></tbody></table></figure>

<h5 id="5-添加外键"><a href="#5-添加外键" class="headerlink" title="5.添加外键"></a>5.添加外键</h5><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 为majorid字段添加外键约束，与major表中的id字段关联</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> stuinfo <span class="keyword">ADD</span> <span class="keyword">CONSTRAINT</span> fk_stuinfo_major <span class="keyword">FOREIGN</span> KEY(majorid) <span class="keyword">REFERENCES</span> major(id);</span><br></pre></td></tr></tbody></table></figure>

<h4 id="修改表时删除约束"><a href="#修改表时删除约束" class="headerlink" title="修改表时删除约束"></a>修改表时删除约束</h4><h5 id="1-删除非空约束"><a href="#1-删除非空约束" class="headerlink" title="1.删除非空约束"></a>1.删除非空约束</h5><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> stuinfo MODIFY <span class="keyword">COLUMN</span> stuname <span class="type">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">NULL</span>;</span><br></pre></td></tr></tbody></table></figure>

<h5 id="2-删除默认约束"><a href="#2-删除默认约束" class="headerlink" title="2.删除默认约束"></a>2.删除默认约束</h5><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> stuinfo MODIFY <span class="keyword">COLUMN</span> age <span class="type">INT</span>;</span><br></pre></td></tr></tbody></table></figure>

<h5 id="3-删除主键"><a href="#3-删除主键" class="headerlink" title="3.删除主键"></a>3.删除主键</h5><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> stuinfo <span class="keyword">DROP</span> <span class="keyword">PRIMARY</span> KEY;</span><br></pre></td></tr></tbody></table></figure>

<h5 id="4-删除唯一"><a href="#4-删除唯一" class="headerlink" title="4.删除唯一"></a>4.删除唯一</h5><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> stuinfo <span class="keyword">DROP</span> INDEX seat;</span><br><span class="line"><span class="comment">-- index后面要写什么需要先执行show index from stuinfo 查看对应的Key_name是什么,填到index后面</span></span><br></pre></td></tr></tbody></table></figure>

<h5 id="5-删除外键"><a href="#5-删除外键" class="headerlink" title="5.删除外键"></a>5.删除外键</h5><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> stuinfo <span class="keyword">DROP</span> <span class="keyword">FOREIGN</span> KEY fk_stuinfo_major;</span><br><span class="line"><span class="comment">-- foreign key 后面要写什么需要先执行show index from stuinfo 查看对应的Key_name是什么,填到key后面</span></span><br></pre></td></tr></tbody></table></figure>



<h3 id="标识列"><a href="#标识列" class="headerlink" title="标识列"></a>标识列</h3><p>又称为自增长列，可以不用手动的添加值，系统提供默认的序列值。</p>
<h4 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h4><ul>
<li>标识列必须和主键搭配吗？——&gt;  不一定，但要求是一个key，比如主键、唯一、外键;</li>
<li>一个表中可以有几个标识列？——-&gt; 至多一个;</li>
<li>标识列的类型必须是数值类型;</li>
<li>标识列可以通过<code>SET auto_increment_increment=3;</code>设置步长。也可以通过手动插入值来设置起始值。</li>
</ul>
<h4 id="创建表时设置标识列"><a href="#创建表时设置标识列" class="headerlink" title="创建表时设置标识列"></a>创建表时设置标识列</h4><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> tab_identity;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> tab_identity(</span><br><span class="line">	id <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY AUTO_INCREMENT,		<span class="comment">-- 看AUTO_INCREMENT</span></span><br><span class="line">	NAME <span class="type">VARCHAR</span>(<span class="number">20</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> tab_identity <span class="keyword">VALUES</span>(<span class="keyword">NULL</span>,<span class="string">'join'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> tab_identity(NAME) <span class="keyword">VALUES</span>(<span class="string">'tom'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> tab_identity;</span><br></pre></td></tr></tbody></table></figure>

<h4 id="修改表时设置标识列"><a href="#修改表时设置标识列" class="headerlink" title="修改表时设置标识列"></a>修改表时设置标识列</h4><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> tab_identity;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> tab_identity(</span><br><span class="line">	id <span class="type">INT</span>,</span><br><span class="line">	NAME <span class="type">VARCHAR</span>(<span class="number">20</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> tab_identity MODIFY <span class="keyword">COLUMN</span> id <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY AUTO_INCREMENT;</span><br></pre></td></tr></tbody></table></figure>

<h4 id="修改表时删除标识列"><a href="#修改表时删除标识列" class="headerlink" title="修改表时删除标识列"></a>修改表时删除标识列</h4><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> tab_identity MODIFY <span class="keyword">COLUMN</span> id <span class="type">INT</span>;</span><br></pre></td></tr></tbody></table></figure>

<h2 id="十二、TCL语言的学习"><a href="#十二、TCL语言的学习" class="headerlink" title="十二、TCL语言的学习"></a>十二、TCL语言的学习</h2><h3 id="相关概念介绍"><a href="#相关概念介绍" class="headerlink" title="相关概念介绍"></a>相关概念介绍</h3><p><strong>Transaction Control Language：事务控制语言。</strong></p>
<p><strong>事务：</strong></p>
<p>一个或一组sql语句组成一个执行单元，这个执行单元要么全部执行，要么全部不执行。</p>
<p>通过一组逻辑操作单元（一组DML——sql语句），将数据从一种状态切换到另外一种状态</p>
<p><strong>案例：转账。</strong></p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">初始时</span><br><span class="line">张三丰 <span class="number">1000</span></span><br><span class="line">郭襄   <span class="number">1000</span></span><br><span class="line"><span class="keyword">update</span> 表 <span class="keyword">set</span> 张三丰的余额<span class="operator">=</span><span class="number">500</span> <span class="keyword">where</span> name<span class="operator">=</span><span class="string">'张三丰'</span></span><br><span class="line"><span class="keyword">update</span> 表 <span class="keyword">set</span> 郭襄的余额<span class="operator">=</span><span class="number">1500</span> <span class="keyword">where</span> name<span class="operator">=</span><span class="string">'郭襄'</span></span><br></pre></td></tr></tbody></table></figure>

<p><strong>事务的ACID(acid)属性：</strong></p>
<ul>
<li>原子性：要么都执行，要么都回滚；</li>
<li>一致性：保证数据的状态操作前和操作后保持一致；</li>
<li>隔离性：多个事务同时操作相同数据库的同一个数据时，一个事务的执行不受另外一个事务的干扰；</li>
<li>持久性：一个事务一旦提交，则数据将持久化到本地，除非其他事务对其进行修改；</li>
</ul>
<p><strong>事务的分类：</strong></p>
<ul>
<li><p>隐式事务：没有明显的开启和结束事务的标志。</p>
<ul>
<li>比如insert、update、delete语句本身就是一个事务</li>
</ul>
</li>
<li><p>显式事务：具有明显的开启和结束事务的标志。</p>
<ul>
<li><p>前提：必须先设置自动提交功能(<code>autocommit</code>)为禁用。<code>SET autocommit=0;</code>不过只针对当前的事务有效。可以先执行<code>SHOW VARIABLES LIKE '%autocommit%';</code>查看一下是否已经被禁用。</p>
</li>
<li><p>步骤一：开启事务</p>
<ul>
<li><pre><code class="sql">SET autocommit=0;
START TRANSACTION;	#可选
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 步骤二：编写事务的一组逻辑操作单元（多条sql语句[比如select、insert、update、delete]）</span><br><span class="line"></span><br><span class="line">  - ```</span><br><span class="line">    语句1;</span><br><span class="line">    语句2;</span><br><span class="line">    ...</span><br></pre></td></tr></tbody></table></figure>
</code></pre>
</li>
</ul>
</li>
<li><p>步骤三：结束事务</p>
<ul>
<li><pre><code class="sql">commit;	#提交事务
rollback;#回滚事务
savepoint 节点名;	#设置保存点，联想一下断点
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">### 演示事务的使用步骤</span><br><span class="line"></span><br><span class="line">- 准备表并插入数据：</span><br><span class="line"></span><br><span class="line">  - ```sql</span><br><span class="line">    DROP TABLE IF EXISTS account;</span><br><span class="line">    </span><br><span class="line">    CREATE TABLE account(</span><br><span class="line">    id INT PRIMARY KEY AUTO_INCREMENT,</span><br><span class="line">    username VARCHAR(20),</span><br><span class="line">    balance DOUBLE</span><br><span class="line">    );</span><br><span class="line">    </span><br><span class="line">    INSERT INTO account(username,balance)</span><br><span class="line">    VALUES ('张无忌',1000),('郭襄',1000);</span><br></pre></td></tr></tbody></table></figure>
</code></pre>
</li>
</ul>
</li>
</ul>
</li>
<li><p>开启事务</p>
<ul>
<li><pre><code class="sql">SET autocommit = 0;
START TRANSACTION;	#可选
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 编写一组事务的语句</span><br><span class="line"></span><br><span class="line">  - ```sql</span><br><span class="line">    UPDATE account SET balance = 500 WHERE username='张无忌';</span><br><span class="line">    UPDATE account SET balance = 1500 WHERE username='郭襄';</span><br></pre></td></tr></tbody></table></figure>
</code></pre>
</li>
</ul>
</li>
<li><p>结束事务</p>
<ul>
<li><pre><code class="sql">COMMIT;
--如果写rollback放在commit之前，或者不写commit，会导致数据不会发生改变
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">**delete 和 truncate 在事务使用时的区别：**</span><br><span class="line"></span><br><span class="line">- 演示delete(支持回滚)</span><br><span class="line"></span><br><span class="line">  - ```sql</span><br><span class="line">    SET autocommit = 0;</span><br><span class="line">    START TRANSACTION;</span><br><span class="line">    DELETE FROM account;</span><br><span class="line">    ROLLBACK;</span><br><span class="line">    -- 回滚后发现没有删除</span><br></pre></td></tr></tbody></table></figure>
</code></pre>
</li>
</ul>
</li>
<li><p>演示truncate(不支持回滚)</p>
<ul>
<li><pre><code class="sql">SET autocommit = 0;
START TRANSACTION;
TRUNCATE TABLE account;
ROLLBACK;
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">### 事务的隔离级别</span><br><span class="line"></span><br><span class="line">#### 事务并发问题如何发生？</span><br><span class="line"></span><br><span class="line">当多个事务同时操作同一个数据库的相同数据时</span><br><span class="line"></span><br><span class="line">#### 事务的并发问题有哪些？</span><br><span class="line"></span><br><span class="line">- 脏读：一个事务读取了其他事务还没有提交的数据，读到的是其他事务“更新”的数据;</span><br><span class="line">- 不可重复读：同一个事务中，多次读取到的数据不一致;</span><br><span class="line">- 幻读：一个事务读取了其他事务还没有提交的数据，只是读到的是 其他事务“插入”的数据。</span><br><span class="line"></span><br><span class="line">#### 如何避免事务的并发问题？</span><br><span class="line"></span><br><span class="line">通过设置事务的隔离级别来避免，隔离级别有</span><br><span class="line"></span><br><span class="line">- `READ UNCOMMITTED`(读未提交数据)允许事务读取未被其他事务提交的变更，脏读、不可重复读和幻读的问题都会出现。</span><br><span class="line">- `READ COMMITTED`(读已提交数据) 只允许事务读取已经被其他事务提交的变更，可以避免脏读，但不可重复读和幻读仍然可能出现。</span><br><span class="line">- `REPEATABLE READ`(可重复读) 确保事务可以多次从一个字段中读取相同的值，在这个事务持续期间，禁止其他事务对这个字段进行更新，可以避免脏读、不可重复读和一部分幻读，但幻读的问题依旧存在。</span><br><span class="line">- `SERIALIZABLE`(串行化) 确保事务可以从一个表中读取相同的行，在这个事务持续期间，禁止其他事务对该表执行插入、更新和删除操作，所有并发问题都可以避免，但性能十分低， 可以避免脏读、不可重复读和幻读。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#### 演示事务的隔离级别</span><br><span class="line"></span><br><span class="line">```sql</span><br><span class="line">-- 用cmd命令窗口(管理员模式)操作</span><br><span class="line"></span><br><span class="line">-- 查看当前的隔离级别</span><br><span class="line">select @@tx_isolation;</span><br><span class="line"></span><br><span class="line">-- 设置隔离级别</span><br><span class="line">set session transaction isolation level 隔离级别名称;</span><br><span class="line"></span><br><span class="line">-- 操作数据库</span><br><span class="line">use 数据库名;</span><br><span class="line"></span><br><span class="line">-- 开启事务</span><br><span class="line">SET autocommit = 0;</span><br><span class="line"></span><br><span class="line">-- 编写sql语句</span><br><span class="line"></span><br><span class="line">-- 结束事务</span><br><span class="line">-- rollback; 写rollback或commit，根据具体情况决定</span><br><span class="line">commit;</span><br></pre></td></tr></tbody></table></figure>
</code></pre>
</li>
</ul>
</li>
</ul>
<h4 id="演示savepoint的使用"><a href="#演示savepoint的使用" class="headerlink" title="演示savepoint的使用"></a>演示<code>savepoint</code>的使用</h4><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SET</span> autocommit <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"><span class="keyword">START</span> TRANSACTION;		#在客户端中一般使用这条，在控制台里不需要</span><br><span class="line"></span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> account <span class="keyword">WHERE</span> id <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"><span class="keyword">SAVEPOINT</span> a; #设置保存点</span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> account <span class="keyword">WHERE</span> id <span class="operator">=</span> <span class="number">3</span>;</span><br><span class="line"><span class="keyword">ROLLBACK</span> <span class="keyword">TO</span> a;	#回滚到保存点,这样就导致id<span class="operator">=</span><span class="number">1</span>的数据删除，id<span class="operator">=</span><span class="number">3</span>的数据没有删除</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> account;</span><br></pre></td></tr></tbody></table></figure>

<h2 id="十三、视图"><a href="#十三、视图" class="headerlink" title="十三、视图"></a>十三、视图</h2><h3 id="含义："><a href="#含义：" class="headerlink" title="含义："></a>含义：</h3><p>虚拟表，和普通表一样使用。是mysql5.1版本中出现的新特性，是通过表动态生成的数据。它只保存sql逻辑，不保存查询结果。</p>
<p><strong>案例</strong>：查询姓张的学生名和专业名。</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 以前是这样写</span></span><br><span class="line"><span class="keyword">SELECT</span> stuname,majorName</span><br><span class="line"><span class="keyword">FROM</span> stuinfo s</span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> major m</span><br><span class="line"><span class="keyword">ON</span> s.`majorid`<span class="operator">=</span>m.`id`</span><br><span class="line"><span class="keyword">WHERE</span> s.`stuname` <span class="keyword">LIKE</span> <span class="string">'张%'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 学了视图后可以将主要部分封装起来</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">VIEW</span> v1</span><br><span class="line"><span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> stuname,majorName</span><br><span class="line"><span class="keyword">FROM</span> stuinfo s</span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> major m</span><br><span class="line"><span class="keyword">ON</span> s.`majorid`<span class="operator">=</span>m.`id`;</span><br><span class="line"><span class="comment">--再去使用它</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> v1 <span class="keyword">WHERE</span> stuname <span class="keyword">LIKE</span> <span class="string">'张%'</span>;</span><br></pre></td></tr></tbody></table></figure>



<h3 id="视图和表的区别"><a href="#视图和表的区别" class="headerlink" title="视图和表的区别"></a>视图和表的区别</h3><table>
<thead>
<tr>
<th align="center"></th>
<th align="center">创建语法的关键字</th>
<th align="center">占用物理空间</th>
<th align="center">使用</th>
</tr>
</thead>
<tbody><tr>
<td align="center">视图</td>
<td align="center"><code>create view</code></td>
<td align="center">不占用，仅仅保存的是sql逻辑</td>
<td align="center">增删改查，一般不能增删改</td>
</tr>
<tr>
<td align="center">表</td>
<td align="center"><code>create table</code></td>
<td align="center">占用</td>
<td align="center">增删改查</td>
</tr>
</tbody></table>
<h3 id="视图的创建"><a href="#视图的创建" class="headerlink" title="视图的创建"></a>视图的创建</h3><p><strong>语法：</strong></p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">VIEW</span>  视图名</span><br><span class="line"><span class="keyword">AS</span></span><br><span class="line">查询语句;</span><br></pre></td></tr></tbody></table></figure>

<p><strong>案例1</strong>：查询姓名中包含a字符的员工名、部门名和工种信息。</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 创建视图</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">VIEW</span> myv1</span><br><span class="line"><span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> last_name,department_name,job_title</span><br><span class="line"><span class="keyword">FROM</span> employees e</span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> departments d <span class="keyword">ON</span> e.department_id <span class="operator">=</span> d.department_id</span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> jobs j <span class="keyword">ON</span> e.job_id <span class="operator">=</span> j.job_id;</span><br><span class="line"><span class="comment">-- 使用</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> myv1 <span class="keyword">WHERE</span> last_name <span class="keyword">LIKE</span> <span class="string">'%a%'</span>;</span><br></pre></td></tr></tbody></table></figure>

<p><strong>案例2</strong>：查询各部门的平均工资级别。</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># 创建视图，查看每个部门的平均工资</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">VIEW</span> myv2</span><br><span class="line"><span class="keyword">AS</span> </span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">AVG</span>(salary) ag, department_id</span><br><span class="line"><span class="keyword">FROM</span> employees </span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id;</span><br><span class="line"># 使用</span><br><span class="line"><span class="keyword">SELECT</span> myv2.`ag`, g.grade_level  </span><br><span class="line"><span class="keyword">FROM</span> myv2 </span><br><span class="line"><span class="keyword">JOIN</span> job_grades g</span><br><span class="line"><span class="keyword">ON</span> myv2.`ag` <span class="keyword">BETWEEN</span> g.`lowest_sal` <span class="keyword">AND</span> g.`highest_sal`;</span><br></pre></td></tr></tbody></table></figure>

<p><strong>案例3</strong>：查询平均工资最低的部门信息。</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#前面已经创建过视图myv2，这里就不需要再创建</span><br><span class="line"></span><br><span class="line"># 使用</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> myv2 <span class="keyword">ORDER</span> <span class="keyword">BY</span> ag LIMIT <span class="number">1</span>;</span><br></pre></td></tr></tbody></table></figure>

<p><strong>案例4</strong>：查询平均工资最低的部门名和工资。</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># 创建视图myv3,将包含视图myv2的<span class="keyword">sql</span>操作再次封装</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">VIEW</span> myv3</span><br><span class="line"><span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> myv2 <span class="keyword">ORDER</span> <span class="keyword">BY</span> ag LIMIT <span class="number">1</span>;</span><br><span class="line"># 使用</span><br><span class="line"><span class="keyword">SELECT</span> d.<span class="operator">*</span>, m.ag</span><br><span class="line"><span class="keyword">FROM</span> myv3 m</span><br><span class="line"><span class="keyword">JOIN</span> departments d</span><br><span class="line"><span class="keyword">ON</span> m.`department_id`<span class="operator">=</span>d.`department_id`;</span><br></pre></td></tr></tbody></table></figure>

<h3 id="视图的修改"><a href="#视图的修改" class="headerlink" title="视图的修改"></a>视图的修改</h3><p><strong>语法</strong>：</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 方式一</span></span><br><span class="line">creat <span class="keyword">or</span> replace <span class="keyword">view</span> 视图名</span><br><span class="line"><span class="keyword">as</span></span><br><span class="line">查询语句;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 方式二</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">view</span> 视图名</span><br><span class="line"><span class="keyword">as</span> </span><br><span class="line">查询语句;</span><br></pre></td></tr></tbody></table></figure>

<h3 id="视图的删除"><a href="#视图的删除" class="headerlink" title="视图的删除"></a>视图的删除</h3><p><strong>语法</strong>：</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">drop view 视图名,视图名,...;</span><br></pre></td></tr></tbody></table></figure>

<h3 id="视图的查看"><a href="#视图的查看" class="headerlink" title="视图的查看"></a>视图的查看</h3><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 这里说的查看是指查看它的结构</span></span><br><span class="line"><span class="keyword">desc</span> 视图名;</span><br></pre></td></tr></tbody></table></figure>

<h3 id="视图的更新"><a href="#视图的更新" class="headerlink" title="视图的更新"></a>视图的更新</h3><p>==注意这里的更新是指更改视图中的数据。==</p>
<p>其余的就可以，语法和普通表的一样。更新包括插入、删除、修改。</p>
<h3 id="案例"><a href="#案例" class="headerlink" title="案例"></a>案例</h3><p><strong>案例1</strong>：创建视图<code>emp_v1</code>，要求查询电话号码以<code>011</code>开头的员工姓名和工资、邮箱。</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">OR</span> REPLACE <span class="keyword">VIEW</span> emp_v1</span><br><span class="line"><span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> last_name,salary,email</span><br><span class="line"><span class="keyword">FROM</span> employees e</span><br><span class="line"><span class="keyword">WHERE</span> phone_number <span class="keyword">LIKE</span> <span class="string">'011%'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> emp_v1;	</span><br></pre></td></tr></tbody></table></figure>

<p><strong>案例2</strong>：创建视图<code>emp_v2</code>，要求查询部门的最高工资高于12000的部门信息。</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">OR</span> REPLACE <span class="keyword">VIEW</span> emp_v2</span><br><span class="line"><span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">MAX</span>(salary) mx, department_id</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id</span><br><span class="line"><span class="keyword">HAVING</span> mx <span class="operator">&gt;</span> <span class="number">12000</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> d.<span class="operator">*</span>, e.mx</span><br><span class="line"><span class="keyword">FROM</span> emp_v2 e</span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> departments d</span><br><span class="line"><span class="keyword">ON</span> d.`department_id` <span class="operator">=</span> e.department_id;</span><br></pre></td></tr></tbody></table></figure>

<h4 id="小测试"><a href="#小测试" class="headerlink" title="小测试"></a>小测试</h4><ol>
<li></li>
</ol>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> bookType(</span><br><span class="line">	id <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line">	NAME <span class="type">VARCHAR</span>(<span class="number">20</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> Book(</span><br><span class="line">	bid <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line">	bname <span class="type">VARCHAR</span>(<span class="number">32</span>) <span class="keyword">UNIQUE</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">	price <span class="keyword">DOUBLE</span> <span class="keyword">DEFAULT</span> <span class="number">10</span>,</span><br><span class="line">	bypeId <span class="type">INT</span>,</span><br><span class="line">	<span class="keyword">CONSTRAINT</span> fk_book_booktype <span class="keyword">FOREIGN</span> KEY(bypeId) <span class="keyword">REFERENCES</span> bookType(id)</span><br><span class="line">);</span><br></pre></td></tr></tbody></table></figure>

<ol start="2">
<li></li>
</ol>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SET</span> autocommit <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"><span class="keyword">START</span> TRANSACTION;</span><br><span class="line">#先插入主表中数据</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> bookType <span class="keyword">VALUES</span></span><br><span class="line">(<span class="number">2333</span>, <span class="string">'水浒'</span>);</span><br><span class="line">#再插入从表中数据</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> Book <span class="keyword">VALUES</span></span><br><span class="line">(<span class="number">1</span>, <span class="string">'张飞'</span>, <span class="number">100000</span>, <span class="number">2333</span>);</span><br><span class="line"><span class="keyword">COMMIT</span>;</span><br></pre></td></tr></tbody></table></figure>

<ol start="3">
<li></li>
</ol>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">VIEW</span> myv1</span><br><span class="line"><span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> bname, NAME</span><br><span class="line"><span class="keyword">FROM</span> book bo</span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> booktype b </span><br><span class="line"><span class="keyword">ON</span> bo.bypeId<span class="operator">=</span>b.id</span><br><span class="line"><span class="keyword">WHERE</span> price <span class="operator">&gt;</span> <span class="number">100</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> myv1;</span><br></pre></td></tr></tbody></table></figure>

<ol start="4">
<li></li>
</ol>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">VIEW</span> myv1</span><br><span class="line"><span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> bname, price</span><br><span class="line"><span class="keyword">FROM</span> book</span><br><span class="line"><span class="keyword">WHERE</span> price <span class="keyword">BETWEEN</span> <span class="number">90</span> <span class="keyword">AND</span> <span class="number">120</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> myv1;</span><br></pre></td></tr></tbody></table></figure>

<ol start="5">
<li></li>
</ol>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">VIEW</span> myv1;</span><br></pre></td></tr></tbody></table></figure>

<h2 id="十四、变量"><a href="#十四、变量" class="headerlink" title="十四、变量"></a>十四、变量</h2><h3 id="分类-1"><a href="#分类-1" class="headerlink" title="分类"></a>分类</h3><ul>
<li>系统变量（按照作用范围划分）<ul>
<li>全局变量<ul>
<li>作用域：服务器每次启动将为所有的全局变量赋初始值。针对于所有的会话(连接)有效，但是不能跨重启，就是重启前的设置，在重启后就恢复默认。</li>
</ul>
</li>
<li>会话变量<ul>
<li>作用域：仅仅针对于当前会话(连接)有效。</li>
</ul>
</li>
</ul>
</li>
<li>自定义变量（按照作用范围划分）<ul>
<li>用户变量<ul>
<li>作用域：针对于当前会话(连接)有效，同于会话变量的作用域。应用在任何地方，也就是begin end里面或者begin end外面。</li>
</ul>
</li>
<li>局部变量<ul>
<li>作用域：仅仅在定义它的begin end中有效。应用在begin end中的第一句话。</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="系统变量"><a href="#系统变量" class="headerlink" title="系统变量"></a>系统变量</h3><h4 id="说明："><a href="#说明：" class="headerlink" title="说明："></a>说明：</h4><p>变量由系统提供，不是用户定义，属于服务器层面。</p>
<h4 id="使用的语法："><a href="#使用的语法：" class="headerlink" title="使用的语法："></a>使用的语法：</h4><ul>
<li><p>1.查看所有的系统变量</p>
<ul>
<li><pre><code class="sql">-- 查看全局变量
SHOW GLOBAL VARIABLES;
-- 查看会话变量(session可以不写,默认是session)
SHOW SESSION VARIABLES;
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 2.查看满足条件的部门系统变量</span><br><span class="line"></span><br><span class="line">  - ```sql</span><br><span class="line">    SHOW GLOBAL VARIABLES LIKE '%char%';</span><br></pre></td></tr></tbody></table></figure>
</code></pre>
</li>
</ul>
</li>
<li><p>3.查看指定的某个系统变量的值</p>
<ul>
<li><pre><code class="sql">-- 如果这样写，默认是从会话变量中查询
SELECT @@系统变量名;
-- 如果想从全局变量中找
SELECT @@global.系统变量名;
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 4.为某个系统变量复制</span><br><span class="line"></span><br><span class="line">  - ```sql</span><br><span class="line">    set 系统变量名 = 值;</span><br><span class="line">    set global 系统变量名 = 值;</span><br><span class="line">    </span><br><span class="line">    set @@global.系统变量名=值;</span><br><span class="line">    set @@session.系统变量名=值;</span><br></pre></td></tr></tbody></table></figure>
</code></pre>
</li>
</ul>
</li>
<li><p>注意：如果是全局级别，则需要加global，如果是会话级别，则可以加，也可以不加session。不写默认是session。</p>
</li>
</ul>
<h4 id="全局变量的演示"><a href="#全局变量的演示" class="headerlink" title="全局变量的演示"></a>全局变量的演示</h4><p><strong>1.查看所有的全局变量：</strong></p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> <span class="keyword">GLOBAL</span> VARIABLES;</span><br></pre></td></tr></tbody></table></figure>

<p><strong>2.查看部分的全局变量：</strong></p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查看包含char的全局变量</span></span><br><span class="line"><span class="keyword">SHOW</span> <span class="keyword">GLOBAL</span> VARIABLES <span class="keyword">LIKE</span> <span class="string">'%char%'</span>;</span><br></pre></td></tr></tbody></table></figure>

<p><strong>3.查看指定的全局变量的值：</strong></p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查看autocommit的值</span></span><br><span class="line"><span class="keyword">SELECT</span> @<span class="variable">@global</span>.autocommit;</span><br><span class="line"><span class="comment">-- 查看隔离级别</span></span><br><span class="line"><span class="keyword">SELECT</span> @<span class="variable">@global</span>.tx_isolation;</span><br></pre></td></tr></tbody></table></figure>

<p><strong>4.为某个指定的全局变量赋值</strong></p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SET</span> @<span class="variable">@global</span>.autocommit<span class="operator">=</span><span class="number">0</span>;</span><br></pre></td></tr></tbody></table></figure>

<h4 id="会话变量的演示"><a href="#会话变量的演示" class="headerlink" title="会话变量的演示"></a>会话变量的演示</h4><p><strong>1.查看所有的会话变量</strong></p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> SESSION VARIABLES;</span><br><span class="line"><span class="comment">-- 或者</span></span><br><span class="line"><span class="keyword">SHOW</span> VARIABLES;</span><br></pre></td></tr></tbody></table></figure>

<p><strong>2.查看部分的会话变量</strong></p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> SESSION VARIABLES <span class="keyword">LIKE</span> <span class="string">'%char%'</span>;</span><br><span class="line"><span class="comment">-- 或者</span></span><br><span class="line"><span class="keyword">SHOW</span> VARIABLES <span class="keyword">LIKE</span> <span class="string">'%char%'</span>;</span><br></pre></td></tr></tbody></table></figure>

<p><strong>3.查看指定的会话变量的值</strong></p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> @<span class="variable">@tx_isolation</span>;</span><br><span class="line"><span class="comment">-- 或者</span></span><br><span class="line"><span class="keyword">SELECT</span> @<span class="variable">@session</span>.tx_isolation;</span><br></pre></td></tr></tbody></table></figure>

<p><strong>4.为某个会话变量赋值</strong></p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SET</span> @<span class="variable">@session</span>.tx_isolation <span class="operator">=</span> <span class="string">'read-uncommitted'</span>;</span><br><span class="line"><span class="comment">-- 或者</span></span><br><span class="line"><span class="keyword">SET</span> SESSION tx_isolation <span class="operator">=</span> <span class="string">'read-committed'</span>;</span><br></pre></td></tr></tbody></table></figure>

<h3 id="自定义变量"><a href="#自定义变量" class="headerlink" title="自定义变量"></a>自定义变量</h3><h4 id="说明：-1"><a href="#说明：-1" class="headerlink" title="说明："></a>说明：</h4><p>变量是由用户自定义的，不是由系统提供的。</p>
<h4 id="使用步骤："><a href="#使用步骤：" class="headerlink" title="使用步骤："></a>使用步骤：</h4><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">声明</span><br><span class="line">赋值</span><br><span class="line">使用(查看、比较、运算等)</span><br></pre></td></tr></tbody></table></figure>

<h4 id="用户变量的演示"><a href="#用户变量的演示" class="headerlink" title="用户变量的演示"></a>用户变量的演示</h4><p><strong>1.声明并初始化</strong></p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 下面三种方式都可以</span></span><br><span class="line"><span class="keyword">SET</span> @用户变量名<span class="operator">=</span>值;</span><br><span class="line"><span class="keyword">SET</span> @用户变量名:<span class="operator">=</span>值;</span><br><span class="line"><span class="keyword">SELECT</span> @用户变量名:<span class="operator">=</span>值;</span><br></pre></td></tr></tbody></table></figure>

<p><strong>2.赋值(更新用户变量的值)</strong></p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 方式一：通过set或select</span></span><br><span class="line"><span class="keyword">SET</span> @用户变量名<span class="operator">=</span>值;</span><br><span class="line"><span class="keyword">SET</span> @用户变量名:<span class="operator">=</span>值;</span><br><span class="line"><span class="keyword">SELECT</span> @用户变量名:<span class="operator">=</span>值;</span><br><span class="line"><span class="comment">-- 方式二：通过select into</span></span><br><span class="line"><span class="keyword">SELECT</span> 字段 <span class="keyword">INTO</span> @变量名</span><br><span class="line"><span class="keyword">FROM</span> 表;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 例如：查看employees表中的数量</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">INTO</span> <span class="variable">@count</span></span><br><span class="line"><span class="keyword">FROM</span> employees;</span><br></pre></td></tr></tbody></table></figure>

<p><strong>3.使用(查看用户变量的值)</strong></p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> @用户变量名;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 例如：</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="variable">@count</span>;</span><br></pre></td></tr></tbody></table></figure>

<h4 id="局部变量的演示"><a href="#局部变量的演示" class="headerlink" title="局部变量的演示"></a>局部变量的演示</h4><p><strong>1.声明</strong></p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 只声明</span></span><br><span class="line"><span class="keyword">DECLARE</span> 变量名 类型;</span><br><span class="line"><span class="comment">-- 声明并初始化</span></span><br><span class="line"><span class="keyword">DECLARE</span> 变量名 类型 <span class="keyword">DEFAULT</span> 值;</span><br></pre></td></tr></tbody></table></figure>

<p><strong>2.赋值</strong></p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 方式一：通过set或select</span></span><br><span class="line"><span class="keyword">SET</span> 局部变量名<span class="operator">=</span>值;</span><br><span class="line"><span class="keyword">SET</span> 局部变量名:<span class="operator">=</span>值;</span><br><span class="line"><span class="keyword">SELECT</span> @局部变量名:<span class="operator">=</span>值;</span><br><span class="line"><span class="comment">-- 方式二：通过select into</span></span><br><span class="line"><span class="keyword">SELECT</span> 字段 <span class="keyword">INTO</span> 局部变量名</span><br><span class="line"><span class="keyword">FROM</span> 表;</span><br></pre></td></tr></tbody></table></figure>

<p><strong>3.使用</strong></p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> 局部变量名;</span><br></pre></td></tr></tbody></table></figure>



<h4 id="对比用户变量和局部变量"><a href="#对比用户变量和局部变量" class="headerlink" title="对比用户变量和局部变量"></a>对比用户变量和局部变量</h4><table>
<thead>
<tr>
<th align="center"></th>
<th align="center">作用域</th>
<th align="center">定义和使用的位置</th>
<th align="center">语法</th>
</tr>
</thead>
<tbody><tr>
<td align="center">用户变量</td>
<td align="center">当前会话</td>
<td align="center">当前会话中的任何地方</td>
<td align="center">必须加上@符号，不用限定类型</td>
</tr>
<tr>
<td align="center">局部变量</td>
<td align="center">begin end中</td>
<td align="center">只能在begin end中，且为第一句话</td>
<td align="center">一般不加@符号，需要限定类型</td>
</tr>
</tbody></table>
<h4 id="案例：声明两个变量并赋初值，求和，并打印"><a href="#案例：声明两个变量并赋初值，求和，并打印" class="headerlink" title="案例：声明两个变量并赋初值，求和，并打印"></a>案例：声明两个变量并赋初值，求和，并打印</h4><h5 id="1-用用户变量来做"><a href="#1-用用户变量来做" class="headerlink" title="1.用用户变量来做"></a>1.用用户变量来做</h5><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SET</span> <span class="variable">@m</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"><span class="keyword">SET</span> <span class="variable">@n</span> <span class="operator">=</span> <span class="number">2</span>;</span><br><span class="line"><span class="keyword">SET</span> <span class="variable">@sum</span> <span class="operator">=</span> <span class="variable">@m</span> <span class="operator">+</span> <span class="variable">@n</span>;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="variable">@sum</span>;</span><br></pre></td></tr></tbody></table></figure>

<h5 id="2-用局部变量来做"><a href="#2-用局部变量来做" class="headerlink" title="2.用局部变量来做"></a>2.用局部变量来做</h5><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<h2 id="十五、存储过程和函数"><a href="#十五、存储过程和函数" class="headerlink" title="十五、存储过程和函数"></a>十五、存储过程和函数</h2><h3 id="存储过程"><a href="#存储过程" class="headerlink" title="存储过程"></a>存储过程</h3><h4 id="含义：-1"><a href="#含义：-1" class="headerlink" title="含义："></a>含义：</h4><p>一组经过预先编译的sql语句的集合，理解成批处理语句。</p>
<h4 id="好处："><a href="#好处：" class="headerlink" title="好处："></a>好处：</h4><ul>
<li>提高了sql语句的重用性，减少了开发程序员的压力；</li>
<li>简化操作；</li>
<li>减少了编译次数并且减少了和数据库服务器的连接次数，提高了效率；</li>
</ul>
<h4 id="语法："><a href="#语法：" class="headerlink" title="语法："></a>语法：</h4><h5 id="1-创建存储过程语法"><a href="#1-创建存储过程语法" class="headerlink" title="1.创建存储过程语法"></a>1.创建存储过程语法</h5><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> 存储过程名(参数列表)</span><br><span class="line"><span class="keyword">BEGIN</span> </span><br><span class="line">	存储过程体(一组合法的<span class="keyword">SQL</span>语句)</span><br><span class="line"><span class="keyword">END</span></span><br></pre></td></tr></tbody></table></figure>

<p>==<strong>注意：</strong>==</p>
<p>1.参数列表包含三部分，分别是参数模式、参数名、参数类型。</p>
<p><strong>举例：</strong></p>
<p><code>in stuname varchar(20)</code></p>
<p><strong>参数模式：</strong></p>
<ul>
<li><code>IN</code>：该参数可以作为输入，也就是说该参数需要调用方传入值；</li>
<li><code>OUT</code>：该参数可以作为输出，也就是该参数可以作为返回值；</li>
<li><code>INOUT</code>：该参数既可以作为输入，又可以作为输出，也就是该参数既可以传入值，又可以返回值。</li>
</ul>
<p>2.如果存储过程体仅仅只有一句话，<code>BEGIN END</code>可以省略。</p>
<p>3.存储过程体中的每条sql语句的结尾都要加分号。存储过程的结尾可以使用<code>DELIMITER</code>重新设置。</p>
<p>语法：</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">DELIMITER 结束标记</span><br><span class="line"><span class="comment">-- 如 DELIMITER $</span></span><br></pre></td></tr></tbody></table></figure>

<h5 id="2-调用存储过程语法"><a href="#2-调用存储过程语法" class="headerlink" title="2.调用存储过程语法"></a>2.调用存储过程语法</h5><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CALL</span> 存储过程名(实参列表);</span><br></pre></td></tr></tbody></table></figure>

<h5 id="3-删除存储过程语法"><a href="#3-删除存储过程语法" class="headerlink" title="3.删除存储过程语法"></a>3.删除存储过程语法</h5><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">PROCEDURE</span> 存储过程名</span><br></pre></td></tr></tbody></table></figure>

<p>举例：</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">PROCEDURE</span> test_pro3;</span><br></pre></td></tr></tbody></table></figure>

<h5 id="4-查看存储过程的信息"><a href="#4-查看存储过程的信息" class="headerlink" title="4.查看存储过程的信息"></a>4.查看存储过程的信息</h5><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> <span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> test_pro3;</span><br></pre></td></tr></tbody></table></figure>



<h4 id="空参列表"><a href="#空参列表" class="headerlink" title="空参列表"></a>空参列表</h4><h5 id="案例："><a href="#案例：" class="headerlink" title="案例："></a><strong>案例</strong>：</h5><p>插入到<code>admin</code>表中五条记录。</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 注意在cmd命令行窗口管理员模式下进行</span></span><br><span class="line">DELIMITER $</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> myp1()</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">	<span class="keyword">INSERT</span> <span class="keyword">INTO</span> admin(username, `password`) </span><br><span class="line">	<span class="keyword">VALUES</span>(<span class="string">'join1'</span>, <span class="string">'0000'</span>),</span><br><span class="line">	(<span class="string">'lily'</span>, <span class="string">'0000'</span>),</span><br><span class="line">	(<span class="string">'tom'</span>, <span class="string">'0000'</span>),</span><br><span class="line">	(<span class="string">'zz'</span>, <span class="string">'0000'</span>),</span><br><span class="line">	(<span class="string">'dd'</span>, <span class="string">'0000'</span>);</span><br><span class="line"><span class="keyword">END</span> $</span><br><span class="line"></span><br><span class="line"># 调用</span><br><span class="line"><span class="keyword">CALL</span> myp1() $</span><br></pre></td></tr></tbody></table></figure>

<h4 id="创建带in模式参数的存储过程"><a href="#创建带in模式参数的存储过程" class="headerlink" title="创建带in模式参数的存储过程"></a>创建带in模式参数的存储过程</h4><h5 id="案例1："><a href="#案例1：" class="headerlink" title="案例1："></a>案例1：</h5><p>创建存储过程实现，根据女神名，查询对应的男神信息。</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">DELIMITER $			#确定$符号为结束标记</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> myp2(<span class="keyword">IN</span> beautyName <span class="type">VARCHAR</span>(<span class="number">20</span>))</span><br><span class="line"><span class="keyword">BEGIN</span> </span><br><span class="line">	<span class="keyword">SELECT</span> bo.<span class="operator">*</span></span><br><span class="line">	<span class="keyword">FROM</span> boys bo</span><br><span class="line">	<span class="keyword">RIGHT</span> <span class="keyword">JOIN</span> beauty b <span class="keyword">ON</span> bo.id <span class="operator">=</span> b.boyfriend_id</span><br><span class="line">	<span class="keyword">WHERE</span> b.name <span class="operator">=</span> beautyName;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">END</span> $</span><br><span class="line"></span><br><span class="line"># 调用</span><br><span class="line"><span class="keyword">CALL</span> myp2(<span class="string">'刘岩'</span>) $</span><br></pre></td></tr></tbody></table></figure>

<h5 id="案例2："><a href="#案例2：" class="headerlink" title="案例2："></a>案例2：</h5><p>创建存储过程实现，用户是否登录成功。</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">DELIMITER $</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> myp3(<span class="keyword">IN</span> username <span class="type">VARCHAR</span>(<span class="number">20</span>), <span class="keyword">IN</span> PASSWORD <span class="type">VARCHAR</span>(<span class="number">20</span>))</span><br><span class="line"><span class="keyword">BEGIN</span> </span><br><span class="line">	<span class="keyword">DECLARE</span> <span class="keyword">result</span> <span class="type">INT</span> <span class="keyword">DEFAULT</span> <span class="number">0</span>; #变量声明并初始化</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">INTO</span> <span class="keyword">result</span>	#变量赋值</span><br><span class="line">	<span class="keyword">FROM</span> admin a</span><br><span class="line">	<span class="keyword">WHERE</span> a.username <span class="operator">=</span> username</span><br><span class="line">	<span class="keyword">AND</span> a.password <span class="operator">=</span> PASSWORD;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">SELECT</span> IF(<span class="keyword">result</span><span class="operator">&gt;</span><span class="number">0</span>, <span class="string">'成功'</span>, <span class="string">'失败'</span>);	#变量使用</span><br><span class="line"><span class="keyword">END</span> $</span><br><span class="line">#调用</span><br><span class="line"><span class="keyword">CALL</span> myp3(<span class="string">'john'</span>, <span class="string">'1000'</span>) $</span><br></pre></td></tr></tbody></table></figure>

<h4 id="创建带out模式的存储过程"><a href="#创建带out模式的存储过程" class="headerlink" title="创建带out模式的存储过程"></a>创建带out模式的存储过程</h4><h5 id="案例1：-1"><a href="#案例1：-1" class="headerlink" title="案例1："></a>案例1：</h5><p>根据女神名，返回对应的男神名。</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">DELIMITER $</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> myp4(<span class="keyword">IN</span> beautyName <span class="type">VARCHAR</span>(<span class="number">20</span>), <span class="keyword">OUT</span> boyName <span class="type">VARCHAR</span>(<span class="number">20</span>))</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">	<span class="keyword">SELECT</span> bo.boyName <span class="keyword">INTO</span> boyName</span><br><span class="line">	<span class="keyword">FROM</span> boys bo</span><br><span class="line">	<span class="keyword">INNER</span> <span class="keyword">JOIN</span> beauty b <span class="keyword">ON</span> bo.id <span class="operator">=</span> b.boyfriend_id</span><br><span class="line">	<span class="keyword">WHERE</span> b.name <span class="operator">=</span> beautyName;</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line"><span class="keyword">END</span> $</span><br><span class="line"></span><br><span class="line"><span class="keyword">SET</span> <span class="variable">@bName</span>$		#声明用户变量</span><br><span class="line">#调用</span><br><span class="line"><span class="keyword">CALL</span> myp4(<span class="string">'张飞'</span>,<span class="variable">@bName</span>)$</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="variable">@bName</span>$</span><br></pre></td></tr></tbody></table></figure>

<h5 id="案例2：-1"><a href="#案例2：-1" class="headerlink" title="案例2："></a>案例2：</h5><p>根据女神名，返回对应的男神名和男神魅力值。</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">DELIMITER $</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> myp5(<span class="keyword">IN</span> beautyName <span class="type">VARCHAR</span>(<span class="number">20</span>), <span class="keyword">OUT</span> boyName <span class="type">VARCHAR</span>(<span class="number">20</span>), <span class="keyword">OUT</span> userCP <span class="type">INT</span>)</span><br><span class="line"><span class="keyword">BEGIN</span> </span><br><span class="line">	<span class="keyword">SELECT</span> bo.boyName, bo.userCP <span class="keyword">INTO</span> boyName, userCP</span><br><span class="line">	<span class="keyword">FROM</span> boys bo</span><br><span class="line">	<span class="keyword">INNER</span> <span class="keyword">JOIN</span> beauty b <span class="keyword">ON</span> bo.id <span class="operator">=</span> b.boyfriend_id</span><br><span class="line">	<span class="keyword">WHERE</span> b.name <span class="operator">=</span> beautyName;</span><br><span class="line"><span class="keyword">END</span> $</span><br><span class="line">#调用</span><br><span class="line"><span class="keyword">CALL</span> myp5(<span class="string">'张飞'</span>,<span class="variable">@bName</span>, <span class="variable">@usercp</span>) $</span><br><span class="line"><span class="keyword">SELECT</span> <span class="variable">@bName</span>,<span class="variable">@usercp</span>$</span><br></pre></td></tr></tbody></table></figure>

<h4 id="创建带inout模式的存储过程"><a href="#创建带inout模式的存储过程" class="headerlink" title="创建带inout模式的存储过程"></a>创建带<code>inout</code>模式的存储过程</h4><h5 id="案例：-1"><a href="#案例：-1" class="headerlink" title="案例："></a>案例：</h5><p>传入a和b两个值，最终a和b都翻倍并返回。</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">DELIMITER $</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> myp6(<span class="keyword">INOUT</span> a <span class="type">INT</span>, <span class="keyword">INOUT</span> b <span class="type">INT</span>)</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">	<span class="keyword">SET</span> a <span class="operator">=</span> a <span class="operator">*</span> <span class="number">2</span>;	#这里a和b都是局部变量，设置值时不用加@</span><br><span class="line">	<span class="keyword">SET</span> b <span class="operator">=</span> b <span class="operator">*</span> <span class="number">2</span>;</span><br><span class="line"><span class="keyword">END</span> $</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 调用的时候需要先创建两个变量</span></span><br><span class="line"><span class="keyword">SET</span> <span class="variable">@a</span> <span class="operator">=</span> <span class="number">10</span>$</span><br><span class="line"><span class="keyword">SET</span> <span class="variable">@b</span> <span class="operator">=</span> <span class="number">20</span>$</span><br><span class="line"><span class="keyword">CALL</span> myp6(<span class="variable">@a</span>, <span class="variable">@b</span>)$</span><br><span class="line"><span class="keyword">SELECT</span> <span class="variable">@a</span>, <span class="variable">@b</span>$</span><br></pre></td></tr></tbody></table></figure>

<h4 id="案例-1"><a href="#案例-1" class="headerlink" title="案例"></a>案例</h4><p><strong>案例1：创建存储过程实现传入用户名和密码，插入到<code>admin</code>表中。</strong></p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> test_pro1(<span class="keyword">IN</span> username <span class="type">VARCHAR</span>(<span class="number">20</span>), <span class="keyword">IN</span> loginPwd <span class="type">VARCHAR</span>(<span class="number">20</span>))</span><br><span class="line"><span class="keyword">BEGIN</span> </span><br><span class="line">	<span class="keyword">INSERT</span> <span class="keyword">INTO</span> admin(admin.username, PASSWORD)</span><br><span class="line">	<span class="keyword">VALUES</span>(username,loginPwd);</span><br><span class="line"><span class="keyword">END</span> $</span><br><span class="line">#调用</span><br><span class="line"><span class="keyword">CALL</span> test_pro1(<span class="string">'张飞'</span>,<span class="string">'123123'</span>)$</span><br></pre></td></tr></tbody></table></figure>

<p><strong>案例2：创建存储过程或函数实现传入女神编号，返回女神名称和女神电话。</strong></p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">DELIMITER $</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> test_pro2(<span class="keyword">IN</span> id <span class="type">INT</span>, <span class="keyword">OUT</span> gname <span class="type">VARCHAR</span>(<span class="number">20</span>), <span class="keyword">OUT</span> phone <span class="type">VARCHAR</span>(<span class="number">20</span>))</span><br><span class="line"><span class="keyword">BEGIN</span> </span><br><span class="line">	<span class="keyword">SELECT</span> b.`name`, b.`phone` <span class="keyword">INTO</span> gname, phone</span><br><span class="line">	<span class="keyword">FROM</span> beauty b</span><br><span class="line">	<span class="keyword">WHERE</span> b.`id` <span class="operator">=</span> id;</span><br><span class="line"><span class="keyword">END</span> $</span><br><span class="line">#调用</span><br><span class="line"><span class="keyword">CALL</span> test_pro2(<span class="number">1</span>, <span class="variable">@a</span>, <span class="variable">@b</span>)$</span><br><span class="line"><span class="keyword">SELECT</span> <span class="variable">@a</span>, <span class="variable">@b</span>$</span><br></pre></td></tr></tbody></table></figure>

<p><strong>案例3：创建存储过程或函数实现传入两个女神生日，返回大小。</strong></p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">DELIMITER $</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> test_pro3(<span class="keyword">IN</span> birth1 DATETIME, <span class="keyword">IN</span> birth2 DATETIME, <span class="keyword">OUT</span> <span class="keyword">result</span> <span class="type">INT</span>)</span><br><span class="line"><span class="keyword">BEGIN</span> </span><br><span class="line">	<span class="keyword">SELECT</span> DATEDIFF(birth1,birth2) <span class="keyword">INTO</span> <span class="keyword">result</span>;</span><br><span class="line"><span class="keyword">END</span> $</span><br><span class="line"></span><br><span class="line"><span class="keyword">CALL</span> test_pro3(<span class="string">'1998-1-1'</span>,NOW(),<span class="variable">@result</span>)$</span><br><span class="line"><span class="keyword">SELECT</span> <span class="variable">@result</span> $</span><br></pre></td></tr></tbody></table></figure>

<p><strong>案例4：创建存储过程或函数实现传入一个日期，格式化成xx年xx月xx日并返回。</strong></p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">DELIMITER $</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> test_pro4(<span class="keyword">IN</span> mydate DATETIME,<span class="keyword">OUT</span> strDate <span class="type">VARCHAR</span>(<span class="number">50</span>))</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">	<span class="keyword">SELECT</span> DATE_FORMAT(mydate, <span class="string">'%y年%m月%d日'</span>) <span class="keyword">INTO</span> strDate;</span><br><span class="line"><span class="keyword">END</span> $</span><br><span class="line"></span><br><span class="line"><span class="keyword">CALL</span> test_pro4(NOW(), <span class="variable">@str</span>)$</span><br><span class="line"><span class="keyword">SELECT</span> <span class="variable">@str</span> $</span><br></pre></td></tr></tbody></table></figure>

<p><strong>案例5：创建存储过程或函数实现传入<code>女神名称</code>，返回：<code>女神 and 男神</code> 格式的字符串</strong></p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">DELIMITER $</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> test_pro5(<span class="keyword">IN</span> beautyName <span class="type">VARCHAR</span>(<span class="number">50</span>), <span class="keyword">OUT</span> str <span class="type">VARCHAR</span>(<span class="number">100</span>))</span><br><span class="line"><span class="keyword">BEGIN</span> </span><br><span class="line">	<span class="keyword">SELECT</span> CONCAT(beautyName, <span class="string">' and '</span>, IFNULL(boyName, <span class="string">'null'</span>)) <span class="keyword">INTO</span> str</span><br><span class="line">	<span class="keyword">FROM</span> boys bo</span><br><span class="line">	<span class="keyword">RIGHT</span> <span class="keyword">JOIN</span> beauty b <span class="keyword">ON</span> b.boyfriend_id <span class="operator">=</span> bo.id</span><br><span class="line">	<span class="keyword">WHERE</span> b.name <span class="operator">=</span> beautyName;</span><br><span class="line"><span class="keyword">END</span> $</span><br><span class="line"></span><br><span class="line"><span class="keyword">CALL</span> test_pro5(<span class="string">'xx'</span>, <span class="variable">@str</span>) $</span><br><span class="line"><span class="keyword">SELECT</span> <span class="variable">@str</span> $</span><br></pre></td></tr></tbody></table></figure>

<p><strong>案例6：创建存储过程或函数，根据传入的条目数和起始索引，查询beauty表中的记录。</strong></p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">DELIMITER $</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> test_pro6(<span class="keyword">IN</span> size <span class="type">INT</span>, <span class="keyword">IN</span> startIndex <span class="type">INT</span>)</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">	<span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> beauty LIMIT startIndex, size;</span><br><span class="line"><span class="keyword">END</span>$</span><br><span class="line"><span class="keyword">CALL</span> test_pro6(<span class="number">3</span>, <span class="number">5</span>) $</span><br></pre></td></tr></tbody></table></figure>

<h3 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h3><h4 id="含义：-2"><a href="#含义：-2" class="headerlink" title="含义："></a>含义：</h4><p>与存储过程一样。</p>
<h4 id="与存储过程的区别："><a href="#与存储过程的区别：" class="headerlink" title="与存储过程的区别："></a>与存储过程的区别：</h4><p>存储过程可以有0个返回，也可以有多个返回， 适合做批量插入、批量更新；而函数必须且只能有1个返回，适合做处理数据后返回一个结果。</p>
<h4 id="语法：-1"><a href="#语法：-1" class="headerlink" title="语法："></a>语法：</h4><h5 id="1-创建函数语法"><a href="#1-创建函数语法" class="headerlink" title="1.创建函数语法"></a>1.创建函数语法</h5><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">FUNCTION</span> 函数名(参数列表) <span class="keyword">RETURNS</span> 返回类型</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">	函数体</span><br><span class="line"><span class="keyword">END</span></span><br></pre></td></tr></tbody></table></figure>

<p>==<strong>注意：</strong>==</p>
<ul>
<li><p>参数列表包含两个部分，分别是参数名、参数类型；</p>
</li>
<li><p>函数体：肯定有return语句。如果没有return语句放在函数体的后面也不会报错，但不建议。应写成<code>return 值;</code></p>
</li>
<li><p>当函数体中只有一句话，则可以省略begin end；</p>
</li>
<li><p>使用delimiter语句设置结束标记；</p>
</li>
</ul>
<h5 id="2-调用函数语法"><a href="#2-调用函数语法" class="headerlink" title="2.调用函数语法"></a>2.调用函数语法</h5><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> 函数名(实参列表)</span><br></pre></td></tr></tbody></table></figure>

<h5 id="案例演示"><a href="#案例演示" class="headerlink" title="案例演示"></a>案例演示</h5><h6 id="1-无参有返回"><a href="#1-无参有返回" class="headerlink" title="1.无参有返回"></a>1.无参有返回</h6><p><strong>案例：返回公司的员工个数。</strong></p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">DELIMITER $</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">FUNCTION</span> myf1() <span class="keyword">RETURNS</span> <span class="type">INT</span></span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">	<span class="keyword">DECLARE</span> c <span class="type">INT</span> <span class="keyword">DEFAULT</span> <span class="number">0</span>;	#定义局部变量</span><br><span class="line">	<span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">INTO</span> c 		#为变量赋值</span><br><span class="line">	<span class="keyword">FROM</span> employees;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">RETURN</span> c;			#返回值</span><br><span class="line"><span class="keyword">END</span>$</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> myf1()$</span><br></pre></td></tr></tbody></table></figure>

<h6 id="2-有参有返回"><a href="#2-有参有返回" class="headerlink" title="2.有参有返回"></a>2.有参有返回</h6><p><strong>案例1：根据员工名，返回他的工资。</strong></p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">DELIMITER $</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">FUNCTION</span> myf3(empName <span class="type">VARCHAR</span>(<span class="number">20</span>)) <span class="keyword">RETURNS</span> <span class="keyword">DOUBLE</span></span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">	<span class="keyword">SET</span> <span class="variable">@sal</span> <span class="operator">=</span> <span class="number">0</span>;		#定义用户变量</span><br><span class="line">	<span class="keyword">SELECT</span> salary <span class="keyword">INTO</span> <span class="variable">@sal</span>		#赋值</span><br><span class="line">	<span class="keyword">FROM</span> employees</span><br><span class="line">	<span class="keyword">WHERE</span> last_name <span class="operator">=</span> empName;	</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">RETURN</span> <span class="variable">@sal</span>;				#返回值</span><br><span class="line"><span class="keyword">END</span> $</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> myf3(<span class="string">'Olson'</span>)$</span><br></pre></td></tr></tbody></table></figure>

<p><strong>案例2：根据部门名，返回该部门的平均工资。</strong></p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">DELIMITER $</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">FUNCTION</span> myf4(deptName <span class="type">VARCHAR</span>(<span class="number">20</span>)) <span class="keyword">RETURNS</span> <span class="keyword">DOUBLE</span></span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">	<span class="keyword">DECLARE</span> sal <span class="keyword">DOUBLE</span> ;</span><br><span class="line">	<span class="keyword">SELECT</span> <span class="built_in">AVG</span>(salary) <span class="keyword">INTO</span> sal</span><br><span class="line">	<span class="keyword">FROM</span> employees e</span><br><span class="line">	<span class="keyword">JOIN</span> departments d <span class="keyword">ON</span> e.department_id <span class="operator">=</span> d.department_id</span><br><span class="line">	<span class="keyword">WHERE</span> d.department_name <span class="operator">=</span> deptName;</span><br><span class="line">	<span class="keyword">RETURN</span> sal;</span><br><span class="line"><span class="keyword">END</span> $</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> myf4(<span class="string">'IT'</span>)$</span><br></pre></td></tr></tbody></table></figure>

<h5 id="3-查看函数的信息"><a href="#3-查看函数的信息" class="headerlink" title="3.查看函数的信息"></a>3.查看函数的信息</h5><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> <span class="keyword">CREATE</span> <span class="keyword">FUNCTION</span> myf4;</span><br></pre></td></tr></tbody></table></figure>

<h5 id="4-删除函数"><a href="#4-删除函数" class="headerlink" title="4.删除函数"></a>4.删除函数</h5><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">FUNCTION</span> myf4;</span><br></pre></td></tr></tbody></table></figure>





<h2 id="十六、流程控制结构"><a href="#十六、流程控制结构" class="headerlink" title="十六、流程控制结构"></a>十六、流程控制结构</h2><h3 id="分类-2"><a href="#分类-2" class="headerlink" title="分类"></a>分类</h3><ul>
<li><p>顺序结构：程序从上往下依次执行。</p>
</li>
<li><p>分支结构：程序从两条或多条路径中选择一条去执行。</p>
</li>
<li><p>循环结构：程序在满足一定条件的基础上，重复执行一段代码。</p>
</li>
</ul>
<h3 id="分支结构"><a href="#分支结构" class="headerlink" title="分支结构"></a>分支结构</h3><h4 id="1-if函数"><a href="#1-if函数" class="headerlink" title="1.if函数"></a>1.<code>if</code>函数</h4><h5 id="功能："><a href="#功能：" class="headerlink" title="功能："></a>功能：</h5><p>实现简单的双分支。</p>
<h5 id="语法：-2"><a href="#语法：-2" class="headerlink" title="语法："></a>语法：</h5><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> IF(表达式<span class="number">1</span>,表达式<span class="number">2</span>,表达式<span class="number">3</span>);</span><br><span class="line"><span class="comment">--执行顺序</span></span><br><span class="line">如果表达式<span class="number">1</span>成立，则if函数会返回表达式<span class="number">2</span>的值，否则会返回表达式<span class="number">3</span>的值。</span><br></pre></td></tr></tbody></table></figure>

<h5 id="应用场合："><a href="#应用场合：" class="headerlink" title="应用场合："></a>应用场合：</h5><p>任何地方。</p>
<h4 id="2-case结构"><a href="#2-case结构" class="headerlink" title="2.case结构"></a>2.<code>case</code>结构</h4><h5 id="功能：-1"><a href="#功能：-1" class="headerlink" title="功能："></a>功能：</h5><p>情况1：类似于Java中的switch语句，一般用于实现等值判断。</p>
<p>情况2：类似于Java中的多重if语句，一般用于实现区间判断。</p>
<h5 id="语法：-3"><a href="#语法：-3" class="headerlink" title="语法："></a>语法：</h5><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 情况1</span></span><br><span class="line"><span class="keyword">CASE</span> 变量<span class="operator">|</span>表达式<span class="operator">|</span>字段</span><br><span class="line"><span class="keyword">WHEN</span> 要判断的值 <span class="keyword">THEN</span> 返回的值<span class="number">1</span></span><br><span class="line"><span class="keyword">WHEN</span> 要判断的值 <span class="keyword">THEN</span> 返回的值<span class="number">2</span></span><br><span class="line"><span class="keyword">WHEN</span> 要判断的值 <span class="keyword">THEN</span> 返回的值<span class="number">3</span></span><br><span class="line">...</span><br><span class="line"><span class="keyword">ELSE</span> 要返回的值n</span><br><span class="line"><span class="keyword">END</span></span><br><span class="line"><span class="comment">-- 情况2</span></span><br><span class="line"><span class="keyword">CASE</span></span><br><span class="line"><span class="keyword">WHEN</span> 要判断的条件<span class="number">1</span> <span class="keyword">THEN</span> 返回的值<span class="number">1</span></span><br><span class="line"><span class="keyword">WHEN</span> 要判断的条件<span class="number">2</span> <span class="keyword">THEN</span> 返回的值<span class="number">2</span></span><br><span class="line"><span class="keyword">WHEN</span> 要判断的条件<span class="number">3</span> <span class="keyword">THEN</span> 返回的值<span class="number">3</span></span><br><span class="line">...</span><br><span class="line"><span class="keyword">ELSE</span> 要返回的值n</span><br><span class="line"><span class="keyword">END</span></span><br></pre></td></tr></tbody></table></figure>



<h5 id="特点：-1"><a href="#特点：-1" class="headerlink" title="特点："></a>特点：</h5><ul>
<li>可以作为表达式，嵌套在其他语句中使用，可以放在任何地方，begin end中或begin end外面；也可以作为独立的语句去使用，但这样只能放在begin end中。</li>
<li>如果when中值满足或者条件成立，则执行对应的then后面的语句，并且结束case；如果都不满足，则执行else中的语句或值。</li>
<li>else可以省略，如果else省略了，并且所有when条件都不满足，则返回NULL。</li>
</ul>
<h5 id="案例：-2"><a href="#案例：-2" class="headerlink" title="案例："></a>案例：</h5><p>创建一个存储过程，根据传入的成绩，来去显示等级，比如传入的成绩在[90-100]中间，则显示A；[80-90)之间，则显示B；[60-80)之间，显示C；否则，显示D；</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">DELIMITER $</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> test_case(<span class="keyword">IN</span> score <span class="type">INT</span>)</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">	<span class="keyword">CASE</span></span><br><span class="line">	<span class="keyword">WHEN</span> score<span class="operator">&gt;=</span><span class="number">90</span> <span class="keyword">AND</span> score<span class="operator">&lt;=</span><span class="number">100</span> <span class="keyword">THEN</span> <span class="keyword">SELECT</span> <span class="string">'A'</span>;</span><br><span class="line">	<span class="keyword">WHEN</span> score<span class="operator">&gt;=</span><span class="number">80</span> <span class="keyword">THEN</span> <span class="keyword">SELECT</span> <span class="string">'B'</span>;</span><br><span class="line">	<span class="keyword">WHEN</span> score<span class="operator">&gt;=</span><span class="number">60</span> <span class="keyword">THEN</span> <span class="keyword">SELECT</span> <span class="string">'C'</span>;</span><br><span class="line">	<span class="keyword">ELSE</span> <span class="keyword">SELECT</span> <span class="string">'D'</span>;</span><br><span class="line">	<span class="keyword">END</span> <span class="keyword">CASE</span>;</span><br><span class="line"><span class="keyword">END</span> $</span><br><span class="line"></span><br><span class="line"><span class="keyword">CALL</span> test_case(<span class="number">88</span>)$</span><br></pre></td></tr></tbody></table></figure>

<h4 id="3-if结构"><a href="#3-if结构" class="headerlink" title="3.if结构"></a>3.<code>if</code>结构</h4><h5 id="功能：-2"><a href="#功能：-2" class="headerlink" title="功能："></a>功能：</h5><p>实现多重分支。</p>
<h5 id="语法：-4"><a href="#语法：-4" class="headerlink" title="语法："></a>语法：</h5><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">IF 条件<span class="number">1</span> <span class="keyword">THEN</span> 语句<span class="number">1</span>;</span><br><span class="line">ELSEIF 条件<span class="number">2</span> <span class="keyword">THEN</span> 语句<span class="number">2</span>;</span><br><span class="line">...</span><br><span class="line">【<span class="keyword">ELSE</span> 语句n;】		<span class="comment">-- 这一句可以省略</span></span><br><span class="line"><span class="keyword">END</span> IF;</span><br></pre></td></tr></tbody></table></figure>

<h5 id="应用场合：-1"><a href="#应用场合：-1" class="headerlink" title="应用场合："></a>应用场合：</h5><p>只能应用在begin end中。</p>
<h5 id="案例：-3"><a href="#案例：-3" class="headerlink" title="案例："></a>案例：</h5><p>创建一个存储过程，根据传入的成绩，来去显示等级，比如传入的成绩在[90-100]中间，则返回A；[80-90)之间，则返回B；[60-80)之间，返回C；否则，返回D；</p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">DELIMITER $</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">FUNCTION</span> test_if(score <span class="type">INT</span>)<span class="keyword">RETURNS</span> <span class="type">CHAR</span>(<span class="number">1</span>)</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">	</span><br><span class="line">	IF score <span class="operator">&gt;=</span> <span class="number">90</span> <span class="keyword">AND</span> score <span class="operator">&lt;=</span> <span class="number">100</span> <span class="keyword">THEN</span> <span class="keyword">RETURN</span> <span class="string">'A'</span>;</span><br><span class="line">	ELSEIF score <span class="operator">&gt;=</span> <span class="number">80</span> <span class="keyword">THEN</span> <span class="keyword">RETURN</span> <span class="string">'B'</span>;</span><br><span class="line">	ELSEIF score <span class="operator">&gt;=</span> <span class="number">60</span> <span class="keyword">THEN</span> <span class="keyword">RETURN</span> <span class="string">'C'</span>;</span><br><span class="line">	<span class="keyword">ELSE</span> <span class="keyword">RETURN</span> <span class="string">'D'</span>;</span><br><span class="line">	<span class="keyword">END</span> IF;</span><br><span class="line"><span class="keyword">END</span> $</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> test_if(<span class="number">88</span>)$</span><br></pre></td></tr></tbody></table></figure>

<h3 id="循环结构"><a href="#循环结构" class="headerlink" title="循环结构"></a>循环结构</h3><h4 id="分类：-1"><a href="#分类：-1" class="headerlink" title="分类："></a>分类：</h4><ul>
<li>while</li>
<li>loop</li>
<li>repeat</li>
</ul>
<p><strong>循环控制：</strong></p>
<p>iterate类似于continue，继续，结束本次循环，继续下一次；</p>
<p>leave类似于break，跳出，结束当前所在的循环。</p>
<h4 id="语法：-5"><a href="#语法：-5" class="headerlink" title="语法："></a>语法：</h4><h5 id="1-while"><a href="#1-while" class="headerlink" title="1.while"></a>1.<code>while</code></h5><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">【标签:】WHILE 循环条件  DO</span><br><span class="line">	循环体</span><br><span class="line"><span class="keyword">END</span> WHILE 【标签】;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 如果想要加入循环控制，则需要写标签。</span></span><br></pre></td></tr></tbody></table></figure>

<h5 id="2-loop"><a href="#2-loop" class="headerlink" title="2.loop"></a>2.<code>loop</code></h5><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">【标签:】loop</span><br><span class="line">	循环体</span><br><span class="line"><span class="keyword">end</span> loop 【标签】;</span><br><span class="line"><span class="comment">-- 如果想要加入循环控制，则需要写标签。</span></span><br><span class="line"><span class="comment">-- 可以用来模拟简单的死循环</span></span><br></pre></td></tr></tbody></table></figure>

<h5 id="3-repeat"><a href="#3-repeat" class="headerlink" title="3.repeat"></a>3.<code>repeat</code></h5><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">【标签:】repeat</span><br><span class="line">	循环体;</span><br><span class="line">until 结束循环的条件</span><br><span class="line"><span class="keyword">end</span> repeat【标签】;</span><br><span class="line"><span class="comment">-- 如果想要加入循环控制，则需要写标签。</span></span><br></pre></td></tr></tbody></table></figure>

<h4 id="案例演示-1"><a href="#案例演示-1" class="headerlink" title="案例演示"></a>案例演示</h4><p><strong>案例1：批量插入，根据次数插入到<code>admin</code>表中多条记录。(不添加循环控制语句)</strong></p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">DELIMITER $</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> pro_while1(<span class="keyword">IN</span> insertCount <span class="type">INT</span>)</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">	<span class="keyword">DECLARE</span> i <span class="type">INT</span> <span class="keyword">DEFAULT</span> <span class="number">1</span>;</span><br><span class="line">	WHILE i <span class="operator">&lt;=</span> insertCount DO</span><br><span class="line">		<span class="keyword">INSERT</span> <span class="keyword">INTO</span> admin(username,PASSWORD) <span class="keyword">VALUES</span>(CONCAT(<span class="string">'hh'</span>,i),<span class="string">'adb'</span>);</span><br><span class="line">		<span class="keyword">SET</span> i <span class="operator">=</span> i <span class="operator">+</span> <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">END</span> WHILE;</span><br><span class="line"><span class="keyword">END</span> $</span><br><span class="line"></span><br><span class="line"><span class="keyword">CALL</span> pro_while1(<span class="number">3</span>)$</span><br></pre></td></tr></tbody></table></figure>

<p><strong>案例2：批量插入，根据次数插入到<code>admin</code>表中多条记录，如果次数&gt;20则停止。(使用循环控制语句)</strong></p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">DELIMITER $</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> pro_while2(<span class="keyword">IN</span> insertCount <span class="type">INT</span>)</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">	<span class="keyword">DECLARE</span> i <span class="type">INT</span> <span class="keyword">DEFAULT</span> <span class="number">1</span>;</span><br><span class="line">	a:WHILE i <span class="operator">&lt;=</span> insertCount DO</span><br><span class="line">		<span class="keyword">INSERT</span> <span class="keyword">INTO</span> admin(username,PASSWORD) <span class="keyword">VALUES</span>(CONCAT(<span class="string">'hh'</span>,i),<span class="string">'adb'</span>);</span><br><span class="line">		IF i <span class="operator">&gt;=</span> <span class="number">20</span> <span class="keyword">THEN</span> LEAVE a;</span><br><span class="line">		<span class="keyword">END</span> IF;	</span><br><span class="line">		<span class="keyword">SET</span> i <span class="operator">=</span> i <span class="operator">+</span> <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">END</span> WHILE a;</span><br><span class="line"><span class="keyword">END</span> $</span><br><span class="line"></span><br><span class="line"><span class="keyword">CALL</span> pro_while2(<span class="number">32</span>)$</span><br></pre></td></tr></tbody></table></figure>

<p><strong>案例3：批量插入，根据次数插入到<code>admin</code>表中多条记录，直插入偶数次。(添加iterate语句)</strong></p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">DELIMITER $</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> pro_while3(<span class="keyword">IN</span> insertCount <span class="type">INT</span>)</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">	<span class="keyword">DECLARE</span> i <span class="type">INT</span> <span class="keyword">DEFAULT</span> <span class="number">0</span>;</span><br><span class="line">	a:WHILE i <span class="operator">&lt;=</span> insertCount DO</span><br><span class="line">		<span class="keyword">SET</span> i <span class="operator">=</span> i <span class="operator">+</span> <span class="number">1</span>;</span><br><span class="line">		IF <span class="built_in">MOD</span>(i,<span class="number">2</span>) <span class="operator">!=</span> <span class="number">0</span> <span class="keyword">THEN</span> ITERATE a;</span><br><span class="line">		<span class="keyword">END</span> IF;</span><br><span class="line">		<span class="keyword">INSERT</span> <span class="keyword">INTO</span> admin(username,PASSWORD) <span class="keyword">VALUES</span>(CONCAT(<span class="string">'hh'</span>,i),<span class="string">'adb'</span>);</span><br><span class="line">		</span><br><span class="line">	<span class="keyword">END</span> WHILE a;</span><br><span class="line"><span class="keyword">END</span> $</span><br><span class="line"></span><br><span class="line"><span class="keyword">CALL</span> pro_while3(<span class="number">32</span>)$</span><br></pre></td></tr></tbody></table></figure>

<p><strong>案例4：已知表<code>stringcontent</code>，其中字段<code>id 自增长</code>、<code>content varchar(20)</code>，向该表插入指定个数的，随机的字符串。</strong></p>
<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 创建表</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> stringcontent(</span><br><span class="line">	id <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY AUTO_INCREMENT,</span><br><span class="line">	content <span class="type">VARCHAR</span>(<span class="number">20</span>)</span><br><span class="line">);</span><br><span class="line"><span class="comment">-- 插入数据事务</span></span><br><span class="line">DELIMITER $</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> test_randstr_insert(<span class="keyword">IN</span> insertCount <span class="type">INT</span>)</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">	<span class="keyword">DECLARE</span> i <span class="type">INT</span> <span class="keyword">DEFAULT</span> <span class="number">1</span>;		#定义一个循环变量i,表示插入次数</span><br><span class="line">	<span class="keyword">DECLARE</span> str <span class="type">VARCHAR</span>(<span class="number">26</span>) <span class="keyword">DEFAULT</span> <span class="string">'abcdefghijklmnopqrstuvwxyz'</span>;</span><br><span class="line">	<span class="keyword">DECLARE</span> startIndex <span class="type">INT</span> <span class="keyword">DEFAULT</span> <span class="number">1</span>;	#代表起始索引长度</span><br><span class="line">	<span class="keyword">DECLARE</span> len <span class="type">INT</span> <span class="keyword">DEFAULT</span> <span class="number">1</span>;		#代表截取的字符的长度</span><br><span class="line">	WHILE i <span class="operator">&lt;=</span> insertCount DO</span><br><span class="line">		<span class="keyword">SET</span> len <span class="operator">=</span> <span class="built_in">FLOOR</span>(RAND()<span class="operator">*</span>(<span class="number">20</span><span class="operator">-</span>startIndex<span class="operator">+</span><span class="number">1</span>)<span class="operator">+</span><span class="number">1</span>);		#产生一个随机的整数，代表截取长度，<span class="number">1</span><span class="operator">-</span> (<span class="number">26</span><span class="operator">-</span>startIndex<span class="operator">+</span><span class="number">1</span>)</span><br><span class="line">		<span class="keyword">SET</span> startIndex <span class="operator">=</span> <span class="built_in">FLOOR</span>(RAND()<span class="operator">*</span><span class="number">26</span><span class="operator">+</span><span class="number">1</span>);			#产生一个随机的整数，代表起始索引<span class="number">1</span><span class="number">-26</span></span><br><span class="line">		<span class="keyword">INSERT</span> <span class="keyword">INTO</span> stringcontent(content)<span class="keyword">VALUES</span>(SUBSTR(str,startIndex,len));</span><br><span class="line">		<span class="keyword">SET</span> i <span class="operator">=</span> i <span class="operator">+</span> <span class="number">1</span>;			#循环变量更新</span><br><span class="line">	<span class="keyword">END</span> WHILE;</span><br><span class="line"></span><br><span class="line"><span class="keyword">END</span> $</span><br><span class="line"></span><br><span class="line"><span class="keyword">CALL</span> test_randstr_insert(<span class="number">14</span>)$</span><br></pre></td></tr></tbody></table></figure>


</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://bileis.github.io">阮·伟</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://bileis.github.io/2024/03/05/mysql%E5%9F%BA%E7%A1%80/">https://bileis.github.io/2024/03/05/mysql%E5%9F%BA%E7%A1%80/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://bileis.github.io" target="_blank">鸢尾の博客</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/MySql%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8/">MySql基础入门</a></div><div class="post_share"><div class="social-share" data-image="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="next-post pull-full"><a href="/2024/03/04/c-%E6%A0%B8%E5%BF%83%E7%BC%96%E7%A8%8B-%E9%9D%A2%E5%AF%B9%E5%AF%B9%E8%B1%A1/" title="c++核心编程-面对对象"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">c++核心编程-面对对象</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/favicon.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">阮·伟</div><div class="author-info__description">让挚爱永远捧在手心里</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">4</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">2</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#MySQL%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%90%E5%9F%BA%E7%A1%80%E7%AF%87%E3%80%91"><span class="toc-number">1.</span> <span class="toc-text">MySQL学习笔记【基础篇】</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9B%B8%E5%85%B3%E6%A6%82%E5%BF%B5"><span class="toc-number">1.1.</span> <span class="toc-text">一、数据库相关概念</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E5%A5%BD%E5%A4%84"><span class="toc-number">1.2.</span> <span class="toc-text">二、数据库的好处</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AD%98%E5%82%A8%E6%95%B0%E6%8D%AE%E7%9A%84%E7%89%B9%E7%82%B9"><span class="toc-number">1.3.</span> <span class="toc-text">三、数据库存储数据的特点</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E3%80%81MySQL%E6%9C%8D%E5%8A%A1%E7%9A%84%E5%90%AF%E5%8A%A8%E5%92%8C%E5%81%9C%E6%AD%A2"><span class="toc-number">1.4.</span> <span class="toc-text">四、MySQL服务的启动和停止</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%94%E3%80%81mysql%E6%9C%8D%E5%8A%A1%E7%9A%84%E7%99%BB%E5%BD%95%E5%92%8C%E9%80%80%E5%87%BA"><span class="toc-number">1.5.</span> <span class="toc-text">五、mysql服务的登录和退出</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AD%E3%80%81MySQL%E7%9A%84%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4"><span class="toc-number">1.6.</span> <span class="toc-text">六、MySQL的常用命令</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%83%E3%80%81MySQL%E7%9A%84%E8%AF%AD%E6%B3%95%E8%A7%84%E8%8C%83"><span class="toc-number">1.7.</span> <span class="toc-text">七、MySQL的语法规范</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AB%E3%80%81SQL%E7%9A%84%E8%AF%AD%E8%A8%80%E5%88%86%E7%B1%BB"><span class="toc-number">1.8.</span> <span class="toc-text">八、SQL的语言分类</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B9%9D%E3%80%81DQL%E8%AF%AD%E8%A8%80%E7%9A%84%E5%AD%A6%E4%B9%A0"><span class="toc-number">1.9.</span> <span class="toc-text">九、DQL语言的学习</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E7%A1%80%E6%9F%A5%E8%AF%A2"><span class="toc-number">1.9.1.</span> <span class="toc-text">基础查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9D%A1%E4%BB%B6%E6%9F%A5%E8%AF%A2"><span class="toc-number">1.9.2.</span> <span class="toc-text">条件查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%92%E5%BA%8F%E6%9F%A5%E8%AF%A2"><span class="toc-number">1.9.3.</span> <span class="toc-text">排序查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%B8%E8%A7%81%E5%87%BD%E6%95%B0"><span class="toc-number">1.9.4.</span> <span class="toc-text">常见函数</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8D%95%E8%A1%8C%E5%87%BD%E6%95%B0"><span class="toc-number">1.9.4.1.</span> <span class="toc-text">单行函数</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E5%AD%97%E7%AC%A6%E5%87%BD%E6%95%B0"><span class="toc-number">1.9.4.1.1.</span> <span class="toc-text">1.字符函数</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E6%95%B0%E5%AD%A6%E5%87%BD%E6%95%B0"><span class="toc-number">1.9.4.1.2.</span> <span class="toc-text">2.数学函数</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-%E6%97%A5%E6%9C%9F%E5%87%BD%E6%95%B0"><span class="toc-number">1.9.4.1.3.</span> <span class="toc-text">3.日期函数</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6%E5%87%BD%E6%95%B0"><span class="toc-number">1.9.4.1.4.</span> <span class="toc-text">4.流程控制函数</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%86%E7%BB%84%E5%87%BD%E6%95%B0"><span class="toc-number">1.9.4.2.</span> <span class="toc-text">分组函数</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E7%BB%84%E6%9F%A5%E8%AF%A2"><span class="toc-number">1.9.5.</span> <span class="toc-text">分组查询</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E9%9D%9E%E7%AD%89%E5%80%BC%E8%BF%9E%E6%8E%A5"><span class="toc-number">1.9.5.0.1.</span> <span class="toc-text">2.非等值连接</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-%E8%87%AA%E8%BF%9E%E6%8E%A5"><span class="toc-number">1.9.5.0.2.</span> <span class="toc-text">3.自连接</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#sql99%E6%A0%87%E5%87%86"><span class="toc-number">1.9.5.1.</span> <span class="toc-text">sql99标准</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%AF%AD%E6%B3%95"><span class="toc-number">1.9.5.1.1.</span> <span class="toc-text">语法</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%86%E7%B1%BB"><span class="toc-number">1.9.5.1.2.</span> <span class="toc-text">分类</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%86%85%E8%BF%9E%E6%8E%A5"><span class="toc-number">1.9.5.1.3.</span> <span class="toc-text">内连接</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E8%AF%AD%E6%B3%95-1"><span class="toc-number">1.9.5.1.3.1.</span> <span class="toc-text">语法</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#1-%E7%AD%89%E5%80%BC%E8%BF%9E%E6%8E%A5"><span class="toc-number">1.9.5.1.3.2.</span> <span class="toc-text">1.等值连接</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#2-%E9%9D%9E%E7%AD%89%E5%80%BC%E8%BF%9E%E6%8E%A5-1"><span class="toc-number">1.9.5.1.3.3.</span> <span class="toc-text">2.非等值连接</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3-%E8%87%AA%E8%BF%9E%E6%8E%A5-1"><span class="toc-number">1.9.5.1.3.4.</span> <span class="toc-text">3.自连接</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%A4%96%E8%BF%9E%E6%8E%A5-%E8%BF%99%E9%87%8C%E6%B2%A1%E6%9C%89%E4%BB%8B%E7%BB%8D%E5%85%A8%E5%A4%96%E8%BF%9E%E6%8E%A5"><span class="toc-number">1.9.5.1.4.</span> <span class="toc-text">外连接(这里没有介绍全外连接)</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BA%A4%E5%8F%89%E8%BF%9E%E6%8E%A5"><span class="toc-number">1.9.5.1.5.</span> <span class="toc-text">交叉连接</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#join%E8%BF%9E%E6%8E%A5%E6%80%BB%E7%BB%93"><span class="toc-number">1.9.5.2.</span> <span class="toc-text">join连接总结</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BB%BC%E5%90%88%E6%A1%88%E4%BE%8B"><span class="toc-number">1.9.5.3.</span> <span class="toc-text">综合案例</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="toc-number">1.9.6.</span> <span class="toc-text">子查询</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#where%E6%88%96having%E5%90%8E%E9%9D%A2"><span class="toc-number">1.9.6.1.</span> <span class="toc-text">where或having后面</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%89%B9%E7%82%B9%EF%BC%9A"><span class="toc-number">1.9.6.1.1.</span> <span class="toc-text">特点：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#where%E6%88%96having%E5%90%8E%E9%9D%A2%E7%9A%84%E6%A0%87%E9%87%8F%E5%AD%90%E6%9F%A5%E8%AF%A2%EF%BC%88%E4%B9%9F%E7%A7%B0%E4%B8%BA%E5%8D%95%E8%A1%8C%E5%AD%90%E6%9F%A5%E8%AF%A2%EF%BC%89%E4%BD%BF%E7%94%A8"><span class="toc-number">1.9.6.1.2.</span> <span class="toc-text">where或having后面的标量子查询（也称为单行子查询）使用</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#where%E6%88%96having%E5%90%8E%E9%9D%A2%E7%9A%84%E5%88%97%E5%AD%90%E6%9F%A5%E8%AF%A2%EF%BC%88%E4%B9%9F%E7%A7%B0%E4%B8%BA%E5%A4%9A%E8%A1%8C%E5%AD%90%E6%9F%A5%E8%AF%A2%EF%BC%89%E4%BD%BF%E7%94%A8"><span class="toc-number">1.9.6.1.3.</span> <span class="toc-text">where或having后面的列子查询（也称为多行子查询）使用</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#where%E6%88%96having%E5%90%8E%E9%9D%A2%E7%9A%84%E8%A1%8C%E5%AD%90%E6%9F%A5%E8%AF%A2%EF%BC%88%E7%BB%93%E6%9E%9C%E9%9B%86%E4%B8%BA%E4%B8%80%E8%A1%8C%E5%A4%9A%E5%88%97%E6%88%96%E5%A4%9A%E5%88%97%E5%A4%9A%E8%A1%8C-%E4%BD%BF%E7%94%A8"><span class="toc-number">1.9.6.1.4.</span> <span class="toc-text">where或having后面的行子查询（结果集为一行多列或多列多行)使用</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#select%E5%90%8E%E9%9D%A2"><span class="toc-number">1.9.6.2.</span> <span class="toc-text">select后面</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#from%E5%90%8E%E9%9D%A2"><span class="toc-number">1.9.6.3.</span> <span class="toc-text">from后面</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#exists%E5%90%8E%E9%9D%A2%EF%BC%88%E7%9B%B8%E5%85%B3%E5%AD%90%E6%9F%A5%E8%AF%A2%EF%BC%89"><span class="toc-number">1.9.6.4.</span> <span class="toc-text">exists后面（相关子查询）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BB%83%E4%B9%A0"><span class="toc-number">1.9.6.5.</span> <span class="toc-text">练习</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BB%8F%E5%85%B8%E6%A1%88%E4%BE%8B"><span class="toc-number">1.9.6.6.</span> <span class="toc-text">经典案例</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E9%A1%B5%E6%9F%A5%E8%AF%A2"><span class="toc-number">1.9.7.</span> <span class="toc-text">分页查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#union%E8%81%94%E5%90%88%E6%9F%A5%E8%AF%A2"><span class="toc-number">1.9.8.</span> <span class="toc-text">union联合查询</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%81%E3%80%81DML%E8%AF%AD%E8%A8%80%E7%9A%84%E5%AD%A6%E4%B9%A0"><span class="toc-number">1.10.</span> <span class="toc-text">十、DML语言的学习</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8F%92%E5%85%A5%E8%AF%AD%E5%8F%A5"><span class="toc-number">1.10.1.</span> <span class="toc-text">插入语句</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E8%AF%AD%E5%8F%A5"><span class="toc-number">1.10.2.</span> <span class="toc-text">修改语句</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E8%AF%AD%E5%8F%A5"><span class="toc-number">1.10.3.</span> <span class="toc-text">删除语句</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%81%E4%B8%80%E3%80%81DDL%E8%AF%AD%E8%A8%80%E7%9A%84%E5%AD%A6%E4%B9%A0"><span class="toc-number">1.11.</span> <span class="toc-text">十一、DDL语言的学习</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BA%93%E7%9A%84%E7%AE%A1%E7%90%86"><span class="toc-number">1.11.1.</span> <span class="toc-text">库的管理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%BA%93%E7%9A%84%E5%88%9B%E5%BB%BA"><span class="toc-number">1.11.1.1.</span> <span class="toc-text">1.库的创建</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E5%BA%93%E7%9A%84%E4%BF%AE%E6%94%B9"><span class="toc-number">1.11.1.2.</span> <span class="toc-text">2.库的修改</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E5%BA%93%E7%9A%84%E5%88%A0%E9%99%A4"><span class="toc-number">1.11.1.3.</span> <span class="toc-text">3.库的删除</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A1%A8%E7%9A%84%E7%AE%A1%E7%90%86"><span class="toc-number">1.11.2.</span> <span class="toc-text">表的管理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E8%A1%A8%E7%9A%84%E5%88%9B%E5%BB%BA"><span class="toc-number">1.11.2.1.</span> <span class="toc-text">1.表的创建</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E8%A1%A8%E7%9A%84%E4%BF%AE%E6%94%B9"><span class="toc-number">1.11.2.2.</span> <span class="toc-text">2.表的修改</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A1%A8%E7%9A%84%E5%A4%8D%E5%88%B6"><span class="toc-number">1.11.3.</span> <span class="toc-text">表的复制</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E4%BB%85%E4%BB%85%E5%A4%8D%E5%88%B6%E8%A1%A8%E7%9A%84%E7%BB%93%E6%9E%84"><span class="toc-number">1.11.3.1.</span> <span class="toc-text">1.仅仅复制表的结构</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E5%A4%8D%E5%88%B6%E8%A1%A8%E7%9A%84%E7%BB%93%E6%9E%84-%E6%95%B0%E6%8D%AE"><span class="toc-number">1.11.3.2.</span> <span class="toc-text">2.复制表的结构+数据</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%B8%E8%A7%81%E7%9A%84%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-number">1.11.4.</span> <span class="toc-text">常见的数据类型</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E6%95%B4%E5%9E%8B"><span class="toc-number">1.11.4.1.</span> <span class="toc-text">1.整型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E5%B0%8F%E6%95%B0"><span class="toc-number">1.11.4.2.</span> <span class="toc-text">2.小数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E5%AD%97%E7%AC%A6%E5%9E%8B"><span class="toc-number">1.11.4.3.</span> <span class="toc-text">3.字符型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E6%97%A5%E6%9C%9F%E5%9E%8B"><span class="toc-number">1.11.4.4.</span> <span class="toc-text">4.日期型</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%B8%E8%A7%81%E7%BA%A6%E6%9D%9F"><span class="toc-number">1.11.5.</span> <span class="toc-text">常见约束</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BA%A6%E6%9D%9F%E7%9A%84%E5%90%AB%E4%B9%89%EF%BC%9A"><span class="toc-number">1.11.5.1.</span> <span class="toc-text">约束的含义：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%86%E7%B1%BB%EF%BC%9A"><span class="toc-number">1.11.5.2.</span> <span class="toc-text">分类：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E7%BA%A6%E6%9D%9F%E7%9A%84%E6%97%B6%E6%9C%BA%EF%BC%9A"><span class="toc-number">1.11.5.3.</span> <span class="toc-text">添加约束的时机：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BA%A6%E6%9D%9F%E7%9A%84%E6%B7%BB%E5%8A%A0%E5%88%86%E7%B1%BB%EF%BC%9A"><span class="toc-number">1.11.5.4.</span> <span class="toc-text">约束的添加分类：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E8%A1%A8%E6%97%B6%E6%B7%BB%E5%8A%A0%E7%BA%A6%E6%9D%9F"><span class="toc-number">1.11.5.5.</span> <span class="toc-text">创建表时添加约束</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E6%B7%BB%E5%8A%A0%E5%88%97%E7%BA%A7%E7%BA%A6%E6%9D%9F"><span class="toc-number">1.11.5.5.1.</span> <span class="toc-text">1.添加列级约束</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E6%B7%BB%E5%8A%A0%E8%A1%A8%E7%BA%A7%E7%BA%A6%E6%9D%9F"><span class="toc-number">1.11.5.5.2.</span> <span class="toc-text">2.添加表级约束</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-%E9%80%9A%E7%94%A8%E7%9A%84%E5%86%99%E6%B3%95%EF%BC%9A"><span class="toc-number">1.11.5.5.3.</span> <span class="toc-text">3.通用的写法：</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E8%A1%A8%E6%97%B6%E6%B7%BB%E5%8A%A0%E7%BA%A6%E6%9D%9F"><span class="toc-number">1.11.5.6.</span> <span class="toc-text">修改表时添加约束</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%AF%AD%E6%B3%95-2"><span class="toc-number">1.11.5.6.1.</span> <span class="toc-text">语法</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E6%B7%BB%E5%8A%A0%E9%9D%9E%E7%A9%BA%E7%BA%A6%E6%9D%9F"><span class="toc-number">1.11.5.6.2.</span> <span class="toc-text">1.添加非空约束</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E6%B7%BB%E5%8A%A0%E9%BB%98%E8%AE%A4%E7%BA%A6%E6%9D%9F"><span class="toc-number">1.11.5.6.3.</span> <span class="toc-text">2.添加默认约束</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-%E6%B7%BB%E5%8A%A0%E4%B8%BB%E9%94%AE"><span class="toc-number">1.11.5.6.4.</span> <span class="toc-text">3.添加主键</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-%E6%B7%BB%E5%8A%A0%E5%94%AF%E4%B8%80"><span class="toc-number">1.11.5.6.5.</span> <span class="toc-text">4.添加唯一</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#5-%E6%B7%BB%E5%8A%A0%E5%A4%96%E9%94%AE"><span class="toc-number">1.11.5.6.6.</span> <span class="toc-text">5.添加外键</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E8%A1%A8%E6%97%B6%E5%88%A0%E9%99%A4%E7%BA%A6%E6%9D%9F"><span class="toc-number">1.11.5.7.</span> <span class="toc-text">修改表时删除约束</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E5%88%A0%E9%99%A4%E9%9D%9E%E7%A9%BA%E7%BA%A6%E6%9D%9F"><span class="toc-number">1.11.5.7.1.</span> <span class="toc-text">1.删除非空约束</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E5%88%A0%E9%99%A4%E9%BB%98%E8%AE%A4%E7%BA%A6%E6%9D%9F"><span class="toc-number">1.11.5.7.2.</span> <span class="toc-text">2.删除默认约束</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-%E5%88%A0%E9%99%A4%E4%B8%BB%E9%94%AE"><span class="toc-number">1.11.5.7.3.</span> <span class="toc-text">3.删除主键</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-%E5%88%A0%E9%99%A4%E5%94%AF%E4%B8%80"><span class="toc-number">1.11.5.7.4.</span> <span class="toc-text">4.删除唯一</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#5-%E5%88%A0%E9%99%A4%E5%A4%96%E9%94%AE"><span class="toc-number">1.11.5.7.5.</span> <span class="toc-text">5.删除外键</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%87%E8%AF%86%E5%88%97"><span class="toc-number">1.11.6.</span> <span class="toc-text">标识列</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%89%B9%E7%82%B9"><span class="toc-number">1.11.6.1.</span> <span class="toc-text">特点</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E8%A1%A8%E6%97%B6%E8%AE%BE%E7%BD%AE%E6%A0%87%E8%AF%86%E5%88%97"><span class="toc-number">1.11.6.2.</span> <span class="toc-text">创建表时设置标识列</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E8%A1%A8%E6%97%B6%E8%AE%BE%E7%BD%AE%E6%A0%87%E8%AF%86%E5%88%97"><span class="toc-number">1.11.6.3.</span> <span class="toc-text">修改表时设置标识列</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E8%A1%A8%E6%97%B6%E5%88%A0%E9%99%A4%E6%A0%87%E8%AF%86%E5%88%97"><span class="toc-number">1.11.6.4.</span> <span class="toc-text">修改表时删除标识列</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%81%E4%BA%8C%E3%80%81TCL%E8%AF%AD%E8%A8%80%E7%9A%84%E5%AD%A6%E4%B9%A0"><span class="toc-number">1.12.</span> <span class="toc-text">十二、TCL语言的学习</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%B8%E5%85%B3%E6%A6%82%E5%BF%B5%E4%BB%8B%E7%BB%8D"><span class="toc-number">1.12.1.</span> <span class="toc-text">相关概念介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%BC%94%E7%A4%BAsavepoint%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">1.12.1.1.</span> <span class="toc-text">演示savepoint的使用</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%81%E4%B8%89%E3%80%81%E8%A7%86%E5%9B%BE"><span class="toc-number">1.13.</span> <span class="toc-text">十三、视图</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%AB%E4%B9%89%EF%BC%9A"><span class="toc-number">1.13.1.</span> <span class="toc-text">含义：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%86%E5%9B%BE%E5%92%8C%E8%A1%A8%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">1.13.2.</span> <span class="toc-text">视图和表的区别</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%86%E5%9B%BE%E7%9A%84%E5%88%9B%E5%BB%BA"><span class="toc-number">1.13.3.</span> <span class="toc-text">视图的创建</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%86%E5%9B%BE%E7%9A%84%E4%BF%AE%E6%94%B9"><span class="toc-number">1.13.4.</span> <span class="toc-text">视图的修改</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%86%E5%9B%BE%E7%9A%84%E5%88%A0%E9%99%A4"><span class="toc-number">1.13.5.</span> <span class="toc-text">视图的删除</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%86%E5%9B%BE%E7%9A%84%E6%9F%A5%E7%9C%8B"><span class="toc-number">1.13.6.</span> <span class="toc-text">视图的查看</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%86%E5%9B%BE%E7%9A%84%E6%9B%B4%E6%96%B0"><span class="toc-number">1.13.7.</span> <span class="toc-text">视图的更新</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B"><span class="toc-number">1.13.8.</span> <span class="toc-text">案例</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B0%8F%E6%B5%8B%E8%AF%95"><span class="toc-number">1.13.8.1.</span> <span class="toc-text">小测试</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%81%E5%9B%9B%E3%80%81%E5%8F%98%E9%87%8F"><span class="toc-number">1.14.</span> <span class="toc-text">十四、变量</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E7%B1%BB-1"><span class="toc-number">1.14.1.</span> <span class="toc-text">分类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B3%BB%E7%BB%9F%E5%8F%98%E9%87%8F"><span class="toc-number">1.14.2.</span> <span class="toc-text">系统变量</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AF%B4%E6%98%8E%EF%BC%9A"><span class="toc-number">1.14.2.1.</span> <span class="toc-text">说明：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E7%9A%84%E8%AF%AD%E6%B3%95%EF%BC%9A"><span class="toc-number">1.14.2.2.</span> <span class="toc-text">使用的语法：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F%E7%9A%84%E6%BC%94%E7%A4%BA"><span class="toc-number">1.14.2.3.</span> <span class="toc-text">全局变量的演示</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BC%9A%E8%AF%9D%E5%8F%98%E9%87%8F%E7%9A%84%E6%BC%94%E7%A4%BA"><span class="toc-number">1.14.2.4.</span> <span class="toc-text">会话变量的演示</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E5%8F%98%E9%87%8F"><span class="toc-number">1.14.3.</span> <span class="toc-text">自定义变量</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AF%B4%E6%98%8E%EF%BC%9A-1"><span class="toc-number">1.14.3.1.</span> <span class="toc-text">说明：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E6%AD%A5%E9%AA%A4%EF%BC%9A"><span class="toc-number">1.14.3.2.</span> <span class="toc-text">使用步骤：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E5%8F%98%E9%87%8F%E7%9A%84%E6%BC%94%E7%A4%BA"><span class="toc-number">1.14.3.3.</span> <span class="toc-text">用户变量的演示</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B1%80%E9%83%A8%E5%8F%98%E9%87%8F%E7%9A%84%E6%BC%94%E7%A4%BA"><span class="toc-number">1.14.3.4.</span> <span class="toc-text">局部变量的演示</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AF%B9%E6%AF%94%E7%94%A8%E6%88%B7%E5%8F%98%E9%87%8F%E5%92%8C%E5%B1%80%E9%83%A8%E5%8F%98%E9%87%8F"><span class="toc-number">1.14.3.5.</span> <span class="toc-text">对比用户变量和局部变量</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%EF%BC%9A%E5%A3%B0%E6%98%8E%E4%B8%A4%E4%B8%AA%E5%8F%98%E9%87%8F%E5%B9%B6%E8%B5%8B%E5%88%9D%E5%80%BC%EF%BC%8C%E6%B1%82%E5%92%8C%EF%BC%8C%E5%B9%B6%E6%89%93%E5%8D%B0"><span class="toc-number">1.14.3.6.</span> <span class="toc-text">案例：声明两个变量并赋初值，求和，并打印</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E7%94%A8%E7%94%A8%E6%88%B7%E5%8F%98%E9%87%8F%E6%9D%A5%E5%81%9A"><span class="toc-number">1.14.3.6.1.</span> <span class="toc-text">1.用用户变量来做</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E7%94%A8%E5%B1%80%E9%83%A8%E5%8F%98%E9%87%8F%E6%9D%A5%E5%81%9A"><span class="toc-number">1.14.3.6.2.</span> <span class="toc-text">2.用局部变量来做</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%81%E4%BA%94%E3%80%81%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B%E5%92%8C%E5%87%BD%E6%95%B0"><span class="toc-number">1.15.</span> <span class="toc-text">十五、存储过程和函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B"><span class="toc-number">1.15.1.</span> <span class="toc-text">存储过程</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%90%AB%E4%B9%89%EF%BC%9A-1"><span class="toc-number">1.15.1.1.</span> <span class="toc-text">含义：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A5%BD%E5%A4%84%EF%BC%9A"><span class="toc-number">1.15.1.2.</span> <span class="toc-text">好处：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AF%AD%E6%B3%95%EF%BC%9A"><span class="toc-number">1.15.1.3.</span> <span class="toc-text">语法：</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E5%88%9B%E5%BB%BA%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B%E8%AF%AD%E6%B3%95"><span class="toc-number">1.15.1.3.1.</span> <span class="toc-text">1.创建存储过程语法</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E8%B0%83%E7%94%A8%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B%E8%AF%AD%E6%B3%95"><span class="toc-number">1.15.1.3.2.</span> <span class="toc-text">2.调用存储过程语法</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-%E5%88%A0%E9%99%A4%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B%E8%AF%AD%E6%B3%95"><span class="toc-number">1.15.1.3.3.</span> <span class="toc-text">3.删除存储过程语法</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-%E6%9F%A5%E7%9C%8B%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B%E7%9A%84%E4%BF%A1%E6%81%AF"><span class="toc-number">1.15.1.3.4.</span> <span class="toc-text">4.查看存储过程的信息</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%A9%BA%E5%8F%82%E5%88%97%E8%A1%A8"><span class="toc-number">1.15.1.4.</span> <span class="toc-text">空参列表</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%EF%BC%9A"><span class="toc-number">1.15.1.4.1.</span> <span class="toc-text">案例：</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E5%B8%A6in%E6%A8%A1%E5%BC%8F%E5%8F%82%E6%95%B0%E7%9A%84%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B"><span class="toc-number">1.15.1.5.</span> <span class="toc-text">创建带in模式参数的存储过程</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B1%EF%BC%9A"><span class="toc-number">1.15.1.5.1.</span> <span class="toc-text">案例1：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B2%EF%BC%9A"><span class="toc-number">1.15.1.5.2.</span> <span class="toc-text">案例2：</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E5%B8%A6out%E6%A8%A1%E5%BC%8F%E7%9A%84%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B"><span class="toc-number">1.15.1.6.</span> <span class="toc-text">创建带out模式的存储过程</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B1%EF%BC%9A-1"><span class="toc-number">1.15.1.6.1.</span> <span class="toc-text">案例1：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B2%EF%BC%9A-1"><span class="toc-number">1.15.1.6.2.</span> <span class="toc-text">案例2：</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E5%B8%A6inout%E6%A8%A1%E5%BC%8F%E7%9A%84%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B"><span class="toc-number">1.15.1.7.</span> <span class="toc-text">创建带inout模式的存储过程</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%EF%BC%9A-1"><span class="toc-number">1.15.1.7.1.</span> <span class="toc-text">案例：</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B-1"><span class="toc-number">1.15.1.8.</span> <span class="toc-text">案例</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%87%BD%E6%95%B0"><span class="toc-number">1.15.2.</span> <span class="toc-text">函数</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%90%AB%E4%B9%89%EF%BC%9A-2"><span class="toc-number">1.15.2.1.</span> <span class="toc-text">含义：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%8E%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B%E7%9A%84%E5%8C%BA%E5%88%AB%EF%BC%9A"><span class="toc-number">1.15.2.2.</span> <span class="toc-text">与存储过程的区别：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AF%AD%E6%B3%95%EF%BC%9A-1"><span class="toc-number">1.15.2.3.</span> <span class="toc-text">语法：</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E5%88%9B%E5%BB%BA%E5%87%BD%E6%95%B0%E8%AF%AD%E6%B3%95"><span class="toc-number">1.15.2.3.1.</span> <span class="toc-text">1.创建函数语法</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E8%B0%83%E7%94%A8%E5%87%BD%E6%95%B0%E8%AF%AD%E6%B3%95"><span class="toc-number">1.15.2.3.2.</span> <span class="toc-text">2.调用函数语法</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%E6%BC%94%E7%A4%BA"><span class="toc-number">1.15.2.3.3.</span> <span class="toc-text">案例演示</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1-%E6%97%A0%E5%8F%82%E6%9C%89%E8%BF%94%E5%9B%9E"><span class="toc-number">1.15.2.3.3.1.</span> <span class="toc-text">1.无参有返回</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#2-%E6%9C%89%E5%8F%82%E6%9C%89%E8%BF%94%E5%9B%9E"><span class="toc-number">1.15.2.3.3.2.</span> <span class="toc-text">2.有参有返回</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-%E6%9F%A5%E7%9C%8B%E5%87%BD%E6%95%B0%E7%9A%84%E4%BF%A1%E6%81%AF"><span class="toc-number">1.15.2.3.4.</span> <span class="toc-text">3.查看函数的信息</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-%E5%88%A0%E9%99%A4%E5%87%BD%E6%95%B0"><span class="toc-number">1.15.2.3.5.</span> <span class="toc-text">4.删除函数</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%81%E5%85%AD%E3%80%81%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6%E7%BB%93%E6%9E%84"><span class="toc-number">1.16.</span> <span class="toc-text">十六、流程控制结构</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E7%B1%BB-2"><span class="toc-number">1.16.1.</span> <span class="toc-text">分类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E6%94%AF%E7%BB%93%E6%9E%84"><span class="toc-number">1.16.2.</span> <span class="toc-text">分支结构</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-if%E5%87%BD%E6%95%B0"><span class="toc-number">1.16.2.1.</span> <span class="toc-text">1.if函数</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8A%9F%E8%83%BD%EF%BC%9A"><span class="toc-number">1.16.2.1.1.</span> <span class="toc-text">功能：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%AF%AD%E6%B3%95%EF%BC%9A-2"><span class="toc-number">1.16.2.1.2.</span> <span class="toc-text">语法：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%BA%94%E7%94%A8%E5%9C%BA%E5%90%88%EF%BC%9A"><span class="toc-number">1.16.2.1.3.</span> <span class="toc-text">应用场合：</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-case%E7%BB%93%E6%9E%84"><span class="toc-number">1.16.2.2.</span> <span class="toc-text">2.case结构</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8A%9F%E8%83%BD%EF%BC%9A-1"><span class="toc-number">1.16.2.2.1.</span> <span class="toc-text">功能：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%AF%AD%E6%B3%95%EF%BC%9A-3"><span class="toc-number">1.16.2.2.2.</span> <span class="toc-text">语法：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%89%B9%E7%82%B9%EF%BC%9A-1"><span class="toc-number">1.16.2.2.3.</span> <span class="toc-text">特点：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%EF%BC%9A-2"><span class="toc-number">1.16.2.2.4.</span> <span class="toc-text">案例：</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-if%E7%BB%93%E6%9E%84"><span class="toc-number">1.16.2.3.</span> <span class="toc-text">3.if结构</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8A%9F%E8%83%BD%EF%BC%9A-2"><span class="toc-number">1.16.2.3.1.</span> <span class="toc-text">功能：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%AF%AD%E6%B3%95%EF%BC%9A-4"><span class="toc-number">1.16.2.3.2.</span> <span class="toc-text">语法：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%BA%94%E7%94%A8%E5%9C%BA%E5%90%88%EF%BC%9A-1"><span class="toc-number">1.16.2.3.3.</span> <span class="toc-text">应用场合：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%EF%BC%9A-3"><span class="toc-number">1.16.2.3.4.</span> <span class="toc-text">案例：</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BE%AA%E7%8E%AF%E7%BB%93%E6%9E%84"><span class="toc-number">1.16.3.</span> <span class="toc-text">循环结构</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%86%E7%B1%BB%EF%BC%9A-1"><span class="toc-number">1.16.3.1.</span> <span class="toc-text">分类：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AF%AD%E6%B3%95%EF%BC%9A-5"><span class="toc-number">1.16.3.2.</span> <span class="toc-text">语法：</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-while"><span class="toc-number">1.16.3.2.1.</span> <span class="toc-text">1.while</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-loop"><span class="toc-number">1.16.3.2.2.</span> <span class="toc-text">2.loop</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-repeat"><span class="toc-number">1.16.3.2.3.</span> <span class="toc-text">3.repeat</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%E6%BC%94%E7%A4%BA-1"><span class="toc-number">1.16.3.3.</span> <span class="toc-text">案例演示</span></a></li></ol></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2024/03/05/mysql%E5%9F%BA%E7%A1%80/" title="mysql基础"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="mysql基础"/></a><div class="content"><a class="title" href="/2024/03/05/mysql%E5%9F%BA%E7%A1%80/" title="mysql基础">mysql基础</a><time datetime="2024-03-05T01:00:29.000Z" title="发表于 2024-03-05 09:00:29">2024-03-05</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/03/04/c-%E6%A0%B8%E5%BF%83%E7%BC%96%E7%A8%8B-%E9%9D%A2%E5%AF%B9%E5%AF%B9%E8%B1%A1/" title="c++核心编程-面对对象"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="c++核心编程-面对对象"/></a><div class="content"><a class="title" href="/2024/03/04/c-%E6%A0%B8%E5%BF%83%E7%BC%96%E7%A8%8B-%E9%9D%A2%E5%AF%B9%E5%AF%B9%E8%B1%A1/" title="c++核心编程-面对对象">c++核心编程-面对对象</a><time datetime="2024-03-04T03:31:44.000Z" title="发表于 2024-03-04 11:31:44">2024-03-04</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/03/04/c-%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8/" title="c++基础入门"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="c++基础入门"/></a><div class="content"><a class="title" href="/2024/03/04/c-%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8/" title="c++基础入门">c++基础入门</a><time datetime="2024-03-04T03:23:43.000Z" title="发表于 2024-03-04 11:23:43">2024-03-04</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/03/02/hello-world/" title="Hello World"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Hello World"/></a><div class="content"><a class="title" href="/2024/03/02/hello-world/" title="Hello World">Hello World</a><time datetime="2024-03-02T07:59:38.566Z" title="发表于 2024-03-02 15:59:38">2024-03-02</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2022 - 2024 By 阮·伟</div><div class="footer_custom_text"><p> <a style="margin-inline:5px"target="_blank" href="https://hexo.io/"> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Frame-Hexo-blue?style=flat&logo=hexo" title="博客框架为 Hexo" alt="HEXO"> </a> <a style="margin-inline:5px"target="_blank" href="https://butterfly.js.org/"> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Theme-Butterfly-6513df?style=flat&logo=bitdefender" title="主题采用 Butterfly" alt="Butterfly"> </a> <a style="margin-inline:5px"target="_blank" href="https://github.com/"> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Source-Github-d021d6?style=flat&logo=GitHub" title="本站项目由 GitHub 托管" alt="GitHub"> </a> <a style="margin-inline:5px"target="_blank"href="http://creativecommons.org/licenses/by-nc-sa/4.0/"> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Copyright-BY--NC--SA%204.0-d42328?style=flat&logo=Claris" alt="img" title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可"> </a> </p></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=4.13.0"></script><script src="/js/main.js?v=4.13.0"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload@17.8.8/dist/lazyload.iife.min.js"></script><div class="js-pjax"></div><script src="/js/fish.js"></script><div class="aplayer no-destroy" data-id="580574589" data-server="netease" data-type="playlist"   data-order="random"  data-fixed="true"   data-preload="auto"   data-autoplay="true"   data-mutex="true"   data-loop="all"  data-volume="0.4"  data-hideLrc="true" ></div><canvas class="fireworks" mobile="false"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/fireworks.min.js"></script><script defer="defer" id="fluttering_ribbon" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/canvas-fluttering-ribbon.min.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/metingjs/dist/Meting.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js?v=4.13.0"></script></div></div><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/koharu.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":false},"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/"});</script></body></html>